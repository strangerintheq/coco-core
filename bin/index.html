<!DOCTYPE html><html><head>    <meta charset="UTF-8">    <title>Coco Web Core</title>    <style>
body {
  margin: 0;
  overflow: hidden;
  width: 100%;
  height: 100%;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  font-family: Arial, sans-serif;
}
#container {
  position: absolute;
  width: 100%;
  height: 100%;
}
#canvas {
  width: 100%;
  height: 100%;
  background-color: #000;
}
.hidden {
  display: none;
}
#buttons {
  position: absolute;
  margin: 10px;
}
div.button {
  pointer-events: all;
  margin: 2px;
  width: 30px;
  height: 30px;
  border: 2px solid #f5deb3;
  border-radius: 30px;
  position: absolute;
  cursor: pointer;
  text-align: center;
  line-height: 30px;
  color: #f5deb3;
  transition: 300ms;
}
div.button:hover {
  width: 34px;
  height: 34px;
  line-height: 34px;
  margin: 0;
}
#compass {
  position: absolute;
  width: 200px;
  height: 200px;
  bottom: 0;
  margin-left: -75px;
  left: 50%;
  pointer-events: all;
}
#switch-globe {
  left: 0;
}
#settings {
  left: 50px;
}
div.form {
  background-color: rgba(0,0,0,0.5);
  border-radius: 5px;
  position: absolute;
  box-shadow: 0 0 10px 0 #d3d3d3;
  overflow: hidden;
  opacity: 0;
  pointer-events: none;
}
div.form.form-transition {
  transition: 200ms;
}
div.form.visible {
  opacity: 1;
  pointer-events: all;
}
.form-title {
  width: 100%;
  position: absolute;
  text-align: center;
  font-size: 20px;
  color: #f0e68c;
  cursor: move;
  height: 35px;
  line-height: 35px;
}
.form-buttons {
  position: absolute;
  bottom: 7px;
  right: 7px;
  text-align: right;
}
div.form-button {
  width: 119px;
  color: #d3d3d3;
  display: inline-block;
  margin: 5px;
  height: 25px;
  line-height: 25px;
  text-align: center;
  cursor: pointer;
  transition: 100ms;
  border-radius: 3px;
  background-color: rgba(0,0,0,0.3);
  box-shadow: 0 0 5px 0 #d3d3d3;
}
div.form-button:hover {
  box-shadow: 0 0 10px 0 #fff;
  transition: 200ms;
  background-color: rgba(0,0,0,0.1);
}
div.form-button.selected {
  color: #f5deb3;
  transition: 300ms;
}
.form-content {
  position: absolute;
  top: 40px;
}
.form-field {
  line-height: 25px;
  height: 25px;
}
.form-field-title {
  color: #fff;
  margin-left: 10px;
  display: inline-block;
  cursor: default;
}
.form-field-value {
  color: #f5deb3;
  display: inline-block;
  margin-left: 10px;
  cursor: default;
}
div.form-top-button {
  position: absolute;
  top: 5px;
  right: 5px;
  box-shadow: 0 0 5px 0 #d3d3d3;
  width: 21px;
  height: 21px;
  cursor: pointer;
  margin: 2px;
  border-radius: 5px;
  transition: 300ms;
}
div.form-top-button:hover {
  transition: 300ms;
  box-shadow: 0 0 10px 0 #fff;
}
div.form-minimized {
  height: 35px !important;
  width: 150px !important;
  border-radius: 0;
  transition: 300ms;
  bottom: 10px !important;
  top: auto !important;
  margin-top: 0 !important;
  box-shadow: 0 0 5px 0 #808080;
}
div.form-minimized div.form-title {
  cursor: pointer !important;
}
div.form-minimized:hover {
  box-shadow: 0 0 10px 0 #d3d3d3;
  transition: 300ms;
}
#form-settings {
  width: 300px;
  height: 200px;
  left: 100px;
  bottom: 200px;
}
#form-settings1 {
  width: 300px;
  height: 200px;
  left: 500px;
  bottom: 200px;
}</style></head><body>    <div id="container">    <canvas id="canvas"></canvas></div><div id="buttons">    <div id="switch-globe" class="button">        <svg viewBox="-55 -55 700 700">    <path        fill='white'        d="M505.123,87.08c-27.133-27.133-58.742-48.441-93.947-63.332C374.705,8.321,335.988,0.5,296.101,0.5    c-39.887,0-78.604,7.821-115.074,23.248C145.822,38.638,114.214,59.946,87.08,87.08c-27.134,27.134-48.442,58.742-63.333,93.948    C8.321,217.498,0.5,256.214,0.5,296.102c0,39.887,7.821,78.604,23.248,115.074c14.89,35.205,36.198,66.813,63.332,93.947    s58.742,48.442,93.947,63.333c36.471,15.426,75.188,23.247,115.074,23.247c39.887,0,78.604-7.821,115.075-23.247    c35.205-14.891,66.812-36.199,93.947-63.333c27.135-27.133,48.441-58.742,63.332-93.947    c15.426-36.471,23.248-75.188,23.248-115.074c0-39.887-7.822-78.604-23.248-115.074    C553.564,145.822,532.258,114.213,505.123,87.08z M456.451,274.682c-1.363-37.479-6.293-73.628-14.439-106.704    c19.564-7.662,37.543-16.875,53.395-27.343c29.373,37.601,48.334,83.727,52.557,134.046H456.451z M317.521,47.506    c28.795,11.331,53.932,45.084,71.322,92.512c-22.607,5.676-46.719,9.249-71.322,10.566V47.506z M274.681,47.506v103.079    c-24.78-1.33-48.83-4.949-71.311-10.601C220.761,92.575,245.893,58.834,274.681,47.506z M191.077,181.121    c26.651,6.871,54.639,11.012,83.604,12.375v81.186h-96.062C179.929,241.216,184.279,209.604,191.077,181.121z M274.681,317.521    v81.187c-28.964,1.362-56.954,5.503-83.604,12.374c-6.798-28.482-11.147-60.095-12.458-93.561H274.681L274.681,317.521z     M274.681,441.617v103.079c-28.788-11.327-53.92-45.068-71.311-92.479C225.851,446.566,249.901,442.947,274.681,441.617z     M317.521,544.697V441.619c24.604,1.316,48.715,4.89,71.322,10.566C371.453,499.612,346.316,533.366,317.521,544.697z     M401.121,411.103c-26.51-6.791-54.812-10.982-83.6-12.378v-81.203h96.061C412.273,350.995,407.922,382.615,401.121,411.103z     M317.521,274.682v-81.203c28.787-1.396,57.09-5.587,83.6-12.378c6.801,28.487,11.152,60.107,12.463,93.581H317.521z     M465.764,108.745c-10.943,6.701-23.07,12.762-36.146,18.061c-3.467-9.588-7.242-18.793-11.322-27.543    c-5.775-12.378-12.068-23.693-18.846-33.894C423.852,76.316,446.201,91.019,465.764,108.745z M192.754,65.368    c-6.777,10.201-13.073,21.516-18.846,33.894c-4.08,8.746-7.852,17.947-11.319,27.531c-13.009-5.256-25.136-11.294-36.157-18.044    C145.996,91.021,168.349,76.317,192.754,65.368z M96.795,140.636c15.85,10.46,33.85,19.677,53.398,27.336    c-8.148,33.077-13.079,69.228-14.441,106.709H44.24C48.462,224.362,67.423,178.237,96.795,140.636z M135.752,317.521    c1.362,37.482,6.294,73.633,14.441,106.71c-19.548,7.658-37.548,16.875-53.398,27.335    c-29.372-37.601-48.333-83.726-52.556-134.045H135.752z M126.432,483.454c11.021-6.751,23.147-12.789,36.157-18.045    c3.467,9.584,7.239,18.785,11.319,27.531c5.774,12.378,12.069,23.692,18.846,33.894    C168.349,515.886,145.996,501.182,126.432,483.454z M399.447,526.835c6.777-10.201,13.072-21.516,18.848-33.894    c4.08-8.75,7.854-17.955,11.322-27.544c13.076,5.3,25.201,11.361,36.146,18.062C446.201,501.185,423.852,515.888,399.447,526.835z     M495.406,451.567c-15.852-10.468-33.83-19.682-53.395-27.343c8.146-33.074,13.076-69.224,14.439-106.703h91.512    C543.74,367.841,524.779,413.967,495.406,451.567z" />	<path	    fill='white'	    d="M296.101,592.203c-39.954,0-78.736-7.835-115.269-23.286c-35.264-14.916-66.926-36.261-94.106-63.44    c-27.18-27.18-48.524-58.842-63.439-94.106C7.835,374.84,0,336.058,0,296.102c0-39.955,7.835-78.737,23.287-115.269    c14.916-35.265,36.26-66.927,63.439-94.106c27.181-27.18,58.842-48.523,94.106-63.439C217.364,7.835,256.146,0,296.101,0    c39.956,0,78.738,7.835,115.269,23.287c35.267,14.917,66.929,36.26,94.106,63.439c27.179,27.177,48.522,58.839,63.439,94.106    c15.452,36.533,23.287,75.315,23.287,115.269c0,39.953-7.835,78.735-23.287,115.269c-14.918,35.27-36.262,66.931-63.439,94.106    c-27.182,27.181-58.844,48.525-94.106,63.44C374.839,584.368,336.057,592.203,296.101,592.203z M296.101,1    c-39.82,0-78.472,7.808-114.879,23.208c-35.145,14.865-66.699,36.137-93.789,63.225c-27.088,27.088-48.36,58.644-63.226,93.789    C8.808,217.63,1,256.281,1,296.102c0,39.821,7.808,78.473,23.208,114.88c14.865,35.145,36.137,66.7,63.225,93.788    c27.088,27.089,58.644,48.36,93.789,63.226c36.409,15.399,75.06,23.208,114.879,23.208c39.821,0,78.472-7.809,114.88-23.208    c35.143-14.864,66.698-36.137,93.788-63.226c27.086-27.084,48.358-58.639,63.225-93.788c15.4-36.41,23.209-75.062,23.209-114.88    c0-39.819-7.809-78.47-23.209-114.879c-14.866-35.148-36.138-66.703-63.225-93.789c-27.087-27.087-58.642-48.359-93.788-63.225    C374.573,8.808,335.922,1,296.101,1z M317.021,545.432v-104.34l0.526,0.028c24.69,1.32,48.719,4.881,71.418,10.58l0.539,0.136    l-0.191,0.521c-17.858,48.702-43.29,81.661-71.609,92.805L317.021,545.432z M318.021,442.147v101.812    c27.676-11.257,52.558-43.673,70.161-91.424C365.866,446.971,342.267,443.477,318.021,442.147z M275.181,545.431l-0.683-0.27    c-28.312-11.14-53.739-44.086-71.597-92.771l-0.191-0.521l0.539-0.136c22.762-5.722,46.786-9.293,71.406-10.614l0.527-0.028    V545.431z M204.032,452.567c17.603,47.734,42.481,80.138,70.149,91.391V442.146C250.004,443.475,226.409,446.98,204.032,452.567z     M398.073,527.999l0.958-1.44c6.747-10.156,13.076-21.538,18.811-33.828c4.014-8.607,7.817-17.86,11.306-27.503l0.176-0.488    l0.481,0.195c13.067,5.296,25.254,11.385,36.22,18.098l0.569,0.349l-0.494,0.448c-19.804,17.944-42.16,32.567-66.447,43.462    L398.073,527.999z M429.91,466.057c-3.449,9.494-7.204,18.607-11.162,27.096c-5.485,11.757-11.514,22.687-17.933,32.515    c23.383-10.682,44.942-24.848,64.116-42.13C454.295,477.072,442.519,471.194,429.91,466.057z M194.128,527.998l-1.579-0.708    c-24.292-10.897-46.65-25.521-66.454-43.466l-0.495-0.448l0.569-0.349c10.959-6.713,23.149-12.797,36.231-18.082l0.481-0.194    l0.177,0.488c3.486,9.637,7.288,18.886,11.302,27.49c5.734,12.291,12.062,23.672,18.81,33.828L194.128,527.998z M127.264,483.532    c19.173,17.282,40.736,31.45,64.122,42.134c-6.418-9.827-12.447-20.758-17.931-32.515c-3.958-8.485-7.711-17.595-11.159-27.084    C149.674,471.194,137.893,477.067,127.264,483.532z M495.516,452.239l-0.385-0.255c-15.855-10.471-33.789-19.653-53.302-27.294    l-0.407-0.16l0.104-0.425c8.212-33.339,13.064-69.205,14.425-106.603l0.018-0.481h92.538l-0.046,0.542    c-4.114,49.034-22.324,95.479-52.661,134.312L495.516,452.239z M442.602,423.919c19.262,7.572,36.986,16.646,52.694,26.977    c29.935-38.462,47.948-84.388,52.123-132.874h-90.485C455.553,355.153,450.73,390.778,442.602,423.919z M96.686,452.238    l-0.284-0.364c-30.335-38.834-48.545-85.278-52.66-134.311l-0.046-0.542h92.538l0.018,0.481    c1.359,37.393,6.213,73.261,14.427,106.608l0.105,0.426l-0.408,0.16c-19.526,7.649-37.461,16.83-53.305,27.286L96.686,452.238z     M44.784,318.021c4.174,48.485,22.188,94.41,52.122,132.873c15.697-10.316,33.422-19.388,52.698-26.969    c-8.133-33.151-12.954-68.774-14.333-105.904H44.784z M401.489,411.713l-0.492-0.126c-26.565-6.806-54.659-10.965-83.5-12.363    l-0.476-0.022v-82.18h97.08l-0.02,0.52c-1.285,32.871-5.482,64.389-12.475,93.678L401.489,411.713z M318.021,398.249    c28.563,1.415,56.393,5.533,82.731,12.243c6.869-28.932,11.01-60.038,12.309-92.471h-95.04V398.249z M190.708,411.693    l-0.118-0.495c-6.988-29.28-11.184-60.791-12.471-93.657l-0.021-0.52h97.083v82.163l-0.477,0.022    c-28.867,1.358-56.961,5.517-83.503,12.359L190.708,411.693z M179.139,318.021c1.301,32.429,5.44,63.527,12.307,92.449    c26.316-6.747,54.146-10.864,82.736-12.239v-80.21H179.139z M548.507,275.182h-92.538l-0.018-0.482    c-1.36-37.396-6.213-73.262-14.425-106.602l-0.104-0.425l0.407-0.16c19.517-7.643,37.449-16.826,53.302-27.294l0.385-0.255    l0.284,0.364c30.337,38.834,48.547,85.278,52.661,134.312L548.507,275.182z M456.934,274.182h90.485    c-4.175-48.486-22.188-94.412-52.123-132.875c-15.705,10.329-33.429,19.403-52.694,26.977    C450.731,201.427,455.553,237.048,456.934,274.182z M414.104,275.182h-97.082v-82.18l0.476-0.023    c28.841-1.398,56.935-5.558,83.5-12.363l0.492-0.126l0.118,0.494c6.991,29.287,11.189,60.804,12.477,93.678L414.104,275.182z     M318.021,274.182h95.042c-1.301-32.436-5.441-63.542-12.311-92.471c-26.339,6.71-54.168,10.829-82.731,12.244V274.182z     M275.181,275.182h-97.083l0.021-0.52c1.287-32.866,5.483-64.376,12.471-93.658l0.118-0.495l0.493,0.127    c26.542,6.843,54.637,11.001,83.503,12.359l0.477,0.022V275.182z M179.139,274.182h95.042v-80.209    c-28.589-1.376-56.418-5.494-82.736-12.241C184.579,210.655,180.44,241.753,179.139,274.182z M136.234,275.182H43.696l0.046-0.542    c4.114-49.032,22.324-95.476,52.659-134.311l0.284-0.364l0.385,0.254c15.844,10.457,33.778,19.638,53.305,27.288l0.408,0.16    l-0.105,0.425c-8.213,33.344-13.067,69.212-14.427,106.608L136.234,275.182z M44.784,274.182h90.486    c1.38-37.134,6.201-72.756,14.333-105.904c-19.276-7.582-37.001-16.653-52.698-26.97    C66.971,179.771,48.958,225.697,44.784,274.182z M275.181,151.112l-0.527-0.028c-24.617-1.321-48.641-4.893-71.406-10.615    l-0.539-0.135l0.191-0.522c17.858-48.684,43.285-81.631,71.597-92.771l0.683-0.269V151.112z M204.032,139.635    c22.379,5.587,45.975,9.093,70.149,10.422V48.245C246.513,59.498,221.635,91.901,204.032,139.635z M317.021,151.111V46.772    l0.683,0.269c28.319,11.144,53.751,44.102,71.609,92.805l0.191,0.522l-0.539,0.135c-22.7,5.699-46.729,9.259-71.418,10.581    L317.021,151.111z M318.021,48.245v101.812c24.245-1.33,47.844-4.824,70.161-10.389C370.579,91.916,345.697,59.5,318.021,48.245z     M429.323,127.464l-0.177-0.488c-3.479-9.624-7.283-18.876-11.305-27.501c-5.737-12.298-12.066-23.679-18.809-33.828l-0.958-1.441    l1.579,0.708c24.287,10.896,46.643,25.518,66.445,43.461l0.494,0.448l-0.569,0.349c-10.958,6.71-23.145,12.799-36.22,18.098    L429.323,127.464z M400.817,66.538c6.415,9.821,12.442,20.751,17.931,32.514c3.966,8.506,7.721,17.62,11.162,27.096    c12.616-5.14,24.393-11.018,35.021-17.48C445.76,91.385,424.2,77.22,400.817,66.538z M162.883,127.451l-0.481-0.194    c-13.081-5.286-25.271-11.369-36.231-18.082l-0.569-0.349l0.495-0.448C145.9,90.434,168.258,75.81,192.55,64.912l1.579-0.708    l-0.958,1.441c-6.75,10.161-13.079,21.542-18.81,33.829c-4.014,8.604-7.816,17.854-11.302,27.49L162.883,127.451z     M127.264,108.671c10.63,6.464,22.411,12.337,35.032,17.464c3.447-9.489,7.201-18.599,11.159-27.084    c5.481-11.752,11.509-22.682,17.931-32.514C168,77.221,146.438,91.388,127.264,108.671z" /></svg>    </div>    <div id="settings" class="button">        <svg viewBox="-0.2 1 24 24">  <path    fill='white'    d="M20,14.5v-2.9l-1.8-0.3c-0.1-0.4-0.3-0.8-0.6-1.4l1.1-1.5l-2.1-2.1l-1.5,1.1c-0.5-0.3-1-0.5-1.4-0.6L13.5,5h-2.9l-0.3,1.8  C9.8,6.9,9.4,7.1,8.9,7.4L7.4,6.3L5.3,8.4l1,1.5c-0.3,0.5-0.4,0.9-0.6,1.4L4,11.5v2.9l1.8,0.3c0.1,0.5,0.3,0.9,0.6,1.4l-1,1.5  l2.1,2.1l1.5-1c0.4,0.2,0.9,0.4,1.4,0.6l0.3,1.8h3l0.3-1.8c0.5-0.1,0.9-0.3,1.4-0.6l1.5,1.1l2.1-2.1l-1.1-1.5c0.3-0.5,0.5-1,0.6-1.4  L20,14.5z M12,16c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S13.7,16,12,16z"/></svg>    </div></div><div id="compass">    <svg id='controls-svg' viewBox="-111 -100 222 200">    <style>        .controls-round {    fill: rgba(0, 0, 0, 0.2);    r: 80;    opacity: 1;    transition: 300ms;}.one {    stroke-width: 5;    stroke:  rgba(0, 0, 0, 1);}.two {    stroke-width: 4;    stroke: lightgray;}.controls-knob-active-area {    fill: transparent;    r: 15;    cursor: pointer;    pointer-events: all;}path.arrow {    fill: transparent;    stroke-linecap: round;    cursor: pointer;    transition: 400ms;    pointer-events: all;}path.arrow:hover {    stroke: darkgray;}.controls-knob-circle {    fill: lightgray;    r: 8;    transition: 300ms;    /*opacity: 0.2;*/    opacity: 1;}.controls-knob-text {    stroke: gray;    pointer-events: none;    fill: none;    stroke-width: 2;    transition: 300ms;    /*opacity: 0.2;*/    opacity: 1;}.track {    fill: none;    stroke-linecap: round;    transition: 300ms;    /*opacity: 0;*/    opacity: 1;}g#controls-globe{    pointer-events: all;    cursor: pointer;}/*svg:hover path.track {*/    /*stroke: lightgray;*/    /*opacity: 1;*//*}*//*svg:hover circle.controls-knob-circle {*/    /*fill: lightgray;*/    /*opacity: 1;*//*}*//*svg:hover path.controls-knob-text {*/    /*stroke: gray;*/    /*opacity: 1;*//*}*//*svg:hover circle#controls-round {*/    /*opacity: 1;*//*}*/    </style>    <circle class="controls-round one"/>    <circle class="controls-round two"/>    <g id="controls-heading" transform="rotate(0)">        <g id="controls-globe" transform="translate(-42.5 -39) scale(0.15)">
<style>
.continents {
	fill: white;
	stroke: black;
	stroke-width: 1;
	stroke-linecap: round;
	stroke-linejoin: round; 
}
</style> 
  <circle r="133.416626" cy="261" cx="283" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="null" stroke-width="0.6875" stroke="#000000" fill="#000000"/>
  <g fill-rule="evenodd" transform="matrix(1.419847,0,0,1.419847,15.32198,-182.2152) ">
   <polyline class="continents" points="191.606 365.541 191.267 366.511 191.144 370.781 190.259 372.746 187.038 373.902 185.647 376.619 185.712 380.586 188.232 382.501 192.032 384.794 196.194 388.875 198.91 392.056 201.068 392.181 201.275 394.522 200.224 396.878 200.617 398.496 200.845 398.676 210.18 396.833 219.178 394.131 227.846 390.499 238.068 384.863 247.126 378.234 247.285 375.548 248.828 371.555 251.658 367.562 253.247 365.197 250.9 363.43 249.644 363.256 246.623 364.576 240.708 365.919 235.872 366.564 231.891 361.948 225.602 362.068 220.95 361.264 215.542 358.999 211.252 359.984 205.355 360.082 203.034 361.19 198.711 359.676 195.851 360.981 193.386 362.99 192.004 364.417 189.792 363.953 186.379 363.654 183.487 361.546 182.946 360.104 183.797 357.584 183.961 355.437 181.973 354.006 178.929 353.176 175.524 353.227 175.131 351.609 176.193 349.602 176.697 346.18 174.688 344.966 172.023 345.897 170.965 347.716 169.014 348.291 166.479 347.435 163.032 344.638 162.655 341.047 163.129 337.797 165.972 333.965 169.722 333.177 172.064 333.493 173.671 334.38 175.283 334.166 177.081 333.227 180.118 333.521 182.995 334.742 185.018 337.757 186.646 340.068 188.436 339.507 187.874 336.639 186.755 334.302 187.265 331.417 188.665 329.05 192.196 326.486 194.327 324.65 194.482 321.239 195.879 317.42 197.631 314.853 198.881 314.488 199.591 312.681 201.33 309.952 202.936 309.2 204.56 310.06 205.798 308.62 208.474 307.125 210.419 306.011 209.68 304.217 206.993 304.637 205.74 304.276 205.553 302.329 203.751 301.815 201.976 303.264 200.018 304.216 199.815 303.327 201.761 301.299 204.959 299.633 206.947 299.424 209.633 298.277 210.49 296.294 209.562 293.771 206.845 290.591 201.952 286.893 199.074 286.585 197.456 286.262 195.824 284.14 190.976 282.07 189.185 282.631 189.208 285.696 189.434 289.649 190.715 291.058 189.661 292.688 189.184 296.127 188.67 299.2 186.672 297.421 185.232 295.112 185.014 292.422 182.671 291.38 179.063 290.541 177.775 288.595 178.09 284.445 180.215 281.157 183.584 277.88 186.606 275.647 187.995 273.844 186.373 272.07 184.23 272.832 181.897 272.139 181.501 269.795 181.289 267.642 179.681 267.669 179.194 270.759 177.755 272.035 176.524 271.154 176.455 267.374 175.537 264.896 173.542 263.842 171.917 261.342 169.233 261.575 167.629 263.053 169.617 264.788 170.016 266.944 172.362 268.711 172.034 271.061 164.781 265.433 160.996 262.082 158.987 259.228 158.971 256.701 158.198 253.322 156.56 252.606 153.531 252.662 152.273 253.403 150.655 253.081 148.873 253.265 148.19 255.09 147.475 256.359 144.051 255.712 141.928 257.172 140.712 259.73 140.013 261.886 138.046 261.575 136.044 259.985 136.788 262.316 139.866 263.701 143.278 264.913 146.164 266.484 147.275 269.503 147.495 272.919 146.312 277.977 144.75 283.217 144.436 287.368 144.484 289.723 145.053 292.213 142.925 294.775 140.987 298.066 139.078 302.404 138.24 307.638 137.613 315.026 138.366 317.707 139.864 322.721 140.974 326.653 142.65 331.319 144.814 333.622 146.629 334.297 144.809 332.171 143.868 329.487 143.31 326.432 142.744 323.753 144.155 323.375 144.902 325.518 146.209 330.717 148.972 336.252 149.735 339.283 149.021 341.278 150.69 343.768 153.925 345.327 158.82 349.752 161.858 350.958 166.556 352.478 171.937 354.727 174.659 356.5 177.188 358.763 179.216 363.23 183.174 364.783 185.709 365.639 188.568 365.248 191.606 365.541"/>
   <polyline class="continents" points="181.506 345.213 183.652 344.264 187.072 345.099 191.02 346.303 194.058 346.596 196.775 347.831 196.072 349.262 192.848 349.692 190.158 347.747 186.896 346.172 181.506 345.213"/>
   <polyline class="continents" points="197.674 348.698 197.535 350.136 199.866 351.017 202.02 351.33 205.767 350.731 203.242 349.309 203.414 348.425 201.96 347.901 197.674 348.698"/>
   <polyline class="continents" points="211.029 296.098 212.297 297.346 214.657 299.274 217.173 301.376 217.915 302.983 213.957 303.071 211.439 300.242 210.517 298.256 211.029 296.098"/>
   <polyline class="continents" points="194.186 281.479 191.852 280.786 188.978 280.29 191.822 278.098 191.96 275.021 190.673 273.074 187.257 272.05 184.913 271.008 182.559 267.977 184.501 266.137 187.211 266.836 190.629 268.586 193.877 270.306 195.163 273.166 196.251 274.035 198.939 275.254 200.601 278.12 199.171 279.744 198.682 282.109 196.547 282.494 194.186 281.479"/>
   <polyline class="continents" points="207.24 278.714 210.48 280.81 211.931 281.524 215.149 280.556 219.053 279.216 215.279 277.854 214.009 275.88 214.326 272.455 214.609 266.531 216.742 264.507 216.707 261.282 213.271 257.919 209.649 255.28 205.311 253.91 201.726 251.638 197.585 251.534 194.38 252.662 192.783 254.677 190.983 254.89 190.819 253.453 188.298 253.483 185.278 254.802 185.824 256.783 184.436 260.225 185.907 262.363 188.762 264.105 189.992 259.762 191.394 258.12 192.346 261.153 194.854 263.632 197.198 264.675 200.833 267.474 203.915 270.311 204.681 275.707 206.851 276.907 207.24 278.714"/>
   <polyline class="continents" points="219.417 263.924 219.832 266.966 220.905 268.588 222.876 269.437 225.371 266.531 226.387 262.895 224.225 261.318 221.895 262.077 220.845 263.519 219.417 263.924"/>
   <polyline class="continents" points="257.423 249.036 258.705 252.085 258.556 255.119 259.297 257.639 261.834 259.221 261.657 261.208 259.532 261.941 258.098 261.81 256.157 262.735 260.112 264.476 259.594 266.097 256.001 266.146 256.387 268.14 257.305 270.619 257.358 273.511 258.996 276.172 260.273 278.683 262.27 280.463 261.384 281.702 261.044 282.977 260.36 285.715 258.233 287.363 254.806 285.264 254.607 283.272 252.592 281.52 252.576 278.994 254.331 277.152 254.141 274.479 250.881 273.629 249.273 273.656 248.187 271.873 248.501 267.722 246.125 263.267 243.775 261.687 243.008 258.845 242.407 254.887 239.508 250.601 238.749 247.382 236.401 246.529 233.904 245.124 232.441 244.25 231.555 245.185 232.837 246.594 230.71 248.242 232.672 248.742 234.861 250.335 237.214 252.641 240.1 254.211 237.24 255.516 236.37 257.337 233.844 256.83 230.798 255.274 228.401 251.339 226.583 249.94 222.458 247.863 219.384 246.29 217.218 243.261 219.689 241.791 224.163 240.995 223.616 239.015 221.815 238.502 221.29 239.586 218.217 239.653 218.743 237.654 216.771 236.807 215.497 235.021 211.885 232.731 206.455 229.04 205.372 229.623 204.352 230.894 202.023 231.653 200.556 230.967 197.869 230.474 194.3 230.728 192.517 231.826 188.77 232.426 185.36 231.939 183.012 231.086 182.65 229.296 179.044 229.184 177.632 230.477 173.876 230.727 170.474 231.504 170.502 233.466 168.718 234.565 164.957 235.004 163.549 236.108 164.099 237.9 162.49 238.841 158.019 239.447 157.688 241.071 157.538 243.075 156.106 243.974 153.63 246.547 151.848 248.372 149.557 250.223 146.695 250.802 147.407 249.721 148.804 247.541 148.42 246.273 146.116 246.323 144.842 244.538 143.728 242.738 145.496 240.752 147.435 239.101 149.047 238.885 150.482 236.158 150.067 233.117 152.213 232.167 155.22 230.687 155.376 227.276 153.736 225.834 152.121 225.324 160.468 222.33 167.484 220.375 174.294 219.055 182.822 218.08 190.406 217.89 199.289 218.473 210.317 220.354 221.098 223.606 228.444 226.775 236.028 230.779 242.436 234.965 248.451 239.478 253.729 244.446 257.274 248.18 257.423 249.036"/>
   <polyline class="continents" points="236.587 260.027 234.981 260.78 235.696 262.369 237.365 264.859 237.915 266.65 238.668 269.331 241.212 271.451 242.977 271.599 242.263 270.009 240.064 268.066 239.881 266.961 242.051 267.857 244.408 269.059 246.555 269.75 246.541 267.949 246.616 267.767 246.692 267.585 246.74 267.386 246.743 267.199 246.751 266.821 246.714 266.455 246.632 266.1 246.571 265.833 246.513 265.682 246.494 265.593 245.057 264.736 240.553 262.843 238.571 261.951 236.587 260.027"/>
   <polyline class="continents" points="263.598 256.088 263.44 258.469 264.194 261.149 263.475 262.607 262.241 262.64 263.328 264.422 265.515 267.235 265.728 271.028 263.766 270.528 262.502 270.732 262.201 275.043 262.43 278.809 261.909 280.618 262.115 283.873 261.056 285.692 260.397 288.026 261.488 291.26 263.331 295.536 263.193 298.614 263.091 304.918 263.884 310.635 265.371 315.299 267.749 320.481 270.837 323.854 274.445 324.693 276.543 321.387 277.967 319.226 279.918 318.345 280.392 312.54 280.449 307.162 280.216 301.64 279.526 295.148 278.064 287.526 276.248 281.018 274.202 275.243 271.648 269.495 269.03 264.394 265.85 259.284 263.598 256.088"/>
  </g>
 </g>        <g id="controls-heading-knob" transform="translate(0 -80)">            <circle class="controls-knob-circle one"/>            <circle class="controls-knob-circle two"/>            <path class="controls-knob-text" d="M-4,6 L-3,-4 L3,4 L4,-6"/>            <circle class="controls-knob-active-area"/>        </g>        <path id='controls-up-button' d="M-20,-35 L0,-63 L20,-35" class="arrow one"/>        <path id='controls-up-button' d="M-20,-35 L0,-63 L20,-35" class="arrow two"/>        <path id='controls-down-button' d="M-20,-35 L0,-63 L20,-35" class="arrow one" transform="rotate(180)"/>        <path id='controls-down-button' d="M-20,-35 L0,-63 L20,-35" class="arrow two" transform="rotate(180)"/>        <path id='controls-left-button' d="M-20,-35 L0,-63 L20,-35" class="arrow one" transform="rotate(270)"/>        <path id='controls-left-button' d="M-20,-35 L0,-63 L20,-35" class="arrow two" transform="rotate(270)"/>        <path id='controls-right-button' d="M-20,-35 L0,-63 L20,-35" class="arrow one" transform="rotate(90)"/>        <path id='controls-right-button' d="M-20,-35 L0,-63 L20,-35" class="arrow two" transform="rotate(90)"/>    </g>    <g id="controls-tilt">        <path d="M-100,-80 L-100,80" class="track one"/>        <path d="M-100,-80 L-100,80" class="track two"/>        <g id="controls-tilt-knob" transform="translate(-100 -80)">            <circle class="controls-knob-circle one"/>            <circle class="controls-knob-circle two"/>            <path class="controls-knob-text" d="M-5,-4 L5,-4 M0,-4 L0,6"/>            <circle class="controls-knob-active-area"/>        </g>    </g>    <g id="controls-range">        <path d="M100,-80 L100,80" class="track one"/>        <path d="M100,-80 L100,80" class="track two"/>        <g id="controls-range-knob" transform="translate(100 0)">            <circle class="controls-knob-circle one"/>            <circle class="controls-knob-circle two"/>            <path class="controls-knob-text" d="M-5,-4 L4,-4 L-4,4 L5,4"/>            <circle class="controls-knob-active-area"/>        </g>    </g></svg></div>    <script>!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){i(1),i(2),i(92),i(94),i(95)},function(t,e){WorldWind={configuration:{gpuCacheSize:25e7},VERSION:"0.0.0",ABSOLUTE:"absolute",AFTER_REDRAW:"afterRedraw",BEFORE_REDRAW:"beforeRedraw",BEGAN:"began",CANCELLED:"cancelled",CHANGED:"changed",CLAMP_TO_GROUND:"clampToGround",EARTH_RADIUS:6371e3,EAST:"east",ENDED:"ended",FAILED:"failed",GREAT_CIRCLE:"greatCircle",LINEAR:"linear",MULTI_POINT:"multiPoint",NORTH:"north",NULL:"null",OFFSET_FRACTION:"fraction",OFFSET_INSET_PIXELS:"insetPixels",OFFSET_PIXELS:"pixels",POINT:"point",POLYLINE:"polyline",POLYGON:"polygon",POSSIBLE:"possible",RECOGNIZED:"recognized",REDRAW_EVENT_TYPE:"WorldWindRedraw",RELATIVE_TO_GLOBE:"relativeToGlobe",RELATIVE_TO_GROUND:"relativeToGround",RELATIVE_TO_SCREEN:"relativeToScreen",RHUMB_LINE:"rhumbLine",SOUTH:"south",WEST:"west"}},function(t,e,i){function n(t,e){var i={};i[e]=t,f.post(f.NAVIGATOR_STATE_CHANGED,i)}function r(t,e,i){function n(){return s}function r(t){return o=s,o!=t&&i(t,e),s=t}var o=t[e],s=o;Object.defineProperty(t,e,{get:n,set:r})}var o=i(3),s=i(82),a=i(87),h=i(49),l=i(57),u=i(59),c=new h(new u,null),d=new l,p=new o("canvas",c);p.addLayer(new a("day.jpg")),p.addLayer(new s("night.png")),p.redraw(),r(p.navigator,"heading",n),r(p.navigator,"tilt",n),r(p.navigator,"range",n);var f=i(91);f.listen(f.SWITCH_GLOBE,function(){p.globe=[d,d=p.globe][0],p.redraw()});var g,E=["up","down","left","right"];f.listen(f.CONTROLS_CHANGED,function(t){function e(){function e(){i[s?"longitude":"latitude"]+=o*r,p.redraw()}var r=.07*p.navigator.range/1e6,o="up"==n||"right"==n?1:-1,s="left"==n||"right"==n;t.value?(clearInterval(g),g=setInterval(e,25)):clearInterval(g)}var i=p.navigator.lookAtLocation,n=t.parameter;E.indexOf(n)>-1?e():(p.navigator[n]=t.value,p.redraw())}),f.listen(f.ROTATE_TO,function(t){})},function(t,e,i){var n,r;n=[i(7),i(63),i(30),i(48),i(49),i(57),i(60),i(61),i(9),i(4),i(23),i(64),i(20),i(31),i(75),i(77),i(54),i(24)],r=function(t,e,i,n,r,o,s,a,h,l,u,c,d,p,f,g,E,m){"use strict";var v=function(o,a){function u(t){E.handleContextLost(t)}function c(t){E.handleContextRestored(t)}function p(t){E.handleRedrawEvent(t)}if(!window.WebGLRenderingContext)throw new t(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","constructor","The specified canvas does not support WebGL."));var f=document.getElementById(o);if(!f)throw new t(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","constructor","The specified canvas name is not in the document."));var g=this.createContext(f);this.drawContext=new e(g),this.eventListeners={},this.redrawRequested=!0,this.redrawRequestId=null,this.canvas=f,this.depthBits=g.getParameter(g.DEPTH_BITS),this.viewport=new d(0,0,g.drawingBufferWidth,g.drawingBufferHeight),this.globe=new r(a||new i),this.layers=[],this.navigator=new l(this),this.verticalExaggeration=1,this.deepPicking=!1,this.subsurfaceMode=!1,this.surfaceOpacity=1,this.frameStatistics=new n,this.goToAnimator=new s(this),this._redrawCallbacks=[],this._orderedRenderingFilters=[function(t){E.declutter(t,1)},function(t){E.declutter(t,2)}],this.pixelScale=1;var E=this;this.canvas.addEventListener("webglcontextlost",u,!1),this.canvas.addEventListener("webglcontextrestored",c,!1),this.canvas.addEventListener(WorldWind.REDRAW_EVENT_TYPE,p,!1),window.addEventListener(WorldWind.REDRAW_EVENT_TYPE,p,!1),this.animationFrameLoop()};return Object.defineProperties(v.prototype,{orderedRenderingFilters:{get:function(){return this._orderedRenderingFilters}},redrawCallbacks:{get:function(){return this._redrawCallbacks}}}),v.prototype.canvasCoordinates=function(t,e){var i=this.canvas.getBoundingClientRect(),n=t-(i.left+this.canvas.clientLeft),r=e-(i.top+this.canvas.clientTop);return new m(n,r)},v.prototype.addEventListener=function(e,i){if(!e)throw new t(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","addEventListener","missingType"));if(!i)throw new t(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","addEventListener","missingListener"));var n=this,r=this.eventListeners[e];r||(r={listeners:[],callback:function(t){t.worldWindow=n;for(var e=0,i=r.listeners.length;e<i;e++)r.listeners[e](t)}},this.eventListeners[e]=r);var o=r.listeners.indexOf(i);o==-1&&(r.listeners.splice(0,0,i),1==r.listeners.length&&this.canvas.addEventListener(e,r.callback,!1))},v.prototype.removeEventListener=function(e,i){if(!e)throw new t(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","removeEventListener","missingType"));if(!i)throw new t(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","removeEventListener","missingListener"));var n=this.eventListeners[e];if(n){var r=n.listeners.indexOf(i);r!=-1&&(n.listeners.splice(r,1),0==n.listeners.length&&this.canvas.removeEventListener(e,n.callback,!1))}},v.prototype.redraw=function(){this.redrawRequested=!0},v.prototype.pick=function(e){if(!e)throw new t(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","pick","missingPoint"));return this.drawContext.currentGlContext.isContextLost()?new c:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.pickPoint=e,this.drawFrame(),this.drawContext.objectsAtPickPoint)},v.prototype.pickTerrain=function(e){if(!e)throw new t(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","pickTerrain","missingPoint"));return this.drawContext.currentGlContext.isContextLost()?new c:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.pickTerrainOnly=!0,this.drawContext.pickPoint=e,this.drawFrame(),this.drawContext.objectsAtPickPoint)},v.prototype.pickShapesInRegion=function(e){if(!e)throw new t(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","pickShapesInRegion","missingRectangle"));return this.drawContext.currentGlContext.isContextLost()?new c:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.regionPicking=!0,this.drawContext.pickRectangle=new d(e.x,this.canvas.height-e.y,e.width,e.height),this.drawFrame(),this.drawContext.objectsAtPickPoint)},v.prototype.createContext=function(t){var e={antialias:!1,stencil:!0},i=t.getContext("webgl",e);i||(i=t.getContext("experimental-webgl",e));var n=i.getContextAttributes();return this.hasStencilBuffer=n.stencil,i},v.prototype.handleContextLost=function(t){h.log(h.LEVEL_INFO,"WebGL context event: "+t.statusMessage),t.preventDefault(),this.drawContext.contextLost(),window.cancelAnimationFrame(this.redrawRequestId)},v.prototype.handleContextRestored=function(t){h.log(h.LEVEL_INFO,"WebGL context event: "+t.statusMessage),this.drawContext.contextRestored(),this.redraw(),this.animationFrameLoop()},v.prototype.handleRedrawEvent=function(t){this.redraw()},v.prototype.animationFrameLoop=function(){function t(){e.animationFrameLoop()}this.redrawIfNeeded();var e=this;this.redrawRequestId=window.requestAnimationFrame(t)},v.prototype.redrawIfNeeded=function(){if(this.resize(),this.redrawRequested)try{this.redrawRequested=!1,this.drawContext.previousRedrawTimestamp=this.drawContext.timestamp,this.callRedrawCallbacks(WorldWind.BEFORE_REDRAW),this.resetDrawContext(),this.drawFrame()}catch(t){h.logMessage(h.LEVEL_SEVERE,"WorldWindow","redrawIfNeeded","Exception occurred during redrawing.\n"+t.toString())}finally{this.callRedrawCallbacks(WorldWind.AFTER_REDRAW),this.drawContext.redrawRequested&&(this.redrawRequested=!0)}},v.prototype.resize=function(){var t=this.drawContext.currentGlContext,e=t.canvas.clientWidth*this.pixelScale,i=t.canvas.clientHeight*this.pixelScale;t.canvas.width==e&&t.canvas.height==i||(t.canvas.width=e,t.canvas.height=i,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),this.viewport=new d(0,0,t.drawingBufferWidth,t.drawingBufferHeight),this.redrawRequested=!0)},v.prototype.resetDrawContext=function(){this.globe.offset=0;var t=this.drawContext;t.reset(),t.globe=this.globe,t.layers=this.layers,t.navigatorState=this.navigator.currentState(),t.verticalExaggeration=this.verticalExaggeration,t.surfaceOpacity=this.surfaceOpacity,t.deepPicking=this.deepPicking,t.frameStatistics=this.frameStatistics,t.pixelScale=this.pixelScale,t.update()},v.prototype.drawFrame=function(){try{this.drawContext.frameStatistics.beginFrame(),this.beginFrame(),this.drawContext.globe.is2D()&&this.drawContext.globe.continuous?this.do2DContiguousRepaint():this.doNormalRepaint()}finally{this.endFrame(),this.drawContext.frameStatistics.endFrame()}},v.prototype.doNormalRepaint=function(){this.createTerrain(),this.clearFrame(),this.deferOrderedRendering=!1,this.drawContext.pickingMode?this.drawContext.makePickFrustum()&&(this.doPick(),this.resolvePick()):(this.doDraw(),this.subsurfaceMode&&this.hasStencilBuffer&&(this.redrawSurface(),this.drawScreenRenderables()))},v.prototype.do2DContiguousRepaint=function(){this.createTerrain2DContiguous(),this.clearFrame(),this.drawContext.pickingMode?this.drawContext.makePickFrustum()&&(this.pick2DContiguous(),this.resolvePick()):this.draw2DContiguous()},v.prototype.resolvePick=function(){this.drawContext.pickTerrainOnly?this.resolveTerrainPick():this.drawContext.regionPicking?this.resolveRegionPick():this.resolveTopPick()},v.prototype.beginFrame=function(){var t=this.drawContext.currentGlContext;t.enable(t.BLEND),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.depthFunc(t.LEQUAL),this.drawContext.pickingMode&&(this.drawContext.makePickFramebuffer(),this.drawContext.bindFramebuffer(this.drawContext.pickFramebuffer))},v.prototype.endFrame=function(){var t=this.drawContext.currentGlContext;t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.blendFunc(t.ONE,t.ZERO),t.depthFunc(t.LESS),t.clearColor(0,0,0,1),this.drawContext.bindFramebuffer(null),this.drawContext.bindProgram(null)},v.prototype.clearFrame=function(){var t=this.drawContext,e=t.currentGlContext;e.clearColor(t.clearColor.red,t.clearColor.green,t.clearColor.blue,t.clearColor.alpha),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},v.prototype.doDraw=function(){this.drawContext.renderShapes=!0,this.subsurfaceMode&&this.hasStencilBuffer?(this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawContext.currentGlContext.clear(this.drawContext.currentGlContext.DEPTH_BUFFER_BIT|this.drawContext.currentGlContext.STENCIL_BUFFER_BIT),this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.ALWAYS,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE),this.drawOrderedRenderables(),this.drawContext.screenCreditController.drawCredits(this.drawContext))):(this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawOrderedRenderables(),this.drawScreenRenderables()),this.drawContext.screenCreditController.drawCredits(this.drawContext))},v.prototype.redrawSurface=function(){this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.EQUAL,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.KEEP,this.drawContext.currentGlContext.KEEP,this.drawContext.currentGlContext.KEEP),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!1),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST)},v.prototype.doPick=function(){this.drawContext.terrain&&this.drawContext.terrain.pick(this.drawContext),this.drawContext.pickTerrainOnly||(this.subsurfaceMode&&this.hasStencilBuffer?(this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawContext.currentGlContext.clear(this.drawContext.currentGlContext.DEPTH_BUFFER_BIT|this.drawContext.currentGlContext.STENCIL_BUFFER_BIT),this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.ALWAYS,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE),this.drawOrderedRenderables(),this.drawContext.terrain.pick(this.drawContext),this.drawScreenRenderables())):(this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawOrderedRenderables(),this.drawScreenRenderables())))},v.prototype.createTerrain=function(){var t=this.drawContext;t.terrain=this.globe.tessellator.tessellate(t),t.frameStatistics.setTerrainTileCount(t.terrain?t.terrain.surfaceGeometry.length:0)},v.prototype.makeCurrent=function(t){var e=this.drawContext;switch(e.globe.offset=t,e.globeStateKey=e.globe.stateKey,t){case-1:e.terrain=this.terrainLeft;break;case 0:e.terrain=this.terrainCenter;break;case 1:e.terrain=this.terrainRight}},v.prototype.createTerrain2DContiguous=function(){var t=this.drawContext;this.terrainCenter=null,t.globe.offset=0,t.globeStateKey=t.globe.stateKey,t.globe.intersectsFrustum(t.navigatorState.frustumInModelCoordinates)&&(this.terrainCenter=t.globe.tessellator.tessellate(t)),this.terrainRight=null,t.globe.offset=1,t.globeStateKey=t.globe.stateKey,t.globe.intersectsFrustum(t.navigatorState.frustumInModelCoordinates)&&(this.terrainRight=t.globe.tessellator.tessellate(t)),this.terrainLeft=null,t.globe.offset=-1,t.globeStateKey=t.globe.stateKey,t.globe.intersectsFrustum(t.navigatorState.frustumInModelCoordinates)&&(this.terrainLeft=t.globe.tessellator.tessellate(t))},v.prototype.draw2DContiguous=function(){var t="";this.terrainCenter&&(t+=" 0 ",this.makeCurrent(0),this.deferOrderedRendering=this.terrainLeft||this.terrainRight,this.doDraw()),this.terrainRight&&(t+=" 1 ",this.makeCurrent(1),this.deferOrderedRendering=this.terrainLeft||this.terrainLeft,this.doDraw()),this.deferOrderedRendering=!1,this.terrainLeft&&(t+=" -1 ",this.makeCurrent(-1),this.doDraw()),this.subsurfaceMode&&this.hasStencilBuffer&&(this.deferOrderedRendering=!0,this.terrainCenter&&(t+=" 0 ",this.makeCurrent(0),this.redrawSurface()),this.terrainRight&&(t+=" 1 ",this.makeCurrent(1),this.redrawSurface()),this.terrainLeft&&(t+=" -1 ",this.makeCurrent(-1),this.redrawSurface())),this.drawScreenRenderables()},v.prototype.pick2DContiguous=function(){this.terrainCenter&&(this.makeCurrent(0),this.deferOrderedRendering=this.terrainLeft||this.terrainRight,this.doPick()),this.terrainRight&&(this.makeCurrent(1),this.deferOrderedRendering=this.terrainLeft||this.terrainLeft,this.doPick()),this.deferOrderedRendering=!1,this.terrainLeft&&(this.makeCurrent(-1),this.doPick())},v.prototype.drawLayers=function(t){var e,i=Date.now(),n=this.drawContext,r=n.layers;n.accumulateOrderedRenderables=t;for(var o=0,s=r.length;o<s;o++)if(e=r[o]){n.currentLayer=e;try{e.render(n)}catch(t){h.log(h.LEVEL_SEVERE,"Error while rendering layer "+e.displayName+".\n"+t.toString())}}var a=Date.now();n.frameStatistics.layerRenderingTime=a-i},v.prototype.addLayer=function(t){this.layers.push(t)},v.prototype.removeLayer=function(t){if(t){for(var e=-1,i=0,n=this.layers.length;i<n;i++)if(this.layers[i]==t){e=i;break}e>=0&&this.layers.splice(e,1)}},v.prototype.insertLayer=function(t,e){e&&this.layers.splice(t,0,e)},v.prototype.drawSurfaceRenderables=function(){var t,e=this.drawContext;for(e.reverseSurfaceRenderables();t=e.popSurfaceRenderable();)try{t.renderSurface(e)}catch(t){h.logMessage(h.LEVEL_WARNING,"WorldWindow","drawSurfaceRenderables","Error while rendering a surface renderable.\n"+t.message)}},v.prototype.drawOrderedRenderables=function(){var t,e=Date.now(),i=this.drawContext;if(i.sortOrderedRenderables(),this._orderedRenderingFilters)for(var n=0;n<this._orderedRenderingFilters.length;n++)this._orderedRenderingFilters[n](this.drawContext);for(i.orderedRenderingMode=!0;t=i.popOrderedRenderable();)try{t.renderOrdered(i)}catch(t){h.logMessage(h.LEVEL_WARNING,"WorldWindow","drawOrderedRenderables","Error while rendering an ordered renderable.\n"+t.message)}i.orderedRenderingMode=!1,i.frameStatistics.orderedRenderingTime=Date.now()-e},v.prototype.drawScreenRenderables=function(){for(var t,e=this.drawContext;t=e.nextScreenRenderable();)try{t.renderOrdered(e)}catch(t){h.logMessage(h.LEVEL_WARNING,"WorldWindow","drawOrderedRenderables","Error while rendering a screen renderable.\n"+t.message)}},v.prototype.resolveTopPick=function(){if(0!=this.drawContext.objectsAtPickPoint.objects.length){var t=this.drawContext.objectsAtPickPoint,e=this.drawContext.readPickColor(this.drawContext.pickPoint),i=null,n=null;if(e){for(var r=0,o=t.objects.length;r<o;r++){var s=t.objects[r];if(s.isTerrain&&(n=s),s.color.equals(e)&&(s.isOnTop=!0,i=s,n))break}this.drawContext.deepPicking||(t.clear(),i&&t.add(i),n&&n!=i&&t.add(n))}else t.clear()}},v.prototype.resolveTerrainPick=function(){for(var t,e=this.drawContext.objectsAtPickPoint,i=0,n=e.objects.length;i<n;i++)if(t=e.objects[i],t.isTerrain){t.isOnTop=!0;break}},v.prototype.resolveRegionPick=function(){if(0!=this.drawContext.objectsAtPickPoint.objects.length)for(var t,e,i=this.drawContext.objectsAtPickPoint,n=this.drawContext.readPickColors(this.drawContext.pickRectangle),r=0,o=i.objects.length;r<o;r++)if(t=i.objects[r]){var s=t.color.toByteString();e=n[s],e?t.isOnTop=!0:t.userObject instanceof f&&(i.objects.splice(r,1),r-=1)}},v.prototype.callRedrawCallbacks=function(t){for(var e=0,i=this._redrawCallbacks.length;e<i;e++)try{this._redrawCallbacks[e](this,t)}catch(t){h.log(h.LEVEL_SEVERE,"Exception calling redraw callback.\n"+t.toString())}},v.prototype.goTo=function(t,e){this.goToAnimator.goTo(t,e)},v.prototype.declutter=function(e,i){if(!i)throw new t(h.logMessage(h.LEVEL_SEVERE,"WorldWindow","declutter","Group ID is null, undefined or 0."));for(var n=[],r=0;r<e.orderedRenderables.length;r++){var o=e.orderedRenderables[r].orderedRenderable;o.declutterGroup===i&&n.push(o)}for(var s=[],a=0;a<n.length;a++){var l=n[a],u=l.screenBounds;u&&u.intersectsRectangles(s)?l.targetVisibility=0:(l.targetVisibility=1,u&&s.push(u))}},v}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(26),i(12),i(6),i(15),i(18),i(9),i(13),i(22),i(5),i(27),i(17),i(28),i(29),i(24),i(16),i(19)],r=function(t,e,i,n,r,o,s,a,h,l,u,c,d,p,f,g,E){"use strict";var m=function(t){function i(t){t.preventDefault()}h.call(this,t),t.addEventListener("mousedown",i),t.addEventListener("touchstart",i),t.addEventListener("contextmenu",i),t.addEventListener("wheel",i),window.PointerEvent&&t.canvas.style.setProperty("touch-action","none"),this.lookAtLocation=new o(30,-110),this.range=1e7,this.enable2DLimits=!0;var n=this;this.primaryDragRecognizer=new e(t,function(t){n.handlePanOrDrag(t)}),this.secondaryDragRecognizer=new e(t,function(t){n.handleSecondaryDrag(t)}),this.secondaryDragRecognizer.button=2,this.panRecognizer=new l(t,function(t){n.handlePanOrDrag(t)}),this.pinchRecognizer=new u(t,function(t){n.handlePinch(t)}),this.rotationRecognizer=new d(t,function(t){n.handleRotation(t)}),this.tiltRecognizer=new p(t,function(t){n.handleTilt(t)}),t.addEventListener("wheel",function(t){n.handleWheelEvent(t)}),this.panRecognizer.recognizeSimultaneouslyWith(this.pinchRecognizer),this.panRecognizer.recognizeSimultaneouslyWith(this.rotationRecognizer),this.pinchRecognizer.recognizeSimultaneouslyWith(this.rotationRecognizer),this.panRecognizer.requireRecognizerToFail(this.tiltRecognizer),this.pinchRecognizer.requireRecognizerToFail(this.tiltRecognizer),this.rotationRecognizer.requireRecognizerToFail(this.tiltRecognizer),this.beginPoint=new f(0,0),this.lastPoint=new f(0,0),this.beginHeading=0,this.beginTilt=0,this.beginRange=0,this.lastRotation=0};return m.prototype=Object.create(h.prototype),m.prototype.currentState=function(){this.applyLimits();var t=this.worldWindow.globe,e=new c(this.lookAtLocation.latitude,this.lookAtLocation.longitude,0),i=a.fromIdentity();return i.multiplyByLookAtModelview(e,this.range,this.heading,this.tilt,this.roll,t),this.currentStateForModelview(i)},m.prototype.handlePanOrDrag=function(t){this.worldWindow.globe.is2D()?this.handlePanOrDrag2D(t):this.handlePanOrDrag3D(t)},m.prototype.handlePanOrDrag3D=function(e){var i=e.state,n=e.translationX,r=e.translationY;if(i==WorldWind.BEGAN)this.lastPoint.set(0,0);else if(i==WorldWind.CHANGED){var o=this.worldWindow.canvas,s=this.worldWindow.globe,a=E.max(s.equatorialRadius,s.polarRadius),h=E.max(1,this.range),l=E.perspectivePixelSize(o.clientWidth,o.clientHeight,h),u=(r-this.lastPoint[1])*l,c=-(n-this.lastPoint[0])*l,d=u/a*t.RADIANS_TO_DEGREES,p=c/a*t.RADIANS_TO_DEGREES,f=Math.sin(this.heading*t.DEGREES_TO_RADIANS),g=Math.cos(this.heading*t.DEGREES_TO_RADIANS);this.lookAtLocation.latitude+=d*g-p*f,this.lookAtLocation.longitude+=d*f+p*g,this.lastPoint.set(n,r),this.applyLimits(),this.worldWindow.redraw()}},m.prototype.handlePanOrDrag2D=function(t){var e=t.state,i=t.clientX,n=t.clientY,r=t.translationX,o=t.translationY;if(e==WorldWind.BEGAN)this.beginPoint.set(i,n),this.lastPoint.set(i,n);else if(e==WorldWind.CHANGED){var s=this.lastPoint[0],h=this.lastPoint[1],l=this.beginPoint[0]+r,u=this.beginPoint[1]+o;this.lastPoint.set(l,u);var c=this.currentState(),d=this.worldWindow.globe,p=c.rayFromScreenPoint(this.worldWindow.canvasCoordinates(s,h)),f=new g(0,0,0),E=new g(0,0,0),m=new g(0,0,0);if(!d.intersectsLine(p,f))return;if(p=c.rayFromScreenPoint(this.worldWindow.canvasCoordinates(l,u)),!d.intersectsLine(p,E))return;var v=a.fromIdentity();if(v.copy(c.modelview),v.multiplyByTranslation(E[0]-f[0],E[1]-f[1],E[2]-f[2]),v.extractEyePoint(p.origin),v.extractForwardVector(p.direction),!d.intersectsLine(p,m))return;var y=v.extractViewingParameters(m,this.roll,d,{});this.lookAtLocation.copy(y.origin),this.range=y.range,this.heading=y.heading,this.tilt=y.tilt,this.roll=y.roll,this.applyLimits(),this.worldWindow.redraw()}},m.prototype.handleSecondaryDrag=function(t){var e=t.state,i=t.translationX,n=t.translationY;if(e==WorldWind.BEGAN)this.beginHeading=this.heading,this.beginTilt=this.tilt;else if(e==WorldWind.CHANGED){var r=180*i/this.worldWindow.canvas.clientWidth,o=90*n/this.worldWindow.canvas.clientHeight;this.heading=this.beginHeading+r,this.tilt=this.beginTilt+o,this.applyLimits(),this.worldWindow.redraw()}},m.prototype.handlePinch=function(t){var e=t.state,i=t.scale;e==WorldWind.BEGAN?this.beginRange=this.range:e==WorldWind.CHANGED&&0!=i&&(this.range=this.beginRange/i,this.applyLimits(),this.worldWindow.redraw())},m.prototype.handleRotation=function(t){var e=t.state,i=t.rotation;e==WorldWind.BEGAN?this.lastRotation=0:e==WorldWind.CHANGED&&(this.heading-=i-this.lastRotation,this.lastRotation=i,this.applyLimits(),this.worldWindow.redraw())},m.prototype.handleTilt=function(t){var e=t.state,i=t.translationY;if(e==WorldWind.BEGAN)this.beginTilt=this.tilt;else if(e==WorldWind.CHANGED){var n=-90*i/this.worldWindow.canvas.clientHeight;this.tilt=this.beginTilt+n,this.applyLimits(),this.worldWindow.redraw()}},m.prototype.handleWheelEvent=function(t){var e;t.deltaMode==WheelEvent.DOM_DELTA_PIXEL?e=t.deltaY:t.deltaMode==WheelEvent.DOM_DELTA_LINE?e=40*t.deltaY:t.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(e=400*t.deltaY);var i=1+e/1e3;this.range*=i,this.applyLimits(),this.worldWindow.redraw()},m.prototype.applyLimits=function(){if(this.lookAtLocation.latitude=E.clamp(this.lookAtLocation.latitude,-90,90),this.lookAtLocation.longitude=t.normalizedDegreesLongitude(this.lookAtLocation.longitude),this.range=E.clamp(this.range,1,Number.MAX_VALUE),this.heading=t.normalizedDegrees(this.heading),this.tilt=E.clamp(this.tilt,0,90),this.roll=t.normalizedDegrees(this.roll),this.worldWindow.globe.is2D()&&this.enable2DLimits){var e=2*Math.PI*this.worldWindow.globe.equatorialRadius;this.range=E.clamp(this.range,1,e),this.tilt=0}},m}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(6)],r=function(t){"use strict";var e=function(e,i){t.call(this,e,i),this.minNumberOfTouches=1,this.maxNumberOfTouches=Number.MAX_VALUE,this.interpretDistance=20};return e.prototype=Object.create(t.prototype),e.prototype.mouseDown=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},e.prototype.touchMove=function(t){this.state==WorldWind.POSSIBLE?this.shouldInterpret()&&(this.shouldRecognize()?this.state=WorldWind.BEGAN:this.state=WorldWind.FAILED):this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CHANGED)},e.prototype.touchEnd=function(t){0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},e.prototype.touchCancel=function(t){0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CANCELLED))},e.prototype.prepareToRecognize=function(){this.translationX=0,this.translationY=0},e.prototype.shouldInterpret=function(){var t=this.translationX,e=this.translationY,i=Math.sqrt(t*t+e*e);return i>this.interpretDistance},e.prototype.shouldRecognize=function(){var t=this.touchCount;return 0!=t&&t>=this.minNumberOfTouches&&t<=this.maxNumberOfTouches},e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(10)],r=function(t,e,i){"use strict";var n=function(i,r){function o(t){s.handleEvent(t)}if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","constructor","missingTarget"));this.target=i,this.enabled=!0,this._state=WorldWind.POSSIBLE,this._nextState=null,this._clientX=0,this._clientY=0,this._clientStartX=0,this._clientStartY=0,this._translationX=0,this._translationY=0,this._translationWeight=.4,this._mouseButtonMask=0,this._touches=[],this._touchCentroidShiftX=0,this._touchCentroidShiftY=0,this._gestureCallbacks=[],this._canRecognizeWith=[],this._requiresFailureOf=[],this._requiredToFailBy=[],r&&this._gestureCallbacks.push(r),n.allRecognizers.push(this);var s=this;window.PointerEvent?(i.addEventListener("pointerdown",o,!1),window.addEventListener("pointermove",o,!1),window.addEventListener("pointercancel",o,!1),window.addEventListener("pointerup",o,!1)):(i.addEventListener("mousedown",o,!1),window.addEventListener("mousemove",o,!1),window.addEventListener("mouseup",o,!1),i.addEventListener("touchstart",o,!1),i.addEventListener("touchmove",o,!1),i.addEventListener("touchend",o,!1),i.addEventListener("touchcancel",o,!1))};return n.allRecognizers=[],Object.defineProperties(n.prototype,{state:{get:function(){return this._state},set:function(t){this.transitionToState(t)}},clientX:{get:function(){return this._clientX},set:function(t){this._clientX=t}},clientY:{get:function(){return this._clientY},set:function(t){this._clientY=t}},translationX:{get:function(){return this._translationX},set:function(t){this._translationX=t,this._clientStartX=this._clientX,this._touchCentroidShiftX=0}},translationY:{get:function(){return this._translationY},set:function(t){this._translationY=t,this._clientStartY=this._clientY,this._touchCentroidShiftY=0}},mouseButtonMask:{get:function(){return this._mouseButtonMask}},touchCount:{get:function(){return this._touches.length}},gestureCallbacks:{get:function(){return this._gestureCallbacks}}}),n.prototype.touch=function(i){if(i<0||i>=this._touches.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","touch","indexOutOfRange"));return this._touches[i]},n.prototype.recognizeSimultaneouslyWith=function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","recognizeSimultaneouslyWith","The specified gesture recognizer is null or undefined."));var n=this._canRecognizeWith.indexOf(i);n==-1&&(this._canRecognizeWith.push(i),i._canRecognizeWith.push(this))},n.prototype.canRecognizeSimultaneouslyWith=function(t){var e=this._canRecognizeWith.indexOf(t);return e!=-1},n.prototype.requireRecognizerToFail=function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","requireRecognizerToFail","The specified gesture recognizer is null or undefined"));var n=this._requiresFailureOf.indexOf(i);n==-1&&(this._requiresFailureOf.push(i),i._requiredToFailBy.push(this))},n.prototype.requiresRecognizerToFail=function(t){var e=this._requiresFailureOf.indexOf(t);return e!=-1},n.prototype.requiredToFailByRecognizer=function(t){var e=this._requiredToFailBy.indexOf(t);return e!=-1},n.prototype.reset=function(){this._state=WorldWind.POSSIBLE,this._nextState=null,this._clientX=0,this._clientY=0,this._clientStartX=0,this._clientStartY=0,this._translationX=0,this._translationY=0,this._mouseButtonMask=0,this._touches=[],this._touchCentroidShiftX=0,this._touchCentroidShiftY=0},n.prototype.prepareToRecognize=function(){},n.prototype.mouseDown=function(t){},n.prototype.mouseMove=function(t){},n.prototype.mouseUp=function(t){},n.prototype.touchStart=function(t){},n.prototype.touchMove=function(t){},n.prototype.touchCancel=function(t){},n.prototype.touchEnd=function(t){},n.prototype.transitionToState=function(t){this._nextState=null,t==WorldWind.FAILED?(this._state=t,this.updateRecognizersWaitingForFailure(),this.resetIfEventsEnded()):t==WorldWind.RECOGNIZED?(this.tryToRecognize(t),this._state==t&&(this.prepareToRecognize(),this.callGestureCallbacks(),this.resetIfEventsEnded())):t==WorldWind.BEGAN?(this.tryToRecognize(t),this._state==t&&(this.prepareToRecognize(),this.callGestureCallbacks())):t==WorldWind.CHANGED?(this._state=t,this.callGestureCallbacks()):t==WorldWind.CANCELLED?(this._state=t,this.callGestureCallbacks(),this.resetIfEventsEnded()):t==WorldWind.ENDED&&(this._state=t,this.callGestureCallbacks(),this.resetIfEventsEnded())},n.prototype.updateRecognizersWaitingForFailure=function(){for(var t=0,e=this._requiredToFailBy.length;t<e;t++){var i=this._requiredToFailBy[t];null!=i._nextState&&i.transitionToState(i._nextState)}},n.prototype.tryToRecognize=function(t){if(n.allRecognizers.some(this.canBePreventedByRecognizer,this))return void this.transitionToState(WorldWind.FAILED);if(n.allRecognizers.some(this.isWaitingForRecognizerToFail,this))return void(this._nextState=t);for(var e=n.allRecognizers.filter(this.canPreventRecognizer,this),i=0,r=e.length;i<r;i++)e[i].transitionToState(WorldWind.FAILED);this._state=t},n.prototype.canPreventRecognizer=function(t){return this!=t&&this.target==t.target&&t.state==WorldWind.POSSIBLE&&(this.requiredToFailByRecognizer(t)||!this.canRecognizeSimultaneouslyWith(t))},n.prototype.canBePreventedByRecognizer=function(t){return this!=t&&this.target==t.target&&t.state==WorldWind.RECOGNIZED&&(this.requiresRecognizerToFail(t)||!this.canRecognizeSimultaneouslyWith(t))},n.prototype.isWaitingForRecognizerToFail=function(t){return this!=t&&this.target==t.target&&t.state==WorldWind.POSSIBLE&&this.requiresRecognizerToFail(t)},n.prototype.callGestureCallbacks=function(){for(var t=0,e=this._gestureCallbacks.length;t<e;t++)this._gestureCallbacks[t](this)},n.prototype.handleEvent=function(t){if(this.enabled&&(!t.defaultPrevented||this.state!=WorldWind.POSSIBLE)){var i,n;try{if("mousedown"==t.type)this.handleMouseDown(t);else if("mousemove"==t.type)this.handleMouseMove(t);else if("mouseup"==t.type)this.handleMouseUp(t);else if("touchstart"==t.type)for(i=0,
n=t.changedTouches.length;i<n;i++)this.handleTouchStart(t.changedTouches.item(i));else if("touchmove"==t.type)for(i=0,n=t.changedTouches.length;i<n;i++)this.handleTouchMove(t.changedTouches.item(i));else if("touchcancel"==t.type)for(i=0,n=t.changedTouches.length;i<n;i++)this.handleTouchCancel(t.changedTouches.item(i));else if("touchend"==t.type)for(i=0,n=t.changedTouches.length;i<n;i++)this.handleTouchEnd(t.changedTouches.item(i));else"pointerdown"==t.type&&"mouse"==t.pointerType?this.handleMouseDown(t):"pointermove"==t.type&&"mouse"==t.pointerType?this.handleMouseMove(t):"pointercancel"==t.type&&"mouse"==t.pointerType||("pointerup"==t.type&&"mouse"==t.pointerType?this.handleMouseUp(t):"pointerdown"==t.type&&"touch"==t.pointerType?this.handleTouchStart(t):"pointermove"==t.type&&"touch"==t.pointerType?this.handleTouchMove(t):"pointercancel"==t.type&&"touch"==t.pointerType?this.handleTouchCancel(t):"pointerup"==t.type&&"touch"==t.pointerType?this.handleTouchEnd(t):e.logMessage(e.LEVEL_INFO,"GestureRecognizer","handleEvent","Unrecognized event type: "+t.type))}catch(t){e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","handleEvent","Error handling event.\n"+t.toString())}}},n.prototype.handleMouseDown=function(t){if(!("mousedown"==t.type&&this._touches.length>0)){var e=1<<t.button;e&0!=this._mouseButtonMask||(0==this._mouseButtonMask&&(this._clientX=t.clientX,this._clientY=t.clientY,this._clientStartX=t.clientX,this._clientStartY=t.clientY,this._translationX=0,this._translationY=0),this._mouseButtonMask|=e,this.mouseDown(t))}},n.prototype.handleMouseMove=function(t){if(0!=this._mouseButtonMask&&(this._clientX!=t.clientX||this._clientY!=t._clientY)){var e=t.clientX-this._clientStartX,i=t.clientY-this._clientStartY,n=this._translationWeight;this._clientX=t.clientX,this._clientY=t.clientY,this._translationX=this._translationX*(1-n)+e*n,this._translationY=this._translationY*(1-n)+i*n,this.mouseMove(t)}},n.prototype.handleMouseUp=function(t){var e=1<<t.button;e&0==this._mouseButtonMask||(this._mouseButtonMask&=~e,this.mouseUp(t),0==this._mouseButtonMask&&this.resetIfEventsEnded())},n.prototype.handleTouchStart=function(t){var e=new i(t.identifier||t.pointerId,t.clientX,t.clientY);this._touches.push(e),1==this._touches.length?(this._clientX=t.clientX,this._clientY=t.clientY,this._clientStartX=t.clientX,this._clientStartY=t.clientY,this._translationX=0,this._translationY=0,this._touchCentroidShiftX=0,this._touchCentroidShiftY=0):this.touchesAddedOrRemoved(),this.touchStart(e)},n.prototype.handleTouchMove=function(t){var e=this.indexOfTouchWithId(t.identifier||t.pointerId);if(e!=-1){var i=this._touches[e];if(i.clientX!=t.clientX||i.clientY!=t.clientY){i.clientX=t.clientX,i.clientY=t.clientY;var n=this.touchCentroid(),r=n.clientX-this._clientStartX+this._touchCentroidShiftX,o=n.clientY-this._clientStartY+this._touchCentroidShiftY,s=this._translationWeight;this._clientX=n.clientX,this._clientY=n.clientY,this._translationX=this._translationX*(1-s)+r*s,this._translationY=this._translationY*(1-s)+o*s,this.touchMove(i)}}},n.prototype.handleTouchCancel=function(t){var e=this.indexOfTouchWithId(t.identifier||t.pointerId);if(e!=-1){var i=this._touches[e];this._touches.splice(e,1),this.touchesAddedOrRemoved(),this.touchCancel(i),this.resetIfEventsEnded()}},n.prototype.handleTouchEnd=function(t){var e=this.indexOfTouchWithId(t.identifier||t.pointerId);if(e!=-1){var i=this._touches[e];this._touches.splice(e,1),this.touchesAddedOrRemoved(),this.touchEnd(i),this.resetIfEventsEnded()}},n.prototype.resetIfEventsEnded=function(){this._state!=WorldWind.POSSIBLE&&0==this._mouseButtonMask&&0==this._touches.length&&this.reset()},n.prototype.touchesAddedOrRemoved=function(){this._touchCentroidShiftX+=this._clientX,this._touchCentroidShiftY+=this._clientY;var t=this.touchCentroid();this._clientX=t.clientX,this._clientY=t.clientY,this._touchCentroidShiftX-=this._clientX,this._touchCentroidShiftY-=this._clientY},n.prototype.touchCentroid=function(){for(var t=0,e=0,i=0,n=this._touches.length;i<n;i++){var r=this._touches[i];t+=r.clientX/n,e+=r.clientY/n}return{clientX:t,clientY:e}},n.prototype.indexOfTouchWithId=function(t){for(var e=0,i=this._touches.length;e<i;e++)if(this._touches[e].identifier==t)return e;return-1},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(8)],r=function(t){"use strict";var e=function(e){t.call(this,"ArgumentError",e);var i;try{throw new Error}catch(t){i=t.stack}this.stack=i};return e.prototype=Object.create(t.prototype),e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n;n=function(){"use strict";var t=function(t,e){this.name=t,this.message=e};return t.prototype.toString=function(){var t=this.name+": "+this.message;return this.stack&&(t+="\n"+this.stack.toString()),t},t}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){"use strict";var t={LEVEL_NONE:0,LEVEL_SEVERE:1,LEVEL_WARNING:2,LEVEL_INFO:3,setLoggingLevel:function(t){e=t},getLoggingLevel:function(){return e},log:function(i,n){n&&i>0&&i<=e&&(i===t.LEVEL_SEVERE?console.error(n):i===t.LEVEL_WARNING?console.warn(n):i===t.LEVEL_INFO?console.info(n):console.log(n))},makeMessage:function(t,e,i){var n=this.messageTable[i]?this.messageTable[i]:i;return t+"."+e+": "+n},logMessage:function(t,e,i,n){var r=this.makeMessage(e,i,n);return this.log(t,r),r},messageTable:{abstractInvocation:"The function called is abstract and must be overridden in a subclass.",indexOutOfRange:"The specified index is out of range.",invalidHeight:"The specified height is zero or negative.",invalidWidth:"The specified width is zero or negative.",invalidSize:"The specified size is zero or negative.",missingAltitudeMode:"The specified altitude mode is null or undefined.",missingAttributeName:"The specified DBase attribute file name is null or undefined.",missingArray:"The specified array is null, undefined or of insufficient length.",missingBoundaries:"The specified boundaries array is null or undefined.",missingBuffer:"The specified buffer descriptor is null or undefined.",missingColor:"The specified color is null or undefined.",missingDc:"The specified draw context is null or undefined.",missingDomElement:"The specified DOM element is null or undefined.",missingEntry:"The specified entry is null or undefined.",missingFont:"The specified font is null or undefined.",missingFrustum:"The specified frustum is null or undefined.",missingFunction:"The specified function is null or undefined.",missingGlContext:"The specified WebGL rendering context is null or undefined.",missingGlobe:"The specified globe is null or undefined.",missingImage:"The specified image is null or undefined.",missingIndices:"The specified indices array is null or undefined.",missingKey:"The specified key is null or undefined.",missingLevel:"The specified level is null or undefined.",missingLine:"The specified line is null or undefined.",missingList:"The specified list is null or undefined.",missingListener:"The specified listener is null or undefined",missingLocation:"The specified location is null or undefined.",missingMatrix:"The specified matrix is null or undefined.",missingNavigatorState:"The specified navigator state is null or undefined.",missingOffset:"The specified offset is null or undefined.",missingPath:"The specified path is null or undefined.",missingPlacename:"The specified place name is null or undefined.",missingPlane:"The specified plane is null or undefined.",missingPoint:"The specified point is null or undefined.",missingPoints:"The specified points array is null or undefined.",missingPosition:"The specified position is null or undefined.",missingPositions:"The specified positions array is null or undefined.",missingProgram:"The specified program is null or undefined.",missingProjection:"The specified projection is null or undefined.",missingRectangle:"The specified rectangle is null or undefined.",missingRenderable:"The specified renderable is null or undefined.",missingResource:"The specified resource is null or undefined.",missingResult:"The specified result variable is null or undefined.",missingResults:"The specified results array is null or undefined.",missingSector:"The specified sector is null or undefined.",missingShapeType:"The specified shape type is null or undefined.",missingSize:"The specified size is null or undefined.",missingText:"The specified text is null or undefined.",missingTexture:"The specified texture is null or undefined.",missingTile:"The specified tile is null or undefined.",missingType:"The specified type is null or undefined.",missingUrl:"The specified URL is null or undefined",missingVector:"The specified vector is null or undefined.",missingVertex:"The specified vertex is null or undefined.",missingViewport:"The specified viewport is null or undefined.",missingWorldWindow:"The specified World Window is null or undefined.",notYetImplemented:"This function is not yet implemented"}},e=1;return t}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,r;n=[],r=function(){"use strict";var t=function(t,e,i){this.identifier=t,this._clientX=e,this._clientY=i,this._clientStartX=e,this._clientStartY=i};return Object.defineProperties(t.prototype,{clientX:{get:function(){return this._clientX},set:function(t){this._clientX=t}},clientY:{get:function(){return this._clientY},set:function(t){this._clientY=t}},translationX:{get:function(){return this._clientX-this._clientStartX},set:function(t){this._clientStartX=this._clientX-t}},translationY:{get:function(){return this._clientY-this._clientStartY},set:function(t){this._clientStartY=this._clientY-t}}}),t}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[],r=function(){"use strict";var t={DEGREES_TO_RADIANS:Math.PI/180,RADIANS_TO_DEGREES:180/Math.PI,TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,normalizedDegrees:function(t){var e=t%360;return e>180?e-360:e<-180?360+e:e},normalizedDegreesLatitude:function(t){var e=t%180;return e>90?180-e:e<-90?-180-e:e},normalizedDegreesLongitude:function(t){var e=t%360;return e>180?e-360:e<-180?360+e:e},normalizedRadians:function(t){var e=t%this.TWO_PI;return e>Math.PI?e-this.TWO_PI:e<-Math.PI?this.TWO_PI+e:e},normalizedRadiansLatitude:function(t){var e=t%Math.PI;return e>this.HALF_PI?Math.PI-e:e<-this.HALF_PI?-Math.PI-e:e},normalizedRadiansLongitude:function(t){var e=t%this.TWO_PI;return e>Math.PI?e-this.TWO_PI:e<-Math.PI?this.TWO_PI+e:e},isValidLatitude:function(t){return t>=-90&&t<=90},isValidLongitude:function(t){return t>=-180&&t<=180},toString:function(t){return t.toString()+"°"},toDecimalDegreesString:function(t){return t.toString()+"°"},toDMSString:function(t){var e,i,n,r,o;return e=t<0?-1:1,i=e*t,n=Math.floor(i),i=60*(i-n),r=Math.floor(i),i=60*(i-r),o=Math.round(i),60==o&&(r++,o=0),60==r&&(n++,r=0),(e==-1?"-":"")+n+"° "+r+"’ "+o+"”"},toDMString:function(t){var e,i,n,r,o,s;return e=t<0?-1:1,i=e*t,n=Math.floor(i),i=60*(i-n),r=Math.floor(i),i=60*(i-r),o=Math.round(i),60==o&&(r++,o=0),60==r&&(n++,r=0),s=0==o?r:r+o/60,(e==-1?"-":"")+n+"° "+s+"’"}};return t}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(13),i(14),i(9)],r=function(t,e,i,n){"use strict";var r=function(e,i,r,o,s,a){if(!(e&&i&&r&&o&&s&&a))throw new t(n.logMessage(n.LEVEL_SEVERE,"Frustum","constructor","missingPlane"));this._left=e,this._right=i,this._bottom=r,this._top=o,this._near=s,this._far=a,this._planes=[this._left,this._right,this._top,this._bottom,this._near,this._far]};return Object.defineProperties(r.prototype,{left:{get:function(){return this._left}},right:{get:function(){return this._right}},bottom:{get:function(){return this._bottom}},top:{get:function(){return this._top}},near:{get:function(){return this._near}},far:{get:function(){return this._far}}}),r.prototype.transformByMatrix=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Frustum","transformByMatrix","missingMatrix"));return this._left.transformByMatrix(e),this._right.transformByMatrix(e),this._bottom.transformByMatrix(e),this._top.transformByMatrix(e),this._near.transformByMatrix(e),this._far.transformByMatrix(e),this},r.prototype.normalize=function(){return this._left.normalize(),this._right.normalize(),this._bottom.normalize(),this._top.normalize(),this._near.normalize(),this._far.normalize(),this},r.unitFrustum=function(){return new r(new i(1,0,0,1),new i(-1,0,0,1),new i(0,1,1,1),new i(0,-1,0,1),new i(0,0,-1,1),new i(0,0,1,1))},r.fromProjectionMatrix=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Frustum","fromProjectionMatrix","missingMatrix"));var o,s,a,h,l,u,c,d,p,f,g;return o=e[12]+e[0],s=e[13]+e[1],a=e[14]+e[2],h=e[15]+e[3],l=Math.sqrt(o*o+s*s+a*a),u=new i(o/l,s/l,a/l,h/l),o=e[12]-e[0],s=e[13]-e[1],a=e[14]-e[2],h=e[15]-e[3],l=Math.sqrt(o*o+s*s+a*a),c=new i(o/l,s/l,a/l,h/l),o=e[12]+e[4],s=e[13]+e[5],a=e[14]+e[6],h=e[15]+e[7],l=Math.sqrt(o*o+s*s+a*a),p=new i(o/l,s/l,a/l,h/l),o=e[12]-e[4],s=e[13]-e[5],a=e[14]-e[6],h=e[15]-e[7],l=Math.sqrt(o*o+s*s+a*a),d=new i(o/l,s/l,a/l,h/l),o=e[12]+e[8],s=e[13]+e[9],a=e[14]+e[10],h=e[15]+e[11],l=Math.sqrt(o*o+s*s+a*a),f=new i(o/l,s/l,a/l,h/l),o=e[12]-e[8],s=e[13]-e[9],a=e[14]-e[10],h=e[15]-e[11],l=Math.sqrt(o*o+s*s+a*a),g=new i(o/l,s/l,a/l,h/l),new r(u,c,p,d,f,g)},r.prototype.containsPoint=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Frustum","containsPoint","missingPoint"));return!(this._far.dot(e)<=0)&&(!(this._left.dot(e)<=0)&&(!(this._right.dot(e)<=0)&&(!(this._top.dot(e)<=0)&&(!(this._bottom.dot(e)<=0)&&!(this._near.dot(e)<=0)))))},r.prototype.intersectsSegment=function(e,i){if(!e||!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Frustum","containsPoint","missingPoint"));if(this.containsPoint(e)||this.containsPoint(i))return!0;if(e.equals(i))return!1;for(var r=0,o=this._planes.length;r<o;r++){if(this._planes[r].onSameSide(e,i)<0)return!1;if(null!=this._planes[r].clip(e,i))return!0}return!1},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(7),i(9),i(14),i(17),i(20),i(21),i(16),i(19)],r=function(t,e,i,n,r,o,s,a,h){"use strict";var l=function(t,e,i,n,r,o,s,a,h,l,u,c,d,p,f,g){this[0]=t,this[1]=e,this[2]=i,this[3]=n,this[4]=r,this[5]=o,this[6]=s,this[7]=a,this[8]=h,this[9]=l,this[10]=u,this[11]=c,this[12]=d,this[13]=p,this[14]=f,this[15]=g};return l.prototype=new Float64Array(16),l.fromIdentity=function(){return new l(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},l.principalAxesFromPoints=function(t,n,r,o){if(!t||t.length<1)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","principalAxesFromPoints","missingPoints"));if(!n||!r||!o)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","principalAxesFromPoints","An axis argument is null or undefined."));var s=l.fromIdentity();s.setToCovarianceOfPoints(t),s.eigensystemFromSymmetricMatrix(n,r,o),n.normalize(),r.normalize(),o.normalize()},l.prototype.set=function(t,e,i,n,r,o,s,a,h,l,u,c,d,p,f,g){return this[0]=t,this[1]=e,this[2]=i,this[3]=n,this[4]=r,this[5]=o,this[6]=s,this[7]=a,this[8]=h,this[9]=l,this[10]=u,this[11]=c,this[12]=d,this[13]=p,this[14]=f,this[15]=g,this},l.prototype.setToIdentity=function(){this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1},l.prototype.copy=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","copy","missingMatrix"));this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15]},l.prototype.equals=function(t){return t&&this[0]==t[0]&&this[1]==t[1]&&this[2]==t[2]&&this[3]==t[3]&&this[4]==t[4]&&this[5]==t[5]&&this[6]==t[6]&&this[7]==t[7]&&this[8]==t[8]&&this[9]==t[9]&&this[10]==t[10]&&this[11]==t[11]&&this[12]==t[12]&&this[13]==t[13]&&this[14]==t[14]&&this[15]==t[15]},l.prototype.columnMajorComponents=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","columnMajorComponents","missingResult"));return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t},l.prototype.setToTranslation=function(t,e,i){return this[0]=1,this[1]=0,this[2]=0,this[3]=t,this[4]=0,this[5]=1,this[6]=0,this[7]=e,this[8]=0,this[9]=0,this[10]=1,this[11]=i,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.setTranslation=function(t,e,i){return this[3]=t,this[7]=e,this[11]=i,this},l.prototype.setToScale=function(t,e,i){return this[0]=t,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=e,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=i,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.setScale=function(t,e,i){return this[0]=t,this[5]=e,this[10]=i,this},l.prototype.setToTransposeOfMatrix=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","setToTransposeOfMatrix","missingMatrix"));return this[0]=t[0],this[1]=t[4],this[2]=t[8],this[3]=t[12],this[4]=t[1],this[5]=t[5],this[6]=t[9],this[7]=t[13],this[8]=t[2],this[9]=t[6],this[10]=t[10],this[11]=t[14],this[12]=t[3],this[13]=t[7],this[14]=t[11],this[15]=t[15],this},l.prototype.setToMultiply=function(t,n){if(!t||!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","setToMultiply","missingMatrix"));var r=t,o=n;return this[0]=r[0]*o[0]+r[1]*o[4]+r[2]*o[8]+r[3]*o[12],this[1]=r[0]*o[1]+r[1]*o[5]+r[2]*o[9]+r[3]*o[13],this[2]=r[0]*o[2]+r[1]*o[6]+r[2]*o[10]+r[3]*o[14],this[3]=r[0]*o[3]+r[1]*o[7]+r[2]*o[11]+r[3]*o[15],this[4]=r[4]*o[0]+r[5]*o[4]+r[6]*o[8]+r[7]*o[12],this[5]=r[4]*o[1]+r[5]*o[5]+r[6]*o[9]+r[7]*o[13],this[6]=r[4]*o[2]+r[5]*o[6]+r[6]*o[10]+r[7]*o[14],this[7]=r[4]*o[3]+r[5]*o[7]+r[6]*o[11]+r[7]*o[15],this[8]=r[8]*o[0]+r[9]*o[4]+r[10]*o[8]+r[11]*o[12],this[9]=r[8]*o[1]+r[9]*o[5]+r[10]*o[9]+r[11]*o[13],this[10]=r[8]*o[2]+r[9]*o[6]+r[10]*o[10]+r[11]*o[14],this[11]=r[8]*o[3]+r[9]*o[7]+r[10]*o[11]+r[11]*o[15],this[12]=r[12]*o[0]+r[13]*o[4]+r[14]*o[8]+r[15]*o[12],this[13]=r[12]*o[1]+r[13]*o[5]+r[14]*o[9]+r[15]*o[13],this[14]=r[12]*o[2]+r[13]*o[6]+r[14]*o[10]+r[15]*o[14],this[15]=r[12]*o[3]+r[13]*o[7]+r[14]*o[11]+r[15]*o[15],this},l.prototype.setToCovarianceOfPoints=function(t){if(!t||t.length<1)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","setToCovarianceOfPoints","missingArray"));var n,r,o,s,h=0,l=0,u=0,c=0,d=0,p=0,f=0,g=new a(0,0,0);n=a.averageOfBuffer(t,new a(0,0,0));for(var E=0,m=t.length/3;E<m;E++)g[0]=t[3*E],g[1]=t[3*E+1],g[2]=t[3*E+2],r=g[0]-n[0],o=g[1]-n[1],s=g[2]-n[2],++h,l+=r*r,u+=o*o,c+=s*s,d+=r*o,p+=r*s,f+=o*s;return this[0]=l/h,this[1]=d/h,this[2]=p/h,this[3]=0,this[4]=d/h,this[5]=u/h,this[6]=f/h,this[7]=0,this[8]=p/h,this[9]=f/h,this[10]=c/h,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=0,this},l.prototype.multiplyByTranslation=function(t,e,i){return this.multiply(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},l.prototype.multiplyByRotation=function(e,i,n,r){var o=Math.cos(r*t.DEGREES_TO_RADIANS),s=Math.sin(r*t.DEGREES_TO_RADIANS);return this.multiply(o+(1-o)*e*e,(1-o)*e*i-s*n,(1-o)*e*n+s*i,0,(1-o)*e*i+s*n,o+(1-o)*i*i,(1-o)*i*n-s*e,0,(1-o)*e*n-s*i,(1-o)*i*n+s*e,o+(1-o)*n*n,0,0,0,0,1),this},l.prototype.multiplyByScale=function(t,e,i){return this.multiply(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},l.prototype.setToUnitYFlip=function(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=-1,this[6]=0,this[7]=1,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.multiplyByLocalCoordinateTransform=function(t,n){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","multiplyByLocalCoordinateTransform","Origin vector is null or undefined"));if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","multiplyByLocalCoordinateTransform","missingGlobe"));var r=new a(0,0,0),o=new a(0,0,0),s=new a(0,0,0);return h.localCoordinateAxesAtPoint(t,n,r,o,s),this.multiply(r[0],o[0],s[0],t[0],r[1],o[1],s[1],t[1],r[2],o[2],s[2],t[2],0,0,0,1),this},l.prototype.multiplyByTextureTransform=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","multiplyByTextureTransform","missingTexture"));var n=t.originalImageWidth/t.imageWidth,r=t.originalImageHeight/t.imageHeight;return this.multiply(n,0,0,0,0,-r,0,r,0,0,1,0,0,0,0,1),this},l.prototype.extractTranslation=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","extractTranslation","missingResult"));return t[0]=this[3],t[1]=this[7],t[2]=this[11],t},l.prototype.extractRotationAngles=function(n){if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","extractRotationAngles","missingResult"));var r=Math.atan2(this[6],this[10]),o=Math.atan2(-this[2],Math.sqrt(this[0]*this[0]+this[1]*this[1])),s=Math.cos(r),a=Math.sin(r),h=Math.atan2(a*this[8]-s*this[4],s*this[5]-a*this[9]);return n[0]=r*t.RADIANS_TO_DEGREES,n[1]=o*t.RADIANS_TO_DEGREES,n[2]=h*t.RADIANS_TO_DEGREES,n},l.prototype.multiplyByFirstPersonModelview=function(n,r,o,s,l){if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","multiplyByFirstPersonModelview","missingPosition"));if(!l)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","multiplyByFirstPersonModelview","missingGlobe"));var u,c,d,p,f,g,E,m,v,y,L,w,S,R,T=new a(0,0,0),_=new a(0,0,0),x=new a(0,0,0),M=new a(0,0,0);return u=Math.cos(s*t.DEGREES_TO_RADIANS),c=Math.sin(s*t.DEGREES_TO_RADIANS),this.multiply(u,c,0,0,-c,u,0,0,0,0,1,0,0,0,0,1),u=Math.cos(o*t.DEGREES_TO_RADIANS),c=Math.sin(o*t.DEGREES_TO_RADIANS),this.multiply(1,0,0,0,0,u,c,0,0,-c,u,0,0,0,0,1),u=Math.cos(r*t.DEGREES_TO_RADIANS),c=Math.sin(r*t.DEGREES_TO_RADIANS),this.multiply(u,-c,0,0,c,u,0,0,0,0,1,0,0,0,0,1),l.computePointFromPosition(n.latitude,n.longitude,n.altitude,T),d=T[0],p=T[1],f=T[2],h.localCoordinateAxesAtPoint(T,l,_,x,M),g=_[0],E=_[1],m=_[2],v=x[0],y=x[1],L=x[2],w=M[0],S=M[1],R=M[2],this.multiply(g,E,m,-g*d-E*p-m*f,v,y,L,-v*d-y*p-L*f,w,S,R,-w*d-S*p-R*f,0,0,0,1),this},l.prototype.multiplyByLookAtModelview=function(t,n,r,o,s,a){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","multiplyByLookAtModelview","missingPosition"));if(n<0)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","multiplyByLookAtModelview","Range is less than zero"));if(!a)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","multiplyByLookAtModelview","missingGlobe"));return this.multiplyByTranslation(0,0,-n),this.multiplyByFirstPersonModelview(t,r,o,s,a),this},l.prototype.setToPerspectiveProjection=function(t,n,r,o){if(t<=0)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","invalidWidth"));if(n<=0)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","invalidHeight"));if(r===o)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","Near and far distance are the same."));if(r<=0||o<=0)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","Near or far distance is less than or equal to zero."));var s=h.perspectiveFrustumRectangle(t,n,r),a=s.getMinX(),l=s.getMaxX(),u=s.getMinY(),c=s.getMaxY();return this[0]=2*r/(l-a),this[1]=0,this[2]=(l+a)/(l-a),this[3]=0,this[4]=0,this[5]=2*r/(c-u),this[6]=(c+u)/(c-u),this[7]=0,this[8]=0,this[9]=0,this[10]=-(o+r)/(o-r),this[11]=-2*r*o/(o-r),this[12]=0,this[13]=0,this[14]=-1,this[15]=0,this},l.prototype.setToScreenProjection=function(t,n){if(t<=0)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","setToScreenProjection","invalidWidth"));if(n<=0)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","setToScreenProjection","invalidHeight"));return this[0]=2/t,this[1]=0,this[2]=0,this[3]=-1,this[4]=0,this[5]=2/n,this[6]=0,this[7]=-1,this[8]=0,this[9]=0,this[10]=2,this[11]=-1,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.extractEyePoint=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","extractEyePoint","missingResult"));return t[0]=-(this[0]*this[3])-this[4]*this[7]-this[8]*this[11],t[1]=-(this[1]*this[3])-this[5]*this[7]-this[9]*this[11],t[2]=-(this[2]*this[3])-this[6]*this[7]-this[10]*this[11],t},l.prototype.extractForwardVector=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","extractForwardVector","missingResult"));return t[0]=-this[8],t[1]=-this[9],t[2]=-this[10],t},l.prototype.extractViewingParameters=function(n,o,s,a){if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","extractViewingParameters","The specified origin is null or undefined."));if(!s)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","extractViewingParameters","missingGlobe"));if(!a)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","extractViewingParameters","missingResult"));var h,u,c,d,p,f,g,E,m,v=new r(0,0,0),y=l.fromIdentity();return s.computePositionFromPoint(n[0],n[1],n[2],v),y.copy(this),y.multiplyByLocalCoordinateTransform(n,s),h=-y[11],u=y[10],c=Math.sqrt(y[2]*y[2]+y[6]*y[6]),d=Math.atan2(c,u)*t.RADIANS_TO_DEGREES,p=Math.cos(o*t.DEGREES_TO_RADIANS),f=Math.sin(o*t.DEGREES_TO_RADIANS),g=p*y[0]-f*y[4],E=f*y[5]-p*y[1],m=Math.atan2(E,g)*t.RADIANS_TO_DEGREES,a.origin=v,a.range=h,a.heading=m,a.tilt=d,a.roll=o,a},l.prototype.offsetProjectionDepth=function(t){return this[10]*=1+t,this},l.prototype.multiplyMatrix=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","multiplyMatrix","missingMatrix"));var n,r,o,s,a=this,h=t;return n=a[0],r=a[1],o=a[2],s=a[3],a[0]=n*h[0]+r*h[4]+o*h[8]+s*h[12],a[1]=n*h[1]+r*h[5]+o*h[9]+s*h[13],a[2]=n*h[2]+r*h[6]+o*h[10]+s*h[14],a[3]=n*h[3]+r*h[7]+o*h[11]+s*h[15],n=a[4],r=a[5],o=a[6],s=a[7],a[4]=n*h[0]+r*h[4]+o*h[8]+s*h[12],a[5]=n*h[1]+r*h[5]+o*h[9]+s*h[13],a[6]=n*h[2]+r*h[6]+o*h[10]+s*h[14],a[7]=n*h[3]+r*h[7]+o*h[11]+s*h[15],n=a[8],r=a[9],o=a[10],s=a[11],a[8]=n*h[0]+r*h[4]+o*h[8]+s*h[12],a[9]=n*h[1]+r*h[5]+o*h[9]+s*h[13],a[10]=n*h[2]+r*h[6]+o*h[10]+s*h[14],a[11]=n*h[3]+r*h[7]+o*h[11]+s*h[15],n=a[12],r=a[13],o=a[14],s=a[15],a[12]=n*h[0]+r*h[4]+o*h[8]+s*h[12],a[13]=n*h[1]+r*h[5]+o*h[9]+s*h[13],a[14]=n*h[2]+r*h[6]+o*h[10]+s*h[14],a[15]=n*h[3]+r*h[7]+o*h[11]+s*h[15],this},l.prototype.multiply=function(t,e,i,n,r,o,s,a,h,l,u,c,d,p,f,g){var E,m,v,y,L=this;return E=L[0],m=L[1],v=L[2],y=L[3],L[0]=E*t+m*r+v*h+y*d,L[1]=E*e+m*o+v*l+y*p,L[2]=E*i+m*s+v*u+y*f,L[3]=E*n+m*a+v*c+y*g,E=L[4],m=L[5],v=L[6],y=L[7],L[4]=E*t+m*r+v*h+y*d,L[5]=E*e+m*o+v*l+y*p,L[6]=E*i+m*s+v*u+y*f,L[7]=E*n+m*a+v*c+y*g,E=L[8],m=L[9],v=L[10],y=L[11],L[8]=E*t+m*r+v*h+y*d,L[9]=E*e+m*o+v*l+y*p,L[10]=E*i+m*s+v*u+y*f,L[11]=E*n+m*a+v*c+y*g,E=L[12],m=L[13],v=L[14],y=L[15],L[12]=E*t+m*r+v*h+y*d,L[13]=E*e+m*o+v*l+y*p,L[14]=E*i+m*s+v*u+y*f,L[15]=E*n+m*a+v*c+y*g,this},l.prototype.invertMatrix=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","invertMatrix","missingMatrix"));var n=[[],[],[],[]];n[0][0]=t[0],n[0][1]=t[1],n[0][2]=t[2],n[0][3]=t[3],n[1][0]=t[4],n[1][1]=t[5],n[1][2]=t[6],n[1][3]=t[7],n[2][0]=t[8],n[2][1]=t[9],n[2][2]=t[10],n[2][3]=t[11],n[3][0]=t[12],n[3][1]=t[13],n[3][2]=t[14],n[3][3]=t[15];var r,o,s=[],a=l.ludcmp(n,s);for(r=0;r<4;r+=1)a*=n[r][r];if(Math.abs(a)<1e-8)return null;var h=[[],[],[],[]],u=[];for(o=0;o<4;o+=1){for(r=0;r<4;r+=1)u[r]=0;for(u[o]=1,l.lubksb(n,s,u),r=0;r<4;r+=1)h[r][o]=u[r]}return this[0]=h[0][0],this[1]=h[0][1],this[2]=h[0][2],this[3]=h[0][3],this[4]=h[1][0],this[5]=h[1][1],this[6]=h[1][2],this[7]=h[1][3],this[8]=h[2][0],this[9]=h[2][1],this[10]=h[2][2],this[11]=h[2][3],this[12]=h[3][0],this[13]=h[3][1],this[14]=h[3][2],this[15]=h[3][3],this},l.lubksb=function(t,e,i){var n,r,o,s=-1;for(n=0;n<4;n+=1){var a=e[n];if(o=i[a],i[a]=i[n],s!=-1)for(r=s;r<=n-1;r+=1)o-=t[n][r]*i[r];else 0!=o&&(s=n);i[n]=o}for(n=3;n>=0;n-=1){for(o=i[n],r=n+1;r<4;r+=1)o-=t[n][r]*i[r];i[n]=o/t[n][n]}},l.ludcmp=function(t,e){var i,n,r,o,s,a,h,l,u=1e-20,c=[],d=1;for(n=0;n<4;n+=1){for(s=0,r=0;r<4;r+=1)(i=Math.abs(t[n][r]))>s&&(s=i);if(0==s)return 0;c[n]=1/s}for(r=0;r<4;r+=1){for(n=0;n<r;n+=1){for(a=t[n][r],o=0;o<n;o+=1)a-=t[n][o]*t[o][r];t[n][r]=a}for(s=0,h=-1,n=r;n<4;n+=1){for(a=t[n][r],o=0;o<r;o++)a-=t[n][o]*t[o][r];t[n][r]=a,(l=c[n]*Math.abs(a))>=s&&(s=l,h=n)}if(r!=h){for(o=0;o<4;o+=1)l=t[h][o],t[h][o]=t[r][o],t[r][o]=l;d=-d,c[h]=c[r]}if(e[r]=h,0==t[r][r]&&(t[r][r]=u),3!=r)for(l=1/t[r][r],n=r+1;n<4;n+=1)t[n][r]*=l}return d},l.prototype.invertOrthonormalMatrix=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","invertOrthonormalMatrix","missingMatrix"));var n=t;return this[0]=n[0],this[1]=n[4],this[2]=n[8],this[3]=0-n[0]*n[3]-n[4]*n[7]-n[8]*n[11],this[4]=n[1],this[5]=n[5],this[6]=n[9],this[7]=0-n[1]*n[3]-n[5]*n[7]-n[9]*n[11],this[8]=n[2],this[9]=n[6],this[10]=n[10],this[11]=0-n[2]*n[3]-n[6]*n[7]-n[10]*n[11],this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.eigensystemFromSymmetricMatrix=function(t,n,r){if(!t||!n||!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","eigensystemFromSymmetricMatrix","missingResult"));if(this[1]!=this[4]||this[2]!=this[8]||this[6]!=this[9])throw new e(i.logMessage(i.LEVEL_SEVERE,"Matrix","eigensystemFromSymmetricMatrix","Matrix is not symmetric"));for(var o,s,a,l,u,c,d,p,f,g,E,m=1e-10,v=this[0],y=this[1],L=this[2],w=this[5],S=this[6],R=this[10],T=[[1,0,0],[0,1,0],[0,0,1]],_=32,x=0;x<_&&!(h.fabs(y)<m&&h.fabs(L)<m&&h.fabs(S)<m);x++){if(0!=y)for(o=.5*(w-v)/y,s=o*o,a=s+1,l=a!=s?(o<0?-1:1)*(Math.sqrt(a)-h.fabs(o)):.5/o,u=1/Math.sqrt(l*l+1),c=u*l,v-=l*y,w+=l*y,y=0,d=u*L-c*S,S=c*L+u*S,L=d,p=0;p<3;p++)d=u*T[p][0]-c*T[p][1],T[p][1]=c*T[p][0]+u*T[p][1],T[p][0]=d;if(0!=L)for(o=.5*(R-v)/L,s=o*o,a=s+1,l=a!=s?(o<0?-1:1)*(Math.sqrt(a)-h.fabs(o)):.5/o,u=1/Math.sqrt(l*l+1),c=u*l,v-=l*L,R+=l*L,L=0,d=u*y-c*S,S=c*y+u*S,y=d,p=0;p<3;p++)d=u*T[p][0]-c*T[p][2],T[p][2]=c*T[p][0]+u*T[p][2],T[p][0]=d;if(0!=S)for(o=.5*(R-w)/S,s=o*o,a=s+1,l=a!=s?(o<0?-1:1)*(Math.sqrt(a)-h.fabs(o)):.5/o,u=1/Math.sqrt(l*l+1),c=u*l,w-=l*S,R+=l*S,S=0,d=u*y-c*L,L=c*y+u*L,y=d,p=0;p<3;p++)d=u*T[p][1]-c*T[p][2],T[p][2]=c*T[p][1]+u*T[p][2],T[p][1]=d}f=0,g=1,E=2,v<w&&(d=v,v=w,w=d,d=f,f=g,g=d),w<R&&(d=w,w=R,R=d,d=g,g=E,E=d),v<w&&(d=v,v=w,w=d,d=f,f=g,g=d),t[0]=T[0][f],t[1]=T[1][f],t[2]=T[2][f],n[0]=T[0][g],n[1]=T[1][g],n[2]=T[2][g],r[0]=T[0][E],r[1]=T[1][E],r[2]=T[2][E],t.normalize(),n.normalize(),r.normalize(),t.multiply(v),n.multiply(w),r.multiply(R)},l.prototype.upper3By3=function(){var t=l.fromIdentity();return t[0]=this[0],t[1]=this[1],t[2]=this[2],t[4]=this[4],t[5]=this[5],t[6]=this[6],t[8]=this[8],t[9]=this[9],t[10]=this[10],t},l}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(15),i(9),i(16)],r=function(t,e,i,n){"use strict";var r=function(t,e,i,r){this.normal=new n(t,e,i),this.distance=r};return r.fromPoints=function(e,o,s){if(!e||!o||!s)throw new t(i.logMessage(i.LEVEL_SEVERE,"Plane","fromPoints","missingVector"));var a=new n(o[0],o[1],o[2]);a.subtract(e);var h=new n(s[0],s[1],s[2]);h.subtract(e),a.cross(h),a.normalize();var l=-a.dot(e);return new r(a[0],a[1],a[2],l)},r.prototype.dot=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Plane","dot","missingVector"));return this.normal.dot(e)+this.distance},r.prototype.distanceToPoint=function(t){return this.dot(t)},r.prototype.transformByMatrix=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Plane","transformByMatrix","missingMatrix"));var n=e[0]*this.normal[0]+e[1]*this.normal[1]+e[2]*this.normal[2]+e[3]*this.distance,r=e[4]*this.normal[0]+e[5]*this.normal[1]+e[6]*this.normal[2]+e[7]*this.distance,o=e[8]*this.normal[0]+e[9]*this.normal[1]+e[10]*this.normal[2]+e[11]*this.distance,s=e[12]*this.normal[0]+e[13]*this.normal[1]+e[14]*this.normal[2]+e[15]*this.distance;return this.normal[0]=n,this.normal[1]=r,this.normal[2]=o,this.distance=s,this},r.prototype.normalize=function(){var t=this.normal.magnitude();return 0===t?this:(this.normal.divide(t),this.distance/=t,this)},r.prototype.intersectsSegment=function(t,e){var i=this.dot(t),n=this.dot(e);return i*n<=0},r.prototype.intersectsSegmentAt=function(t,e,i){var n=this.dot(t),r=this.dot(e);if(0===n&&0===r)return i[0]=t[0],i[1]=t[1],i[2]=t[2],!0;if(n===r)return!1;var o=-n/(r-n),s=1-o;return i[0]=o*t[0]+s*e[0],i[1]=o*t[1]+s*e[1],i[2]=o*t[2]+s*e[2],n*r<=0},r.prototype.onSameSide=function(e,n){if(!e||!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"Plane","onSameSide","missingPoint"));
var r=this.distanceToPoint(e),o=this.distanceToPoint(n);return r<0&&o<0?-1:r>0&&o>0?1:0},r.prototype.clip=function(r,o){if(!r||!o)throw new t(i.logMessage(i.LEVEL_SEVERE,"Plane","clip","missingPoint"));if(r.equals(o))return null;var s,a,h,l=e.fromSegment(r,o),u=this.normal.dot(l.direction);return 0===u?(s=this.dot(l.origin),0===s?[r,o]:null):(a=-this.dot(l.origin)/u,a<0||a>1?null:(h=l.pointAt(a,new n(0,0,0)),u>0?[h,o]:[r,h]))},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(16)],r=function(t,e,i){"use strict";var n=function(i,n){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"Line","constructor","Origin is null or undefined."));if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Line","constructor","Direction is null or undefined."));this.origin=i,this.direction=n};return n.fromSegment=function(r,o){if(!r||!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"Line","fromSegment","missingPoint"));var s=new i(r[0],r[1],r[2]),a=new i(o[0]-r[0],o[1]-r[1],o[2]-r[2]);return new n(s,a)},n.prototype.pointAt=function(i,n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Line","pointAt","missingResult."));return n[0]=this.origin[0]+this.direction[0]*i,n[1]=this.origin[1]+this.direction[1]*i,n[2]=this.origin[2]+this.direction[2]*i,n},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(9),i(7)],r=function(t,e){"use strict";var i=function(t,e,i){this[0]=t,this[1]=e,this[2]=i};return i.prototype=new Float64Array(3),i.ZERO=new i(0,0,0),i.average=function(i,n){if(!i||i.length<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","average","missingArray"));if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","average","missingResult"));var r,o=i.length;n[0]=0,n[1]=0,n[2]=0;for(var s=0,a=i.length;s<a;s++)r=i[s],n[0]+=r[0]/o,n[1]+=r[1]/o,n[2]+=r[2]/o;return n},i.averageOfBuffer=function(i,n){if(!i||i.length<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","averageBuffer","missingArray"));if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","averageBuffer","missingResult"));var r=i.length/3;n[0]=0,n[1]=0,n[2]=0;for(var o=0;o<r;o++)n[0]+=i[3*o]/r,n[1]+=i[3*o+1]/r,n[2]+=i[3*o+2]/r;return n},i.areColinear=function(n,r,o){if(!n||!r||!o)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","areColinear","missingVector"));var s=new i(n[0]-r[0],n[1]-r[1],n[2]-r[2]).normalize(),a=new i(o[0]-r[0],o[1]-r[1],o[2]-r[2]).normalize();return Math.abs(s.dot(a))>.999},i.computeTriangleNormal=function(n,r,o){if(!n||!r||!o)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","areColinear","missingVector"));var s=(r[1]-n[1])*(o[2]-n[2])-(r[2]-n[2])*(o[1]-n[1]),a=(r[2]-n[2])*(o[0]-n[0])-(r[0]-n[0])*(o[2]-n[2]),h=(r[0]-n[0])*(o[1]-n[1])-(r[1]-n[1])*(o[0]-n[0]),l=s*s+a*a+h*h;return 0===l?new i(s,a,h):(l=Math.sqrt(l),new i(s/l,a/l,h/l))},i.findThreeIndependentVertices=function(t,e){var n=e&&e>0?e:3;if(!t||t.length<3*n)return null;for(var r=new i(t[0],t[1],t[2]),o=null,s=null,a=n;a<t.length&&(o=new i(t[a],t[a+1],t[a+2]),o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]);a+=n)o=null;if(!o)return null;for(a+=n;a<t.length&&(s=new i(t[a],t[a+1],t[a+2]),s[0]===r[0]&&s[1]===r[1]&&s[2]===r[2]||s[0]===o[0]&&s[1]===o[1]&&s[2]===o[2]||i.areColinear(r,o,s));a+=n)s=null;return s?[r,o,s]:null},i.computeBufferNormal=function(t,e){var n=i.findThreeIndependentVertices(t,e);return n?i.computeTriangleNormal(n[0],n[1],n[2]):null},i.prototype.set=function(t,e,i){return this[0]=t,this[1]=e,this[2]=i,this},i.prototype.copy=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","copy","missingVector"));return this[0]=i[0],this[1]=i[1],this[2]=i[2],this},i.prototype.equals=function(t){return this[0]===t[0]&&this[1]===t[1]&&this[2]===t[2]},i.prototype.add=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","add","missingVector"));return this[0]+=i[0],this[1]+=i[1],this[2]+=i[2],this},i.prototype.subtract=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","subtract","missingVector"));return this[0]-=i[0],this[1]-=i[1],this[2]-=i[2],this},i.prototype.multiply=function(t){return this[0]*=t,this[1]*=t,this[2]*=t,this},i.prototype.divide=function(t){return this[0]/=t,this[1]/=t,this[2]/=t,this},i.prototype.multiplyByMatrix=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","multiplyByMatrix","missingMatrix"));var n=i[0]*this[0]+i[1]*this[1]+i[2]*this[2]+i[3],r=i[4]*this[0]+i[5]*this[1]+i[6]*this[2]+i[7],o=i[8]*this[0]+i[9]*this[1]+i[10]*this[2]+i[11],s=i[12]*this[0]+i[13]*this[1]+i[14]*this[2]+i[15];return this[0]=n/s,this[1]=r/s,this[2]=o/s,this},i.prototype.mix=function(i,n){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","mix","missingVector"));var r=1-n,o=n;return this[0]=this[0]*r+i[0]*o,this[1]=this[1]*r+i[1]*o,this[2]=this[2]*r+i[2]*o,this},i.prototype.negate=function(){return this[0]=-this[0],this[1]=-this[1],this[2]=-this[2],this},i.prototype.dot=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","dot","missingVector"));return this[0]*i[0]+this[1]*i[1]+this[2]*i[2]},i.prototype.cross=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","cross","missingVector"));var n=this[1]*i[2]-this[2]*i[1],r=this[2]*i[0]-this[0]*i[2],o=this[0]*i[1]-this[1]*i[0];return this[0]=n,this[1]=r,this[2]=o,this},i.prototype.magnitudeSquared=function(){return this.dot(this)},i.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSquared())},i.prototype.normalize=function(){var t=this.magnitude(),e=1/t;return this[0]*=e,this[1]*=e,this[2]*=e,this},i.prototype.distanceToSquared=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","distanceToSquared","missingVector"));var n=this[0]-i[0],r=this[1]-i[1],o=this[2]-i[2];return n*n+r*r+o*o},i.prototype.distanceTo=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","distanceTo","missingVector"));return Math.sqrt(this.distanceToSquared(i))},i.prototype.swap=function(t){var e=this[0];return this[0]=t[0],t[0]=e,e=this[1],this[1]=t[1],t[1]=e,e=this[2],this[2]=t[2],t[2]=e,this},i.prototype.toString=function(){return"("+this[0]+", "+this[1]+", "+this[2]+")"},i}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(7),i(18),i(9),i(19)],r=function(t,e,i,n,r){"use strict";var o=function(t,e,i){this.latitude=t,this.longitude=e,this.altitude=i};return o.ZERO=new o(0,0,0),o.fromRadians=function(e,i,n){return new o(e*t.RADIANS_TO_DEGREES,i*t.RADIANS_TO_DEGREES,n)},o.prototype.copy=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Position","copy","missingPosition"));return this.latitude=t.latitude,this.longitude=t.longitude,this.altitude=t.altitude,this},o.prototype.equals=function(t){return t&&t.latitude===this.latitude&&t.longitude===this.longitude&&t.altitude===this.altitude},o.interpolateGreatCircle=function(t,o,s,a){if(!o||!s)throw new e(n.logMessage(n.LEVEL_SEVERE,"Position","interpolateGreatCircle","missingPosition"));if(!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"Position","interpolateGreatCircle","missingResult"));var h=r.clamp(t,0,1);return a.altitude=r.interpolate(h,o.altitude,s.altitude),i.interpolateGreatCircle(h,o,s,a),a},o.interpolateRhumb=function(t,o,s,a){if(!o||!s)throw new e(n.logMessage(n.LEVEL_SEVERE,"Position","interpolateRhumb","missingPosition"));if(!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"Position","interpolateRhumb","missingResult"));var h=r.clamp(t,0,1);return a.altitude=r.interpolate(h,o.altitude,s.altitude),i.interpolateRhumb(h,o,s,a),a},o.interpolateLinear=function(t,o,s,a){if(!o||!s)throw new e(n.logMessage(n.LEVEL_SEVERE,"Position","interpolateLinear","missingPosition"));if(!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"Position","interpolateLinear","missingResult"));var h=r.clamp(t,0,1);return a.altitude=r.interpolate(h,o.altitude,s.altitude),i.interpolateLinear(h,o,s,a),a},o.prototype.toString=function(){return"("+this.latitude.toString()+"°, "+this.longitude.toString()+"°, "+this.altitude.toString()+")"},o}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(7),i(9),i(14),i(16),i(19)],r=function(t,e,i,n,r,o){"use strict";var s=function(t,e){this.latitude=t,this.longitude=e};return s.ZERO=new s(0,0),s.fromRadians=function(e,i){return new s(e*t.RADIANS_TO_DEGREES,i*t.RADIANS_TO_DEGREES)},s.prototype.copy=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","copy","missingLocation"));return this.latitude=t.latitude,this.longitude=t.longitude,this},s.prototype.set=function(t,e){return this.latitude=t,this.longitude=e,this},s.prototype.equals=function(t){return t&&t.latitude===this.latitude&&t.longitude===this.longitude},s.interpolateAlongPath=function(t,n,r,o,s){if(!r||!o)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","interpolateAlongPath","missingLocation"));if(!s)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","interpolateAlongPath","missingResult"));return t===WorldWind.GREAT_CIRCLE?this.interpolateGreatCircle(n,r,o,s):t&&t===WorldWind.RHUMB_LINE?this.interpolateRhumb(n,r,o,s):this.interpolateLinear(n,r,o,s)},s.interpolateGreatCircle=function(t,n,r,s){if(!n||!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","interpolateGreatCircle","missingLocation"));if(!s)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","interpolateGreatCircle","missingResult"));if(n.equals(r))return s.latitude=n.latitude,s.longitude=n.longitude,s;var a=o.clamp(t,0,1),h=this.greatCircleAzimuth(n,r),l=this.greatCircleDistance(n,r);return this.greatCircleLocation(n,h,a*l,s)},s.greatCircleAzimuth=function(n,r){if(!n||!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","greatCircleAzimuth","missingLocation"));var o,s,a,h=n.latitude*t.DEGREES_TO_RADIANS,l=r.latitude*t.DEGREES_TO_RADIANS,u=n.longitude*t.DEGREES_TO_RADIANS,c=r.longitude*t.DEGREES_TO_RADIANS;return h==l&&u==c?0:u==c?h>l?180:0:(s=Math.cos(l)*Math.sin(c-u),o=Math.cos(h)*Math.sin(l)-Math.sin(h)*Math.cos(l)*Math.cos(c-u),a=Math.atan2(s,o),isNaN(a)?0:a*t.RADIANS_TO_DEGREES)},s.greatCircleDistance=function(n,r){if(!n||!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","greatCircleDistance","missingLocation"));var o,s,a,h,l=n.latitude*t.DEGREES_TO_RADIANS,u=r.latitude*t.DEGREES_TO_RADIANS,c=n.longitude*t.DEGREES_TO_RADIANS,d=r.longitude*t.DEGREES_TO_RADIANS;return l==u&&c==d?0:(o=Math.sin((u-l)/2),s=Math.sin((d-c)/2),a=o*o+Math.cos(l)*Math.cos(u)*s*s,h=2*Math.asin(Math.sqrt(a)),isNaN(h)?0:h)},s.greatCircleLocation=function(n,r,o,s){if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","greatCircleLocation","missingLocation"));if(!s)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","greatCircleLocation","missingResult"));if(0==o)return s.latitude=n.latitude,s.longitude=n.longitude,s;var a,h,l=n.latitude*t.DEGREES_TO_RADIANS,u=n.longitude*t.DEGREES_TO_RADIANS,c=r*t.DEGREES_TO_RADIANS;return a=Math.asin(Math.sin(l)*Math.cos(o)+Math.cos(l)*Math.sin(o)*Math.cos(c)),h=u+Math.atan2(Math.sin(o)*Math.sin(c),Math.cos(l)*Math.cos(o)-Math.sin(l)*Math.sin(o)*Math.cos(c)),isNaN(a)||isNaN(h)?(s.latitude=n.latitude,s.longitude=n.longitude):(s.latitude=t.normalizedDegreesLatitude(a*t.RADIANS_TO_DEGREES),s.longitude=t.normalizedDegreesLongitude(h*t.RADIANS_TO_DEGREES)),s},s.interpolateRhumb=function(t,n,r,s){if(!n||!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","interpolateRhumb","missingLocation"));if(!s)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","interpolateRhumb","missingResult"));if(n.equals(r))return s.latitude=n.latitude,s.longitude=n.longitude,s;var a=o.clamp(t,0,1),h=this.rhumbAzimuth(n,r),l=this.rhumbDistance(n,r);return this.rhumbLocation(n,h,a*l,s)},s.rhumbAzimuth=function(n,r){if(!n||!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","rhumbAzimuth","missingLocation"));var s,a,h,l=n.latitude*t.DEGREES_TO_RADIANS,u=r.latitude*t.DEGREES_TO_RADIANS,c=n.longitude*t.DEGREES_TO_RADIANS,d=r.longitude*t.DEGREES_TO_RADIANS;return l==u&&c==d?0:(s=d-c,a=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(l/2+Math.PI/4)),o.fabs(s)>Math.PI&&(s=s>0?-(2*Math.PI-s):2*Math.PI+s),h=Math.atan2(s,a),isNaN(h)?0:h*t.RADIANS_TO_DEGREES)},s.rhumbDistance=function(n,r){if(!n||!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","rhumbDistance","missingLocation"));var s,a,h,l,u,c=n.latitude*t.DEGREES_TO_RADIANS,d=r.latitude*t.DEGREES_TO_RADIANS,p=n.longitude*t.DEGREES_TO_RADIANS,f=r.longitude*t.DEGREES_TO_RADIANS;return c==d&&p==f?0:(s=d-c,a=f-p,h=Math.log(Math.tan(d/2+Math.PI/4)/Math.tan(c/2+Math.PI/4)),l=s/h,(isNaN(h)||isNaN(l))&&(l=Math.cos(c)),o.fabs(a)>Math.PI&&(a=a>0?-(2*Math.PI-a):2*Math.PI+a),u=Math.sqrt(s*s+l*l*a*a),isNaN(u)?0:u)},s.rhumbLocation=function(n,r,s,a){if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","rhumbLocation","missingLocation"));if(!a)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","rhumbLocation","missingResult"));if(0==s)return a.latitude=n.latitude,a.longitude=n.longitude,a;var h,l,u=n.latitude*t.DEGREES_TO_RADIANS,c=n.longitude*t.DEGREES_TO_RADIANS,d=r*t.DEGREES_TO_RADIANS,p=u+s*Math.cos(d),f=Math.log(Math.tan(p/2+Math.PI/4)/Math.tan(u/2+Math.PI/4)),g=(p-u)/f;return(isNaN(f)||isNaN(g)||!isFinite(g))&&(g=Math.cos(u)),h=s*Math.sin(d)/g,o.fabs(p)>Math.PI/2&&(p=p>0?Math.PI-p:-Math.PI-p),l=o.fmod(c+h+Math.PI,2*Math.PI)-Math.PI,isNaN(p)||isNaN(l)?(a.latitude=n.latitude,a.longitude=n.longitude):(a.latitude=t.normalizedDegreesLatitude(p*t.RADIANS_TO_DEGREES),a.longitude=t.normalizedDegreesLongitude(l*t.RADIANS_TO_DEGREES)),a},s.interpolateLinear=function(t,n,r,s){if(!n||!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","interpolateLinear","missingLocation"));if(!s)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","interpolateLinear","missingResult"));if(n.equals(r))return s.latitude=n.latitude,s.longitude=n.longitude,s;var a=o.clamp(t,0,1),h=this.linearAzimuth(n,r),l=this.linearDistance(n,r);return this.linearLocation(n,h,a*l,s)},s.linearAzimuth=function(n,r){if(!n||!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","linearAzimuth","missingLocation"));var s,a,h,l=n.latitude*t.DEGREES_TO_RADIANS,u=r.latitude*t.DEGREES_TO_RADIANS,c=n.longitude*t.DEGREES_TO_RADIANS,d=r.longitude*t.DEGREES_TO_RADIANS;return l==u&&c==d?0:(s=d-c,a=u-l,o.fabs(s)>Math.PI&&(s=s>0?-(2*Math.PI-s):2*Math.PI+s),h=Math.atan2(s,a),isNaN(h)?0:h*t.RADIANS_TO_DEGREES)},s.linearDistance=function(n,r){if(!n||!r)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","linearDistance","missingLocation"));var s,a,h,l=n.latitude*t.DEGREES_TO_RADIANS,u=r.latitude*t.DEGREES_TO_RADIANS,c=n.longitude*t.DEGREES_TO_RADIANS,d=r.longitude*t.DEGREES_TO_RADIANS;return l==u&&c==d?0:(s=u-l,a=d-c,o.fabs(a)>Math.PI&&(a=a>0?-(2*Math.PI-a):2*Math.PI+a),h=Math.sqrt(s*s+a*a),isNaN(h)?0:h)},s.linearLocation=function(n,r,s,a){if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","linearLocation","missingLocation"));if(!a)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","linearLocation","missingResult"));if(0==s)return a.latitude=n.latitude,a.longitude=n.longitude,a;var h,l=n.latitude*t.DEGREES_TO_RADIANS,u=n.longitude*t.DEGREES_TO_RADIANS,c=r*t.DEGREES_TO_RADIANS,d=l+s*Math.cos(c);return o.fabs(d)>Math.PI/2&&(d=d>0?Math.PI-d:-Math.PI-d),h=o.fmod(u+s*Math.sin(c)+Math.PI,2*Math.PI)-Math.PI,isNaN(d)||isNaN(h)?(a.latitude=n.latitude,a.longitude=n.longitude):(a.latitude=t.normalizedDegreesLatitude(d*t.RADIANS_TO_DEGREES),a.longitude=t.normalizedDegreesLongitude(h*t.RADIANS_TO_DEGREES)),a},s.locationsCrossDateLine=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","locationsCrossDateline","missingLocation"));for(var n=null,r=0,s=t.length;r<s;r+=1){var a=t[r];if(null!=n&&o.signum(n.longitude)!=o.signum(a.longitude)){var h=Math.abs(n.longitude-a.longitude);if(h>180&&h<360)return!0}n=a}return!1},s.greatCircleArcExtremeLocations=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","greatCircleArcExtremeLocations","missingLocation"));for(var n=null,r=null,o=null,a=0,h=t.length;a<h;a+=1){var l=t[a];if(null!=o){var u=s.greatCircleArcExtremeForTwoLocations(o,l);if(null==u)continue;(null==n||n.latitude>u[0].latitude)&&(n=u[0]),(null==r||r.latitude<u[1].latitude)&&(r=u[1])}o=l}return[n,r]},s.greatCircleArcExtremeForTwoLocations=function(t,n){if(!t||!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","greatCircleArcExtremeForTwoLocations","missingLocation"));var r,a,h,l=null,u=null,c=90,d=-90,p=[t,n];for(r=0,a=p.length;r<a;r+=1)h=p[r],c>=h.latitude&&(c=h.latitude,l=h),d<=h.latitude&&(d=h.latitude,u=h);var f=s.greatCircleAzimuth(t,n),g=s.greatCircleDistance(t,n),E=s.greatCircleExtremeLocationsUsingAzimuth(t,f);for(r=0,a=E.length;r<a;r+=1){h=E[r];var m=s.greatCircleAzimuth(t,h),v=s.greatCircleDistance(t,h);o.signum(m)==o.signum(f)&&v>=0&&v<=g&&(c>=h.latitude&&(c=h.latitude,l=h),d<=h.latitude&&(d=h.latitude,u=h))}return[l,u]},s.greatCircleExtremeLocationsUsingAzimuth=function(n,r){if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"Location","greatCircleArcExtremeLocationsUsingAzimuth","missingLocation"));var o=n.latitude,a=r*t.DEGREES_TO_RADIANS,h=-Math.tan(o)/Math.cos(a),l=Math.atan(h),u=l+Math.PI/2,c=l-Math.PI/2;return[s.greatCircleLocation(n,r,u,new s(0,0)),s.greatCircleLocation(n,r,c,new s(0,0))]},s.intersectionWithMeridian=function(t,e,i,o){var s=o.computePointFromLocation(t.latitude,t.longitude,new r(0,0,0)),a=o.computePointFromLocation(e.latitude,e.longitude,new r(0,0,0)),h=o.computePointFromLocation(90,i,new r(0,0,0)),l=o.computePointFromLocation(0,i,new r(0,0,0)),u=n.fromPoints(h,l,r.ZERO),c=new r(0,0,0);if(!u.intersectsSegmentAt(s,a,c))return null;var d=new WorldWind.Position(0,0,0);return o.computePositionFromPoint(c[0],c[1],c[2],d),d.latitude},s.poles={NONE:0,NORTH:1,SOUTH:2},s}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(7),i(15),i(9),i(20),i(16)],r=function(t,e,i,n,r,o){"use strict";var s={clamp:function(t,e,i){return t<e?e:t>i?i:t},interpolate:function(t,e,i){return(1-t)*e+t*i},cbrt:function(t){return"function"==typeof Math.cbrt?Math.cbrt(t):Math.pow(t,1/3)},computeEllipsoidalGlobeIntersection:function(t,i,r,o){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeEllipsoidalGlobeIntersection","missingLine"));if(!o)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeEllipsoidalGlobeIntersection","missingResult"));var s,a=t.direction[0],h=t.direction[1],l=t.direction[2],u=t.origin[0],c=t.origin[1],d=t.origin[2],p=i/r,f=p*p,g=i*i,E=a*a+f*h*h+l*l,m=2*(u*a+f*c*h+d*l),v=u*u+f*c*c+d*d-g,y=m*m-4*E*v;return!(y<0)&&(s=(-m-Math.sqrt(y))/(2*E),o[0]=u+a*s,o[1]=c+h*s,o[2]=d+l*s,!0)},computeTriangleIntersection:function(t,i,r,o,s){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeTriangleIntersection","missingLine"));if(!i||!r||!o)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeTriangleIntersection","missingVertex"));if(!s)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeTriangleIntersection","missingResult"));var a=t.direction[0],h=t.direction[1],l=t.direction[2],u=t.origin[0],c=t.origin[1],d=t.origin[2],p=1e-5,f=r[0]-i[0],g=r[1]-i[1],E=r[2]-i[2],m=o[0]-i[0],v=o[1]-i[1],y=o[2]-i[2],L=h*y-l*v,w=l*m-a*y,S=a*v-h*m,R=f*L+g*w+E*S;if(R>-p&&R<p)return!1;var T=1/R,_=u-i[0],x=c-i[1],M=d-i[2],b=T*(_*L+x*w+M*S);if(b<-p||b>1+p)return!1;var C=x*E-M*g,A=M*f-_*E,P=_*g-x*f,V=T*(a*C+h*A+l*P);if(V<-p||b+V>1+p)return!1;var I=T*(m*C+v*A+y*P);return!(I<0)&&(s[0]=u+a*I,s[1]=c+h*I,s[2]=d+l*I,!0)},computeIndexedTrianglesIntersection:function(t,i,r,a){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingLine"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingPoints"));if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingIndices"));if(!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingResults"));for(var h=new o(0,0,0),l=new o(0,0,0),u=new o(0,0,0),c=new o(0,0,0),d=0,p=r.length;d<p;d+=3){var f=3*r[d],g=3*r[d+1],E=3*r[d+2];h[0]=i[f],h[1]=i[f+1],h[2]=i[f+2],l[0]=i[g],l[1]=i[g+1],l[2]=i[g+2],u[0]=i[E],u[1]=i[E+1],u[2]=i[E+2],s.computeTriangleIntersection(t,h,l,u,c)&&(a.push(c),c=new o(0,0,0))}return a.length>0},computeTriStripIntersections:function(t,i,r,s){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingLine"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingPoints"));if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingIndices"));if(!s)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingResults"));var a,h,l,u,c,d,p,f,g,E,m,v,y,L,w,S,R,T,_,x,M,b,C,A,P,V,I,D,W,O,N=t.direction[0],F=t.direction[1],G=t.direction[2],k=t.origin[0],B=t.origin[1],U=t.origin[2],z=1e-5;O=3*r[0],u=i[O++],c=i[O++],d=i[O],O=3*r[1],p=i[O++],f=i[O++],g=i[O];for(var K=2,j=r.length;K<j;K++)a=u,h=c,l=d,u=p,c=f,d=g,O=3*r[K],p=i[O++],f=i[O++],g=i[O],E=u-a,m=c-h,v=d-l,y=p-a,L=f-h,w=g-l,S=F*w-G*L,R=G*y-N*w,T=N*L-F*y,D=E*S+m*R+v*T,D>-z&&D<z||(W=1/D,_=k-a,x=B-h,M=U-l,P=W*(_*S+x*R+M*T),P<-z||P>1+z||(b=x*v-M*m,C=M*E-_*v,A=_*m-x*E,V=W*(N*b+F*C+G*A),V<-z||P+V>1+z||(I=W*(y*b+L*C+w*A),I>=0&&s.push(new o(k+N*I,B+F*I,U+G*I)))))},fabs:function(t){return t>=0?t:-t},fmod:function(t,e){return 0===e?0:t-Math.floor(t/e)*e},fract:function(t){return t-Math.floor(t)},mod:function(t,e){return(t%e+e)%e},max:function(t,e){return t>e?t:e},localCoordinateAxesAtPoint:function(t,i,r,o,s){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","localCoordinateAxesAtPoint","missingVector"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","localCoordinateAxesAtPoint","missingGlobe"));if(!r||!o||!s)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","localCoordinateAxesAtPoint","missingResult"));var a=t[0],h=t[1],l=t[2];i.surfaceNormalAtPoint(a,h,l,s),i.northTangentAtPoint(a,h,l,o),r.set(o[0],o[1],o[2]),r.cross(s),r.normalize(),o.set(s[0],s[1],s[2]),o.cross(r),o.normalize()},horizonDistanceForGlobeRadius:function(t,i){if(t<0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","horizontalDistanceForGlobeRadius","The specified globe radius is negative."));return t>0&&i>0?Math.sqrt(i*(2*t+i)):0},perspectiveNearDistanceForFarDistance:function(t,i,r){if(t<0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectiveNearDistanceForFarDistance","The specified distance is negative."));if(i<0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectiveNearDistanceForFarDistance","The specified resolution is negative."));if(r<1)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectiveNearDistanceForFarDistance","The specified depth bits is negative."));var o=(1<<r)-1;return t/(o/(1-i/t)-o+1)},perspectiveNearDistance:function(t,i,r){if(t<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectiveNearDistance","invalidWidth"));if(i<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectiveNearDistance","invalidHeight"));if(r<0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectiveNearDistance","The specified distance is negative."));var o=i/t;return 2*r/Math.sqrt(o*o+5)},perspectiveFrustumRectangle:function(t,i,o){if(t<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectiveFrustumRectangle","invalidWidth"));if(i<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectiveFrustumRectangle","invalidHeight"));if(o<0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectiveFrustumRectangle","The specified distance is negative."));var s=o,a=o*i/t;return new r(-s/2,-a/2,s,a)},perspectivePixelSize:function(t,i,r){if(t<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectivePixelSize","invalidWidth"));if(i<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectivePixelSize","invalidHeight"));if(r<0)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","perspectivePixelSize","The specified distance is negative."));var o=s.perspectiveFrustumRectangle(t,i,r).height;return o/i},boundingRectForUnitQuad:function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"WWMath","boundingRectForUnitQuad","missingMatrix"));var i=t,o=i[3],s=i[7],a=i[0]+i[3],h=i[4]+i[7],l=i[1]+i[3],u=i[5]+i[7],c=i[0]+i[1]+i[3],d=i[4]+i[5]+i[7],p=Math.min(Math.min(o,a),Math.min(l,c)),f=Math.max(Math.max(o,a),Math.max(l,c)),g=Math.min(Math.min(s,h),Math.min(u,d)),E=Math.max(Math.max(s,h),Math.max(u,d));return new r(p,g,f-p,E-g)},isPowerOfTwo:function(t){return 0!=t&&0===(t&t-1)},signum:function(t){return t>0?1:t<0?-1:0},gudermannianInverse:function(e){return Math.log(Math.tan(Math.PI/4+e*t.DEGREES_TO_RADIANS/2))/Math.PI},epsg3857ToEpsg4326:function(e,i){var n=6378100,r=Math.PI/2-2*Math.atan(Math.exp(-i/n)),o=e/n;return[s.clamp(r*t.RADIANS_TO_DEGREES,-90,90),s.clamp(o*t.RADIANS_TO_DEGREES,-180,180)]},powerOfTwoFloor:function(t){var e=Math.floor(Math.log(t)/Math.log(2));return Math.pow(2,e)}};return s}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(9)],r=function(t){"use strict";var e=function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n};return e.prototype.set=function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n},e.prototype.getMinX=function(){return this.x},e.prototype.getMinY=function(){return this.y},e.prototype.getMaxX=function(){return this.x+this.width},e.prototype.getMaxY=function(){return this.y+this.height},e.prototype.containsPoint=function(t){return t[0]>=this.x&&t[0]<=this.x+this.width&&t[1]>=this.y&&t[1]<=this.y+this.height},e.prototype.intersects=function(t){return!(t.x+t.width<this.x)&&(!(t.x>this.x+this.width)&&(!(t.y+t.height<this.y)&&!(t.y>this.y+this.height)))},e.prototype.intersectsRectangles=function(t){if(t)for(var e=0;e<t.length;e++)if(this.intersects(t[e]))return!0;return!1},e.prototype.toString=function(){return this.x+", "+this.y+", "+this.width+", "+this.height},e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(19)],r=function(t,e,i){"use strict";var n=function(n,r,o){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Texture","constructor","missingGlContext"));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"Texture","constructor","missingImage"));o||(o=n.CLAMP_TO_EDGE);var s=n.createTexture(),a=i.isPowerOfTwo(r.width)&&i.isPowerOfTwo(r.height);this.originalImageWidth=r.width,this.originalImageHeight=r.height,o!==n.REPEAT||a||(r=this.resizeImage(r),a=!0),this.imageWidth=r.width,this.imageHeight=r.height,this.size=r.width*r.height*4,n.bindTexture(n.TEXTURE_2D,s),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,a?n.LINEAR_MIPMAP_LINEAR:n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,o);var h=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");h&&n.texParameteri(n.TEXTURE_2D,h.TEXTURE_MAX_ANISOTROPY_EXT,4),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),a&&n.generateMipmap(n.TEXTURE_2D),this.textureId=s,this.creationTime=new Date};return n.prototype.dispose=function(t){t.deleteTexture(this.textureId),delete this.textureId},n.prototype.bind=function(t){return t.currentGlContext.bindTexture(t.currentGlContext.TEXTURE_2D,this.textureId),t.frameStatistics.incrementTextureLoadCount(1),!0},n.prototype.resizeImage=function(t){var e=document.createElement("canvas");e.width=i.powerOfTwoFloor(t.width),e.height=i.powerOfTwoFloor(t.height);var n=e.getContext("2d");return n.drawImage(t,0,0,e.width,e.height),e},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(13),i(23),i(17),i(25),i(16),i(19)],r=function(t,e,i,n,r,o,s,a){"use strict";var h=function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"Navigator","constructor","missingWorldWindow"));this.worldWindow=i,this.heading=0,this.tilt=0,this.roll=0,this.nearDistance=1,this.farDistance=1e7};return h.prototype.currentState=function(){throw new o(e.logMessage(e.LEVEL_SEVERE,"Navigator","currentState","abstractInvocation"))},h.prototype.currentStateForModelview=function(o){if(!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"Navigator","currentStateForModelview","missingMatrix"));var h,l,u=this.worldWindow.globe,c=a.max(u.equatorialRadius,u.polarRadius),d=o.extractEyePoint(new s(0,0,0)),p=u.computePositionFromPoint(d[0],d[1],d[2],new r(0,0,0)),f=this.worldWindow.viewport,g=this.worldWindow.depthBits,E=i.fromIdentity();return this.farDistance=a.horizonDistanceForGlobeRadius(c,p.altitude),this.farDistance<1e3&&(this.farDistance=1e3),this.nearDistance=a.perspectiveNearDistanceForFarDistance(this.farDistance,10,g),h=p.altitude-u.elevationAtLocation(p.latitude,p.longitude),h>0&&(l=a.perspectiveNearDistance(f.width,f.height,h),this.nearDistance>l&&(this.nearDistance=l)),this.nearDistance<1&&(this.nearDistance=1),E.setToPerspectiveProjection(f.width,f.height,this.nearDistance,this.farDistance),new n(o,E,f,this.heading,this.tilt)},h}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(12),i(15),i(9),i(13),i(20),i(24),i(16),i(19)],r=function(t,e,i,n,r,o,s,a,h){"use strict";var l=function(t,i,n,o,s){this.modelview=t,this.projection=i,this.modelviewProjection=r.fromIdentity(),this.modelviewProjection.setToMultiply(i,t),this.viewport=n,this.heading=o,this.tilt=s,this.eyePoint=this.modelview.extractEyePoint(new a(0,0,0)),this.frustumInModelCoordinates=null;var l=r.fromIdentity();l.setToTransposeOfMatrix(this.modelview),this.frustumInModelCoordinates=e.fromProjectionMatrix(this.projection),this.frustumInModelCoordinates.transformByMatrix(l),this.frustumInModelCoordinates.normalize(),this.modelviewInv=r.fromIdentity(),this.modelviewInv.invertOrthonormalMatrix(this.modelview),this.projectionInv=r.fromIdentity(),this.projectionInv.invertMatrix(this.projection),this.modelviewProjectionInv=r.fromIdentity(),this.modelviewProjectionInv.invertMatrix(this.modelviewProjection),this.modelviewNormalTransform=r.fromIdentity().setToTransposeOfMatrix(this.modelviewInv.upper3By3());var u=new a(-1,-1,-1),c=new a(1,1,-1),d=new a(-1,-1,1),p=new a(1,1,1);u.multiplyByMatrix(this.projectionInv),c.multiplyByMatrix(this.projectionInv),d.multiplyByMatrix(this.projectionInv),p.multiplyByMatrix(this.projectionInv);var f=h.fabs(c[0]-u[0]),g=h.fabs(p[0]-d[0]),E=-u[2],m=-d[2],v=(g-f)/(m-E),y=f-v*E;this.pixelSizeScale=v/n.width,this.pixelSizeOffset=y/n.height};return l.prototype.project=function(e,i){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","project","missingPoint"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","project","missingResult"));var r=e[0],o=e[1],s=e[2],a=this.modelviewProjection,h=a[0]*r+a[1]*o+a[2]*s+a[3],l=a[4]*r+a[5]*o+a[6]*s+a[7],u=a[8]*r+a[9]*o+a[10]*s+a[11],c=a[12]*r+a[13]*o+a[14]*s+a[15],d=this.viewport;return 0!=c&&(h/=c,l/=c,u/=c,!(u<-1||u>1)&&(h=.5*h+.5,l=.5*l+.5,u=.5*u+.5,h=h*d.width+d.x,l=l*d.height+d.y,i[0]=h,i[1]=l,i[2]=u,!0))},l.prototype.projectWithDepth=function(e,i,r){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","projectWithDepth","missingPoint"));if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","projectWithDepth","missingResult"));var o=e[0],s=e[1],a=e[2],l=this.modelview,u=l[0]*o+l[1]*s+l[2]*a+l[3],c=l[4]*o+l[5]*s+l[6]*a+l[7],d=l[8]*o+l[9]*s+l[10]*a+l[11],p=l[12]*o+l[13]*s+l[14]*a+l[15],f=this.projection,g=f[0]*u+f[1]*c+f[2]*d+f[3]*p,E=f[4]*u+f[5]*c+f[6]*d+f[7]*p,m=f[8]*u+f[9]*c+f[10]*d+f[11]*p,v=f[12]*u+f[13]*c+f[14]*d+f[15]*p,y=this.viewport;return 0!==v&&(g/=v,E/=v,m/=v,!(m<-1||m>1)&&(m=f[8]*u+f[9]*c+f[10]*d*(1+i)+f[11]*p,m/=v,m=h.clamp(m,-1,1),g=.5*g+.5,E=.5*E+.5,m=.5*m+.5,g=g*y.width+y.x,E=E*y.height+y.y,r[0]=g,r[1]=E,r[2]=m,!0))},l.prototype.unProject=function(e,i){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","unProject","missingPoint"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","unProject","missingResult"));var r=e[0],o=e[1],s=e[2],a=this.viewport;if(r=(r-a.x)/a.width,o=(o-a.y)/a.height,r=2*r-1,o=2*o-1,s=2*s-1,s<-1||s>1)return!1;var h=this.modelviewProjectionInv,l=h[0]*r+h[1]*o+h[2]*s+h[3],u=h[4]*r+h[5]*o+h[6]*s+h[7],c=h[8]*r+h[9]*o+h[10]*s+h[11],d=h[12]*r+h[13]*o+h[14]*s+h[15];
return 0!==d&&(i[0]=l/d,i[1]=u/d,i[2]=c/d,!0)},l.prototype.convertPointToWindow=function(e,i){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","convertPointToWindow","missingPoint"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","convertPointToWindow","missingResult"));return i[0]=e[0],i[1]=this.viewport.height-e[1],i},l.prototype.convertPointToViewport=function(e,i){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","convertPointToViewport","missingPoint"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","convertPointToViewport","missingResult"));return i[0]=e[0],i[1]=this.viewport.height-e[1],i},l.prototype.rayFromScreenPoint=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"NavigatorState","rayFromScreenPoint","missingPoint"));var r=this.convertPointToViewport(e,new a(0,0,0)),o=new a(0,0,0),s=new a(0,0,0);if(!this.unProject(r,o))return null;if(r[2]=1,!this.unProject(r,s))return null;var h=new a(this.eyePoint[0],this.eyePoint[1],this.eyePoint[2]),l=new a(s[0],s[1],s[2]);return l.subtract(o),l.normalize(),new i(h,l)},l.prototype.pixelSizeAtDistance=function(t){return this.pixelSizeScale*t+this.pixelSizeOffset},l}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(9),i(7),i(16)],r=function(t,e,i){"use strict";var n=function(t,e){this[0]=t,this[1]=e};return n.prototype=new Float64Array(2),n.prototype.set=function(t,e){return this[0]=t,this[1]=e,this},n.prototype.copy=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","copy","missingVector"));return this[0]=i[0],this[1]=i[1],this},n.prototype.equals=function(t){return this[0]===t[0]&&this[1]===t[1]},n.average=function(i,n){if(!i||i.length<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","average","missingArray"));if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","average","missingResult"));var r,o=i.length;n[0]=0,n[1]=0;for(var s=0,a=i.length;s<a;s++)r=i[s],n[0]+=r[0]/o,n[1]+=r[1]/o;return n},n.prototype.add=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","add","missingVector"));return this[0]+=i[0],this[1]+=i[1],this},n.prototype.subtract=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","subtract","missingVector"));return this[0]-=i[0],this[1]-=i[1],this},n.prototype.multiply=function(t){return this[0]*=t,this[1]*=t,this},n.prototype.divide=function(t){return this[0]/=t,this[1]/=t,this},n.prototype.mix=function(i,n){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","mix","missingVector"));var r=1-n,o=n;return this[0]=this[0]*r+i[0]*o,this[1]=this[1]*r+i[1]*o,this},n.prototype.negate=function(){return this[0]=-this[0],this[1]=-this[1],this},n.prototype.dot=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","dot","missingVector"));return this[0]*i[0]+this[1]*i[1]},n.prototype.magnitudeSquared=function(){return this.dot(this)},n.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSquared())},n.prototype.normalize=function(){var t=this.magnitude(),e=1/t;return this[0]*=e,this[1]*=e,this},n.prototype.distanceToSquared=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","distanceToSquared","missingVector"));var n=this[0]-i[0],r=this[1]-i[1];return n*n+r*r},n.prototype.distanceTo=function(i){if(!i)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","distanceTo","missingVector"));return Math.sqrt(this.distanceToSquared(i))},n.prototype.toVec3=function(){return new i(this[0],this[1],0)},n.prototype.swap=function(t){var e=this[0];return this[0]=t[0],t[0]=e,e=this[1],this[1]=t[1],t[1]=e,this},n.prototype.toString=function(){return"("+this[0]+", "+this[1]+")"},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(8)],r=function(t){"use strict";var e=function(e){t.call(this,"UnsupportedOperationError",e);var i;try{throw new Error}catch(t){i=t.stack}this.stack=i};return e.prototype=Object.create(t.prototype),e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(6)],r=function(t){"use strict";var e=function(e,i){t.call(this,e,i),this.button=0,this.interpretDistance=5};return e.prototype=Object.create(t.prototype),e.prototype.mouseMove=function(t){this.state==WorldWind.POSSIBLE?this.shouldInterpret()&&(this.shouldRecognize()?(this.translationX=0,this.translationY=0,this.state=WorldWind.BEGAN):this.state=WorldWind.FAILED):this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CHANGED)},e.prototype.mouseUp=function(t){0==this.mouseButtonMask&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},e.prototype.touchStart=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},e.prototype.shouldInterpret=function(){var t=this.translationX,e=this.translationY,i=Math.sqrt(t*t+e*e);return i>this.interpretDistance},e.prototype.shouldRecognize=function(){var t=1<<this.button;return t==this.mouseButtonMask},e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(6)],r=function(t){"use strict";var e=function(e,i){t.call(this,e,i),this._scale=1,this._offsetScale=1,this.referenceDistance=0,this.interpretThreshold=20,this.weight=.4,this.pinchTouches=[]};return e.prototype=Object.create(t.prototype),Object.defineProperties(e.prototype,{scale:{get:function(){return this._scale*this._offsetScale}}}),e.prototype.reset=function(){t.prototype.reset.call(this),this._scale=1,this._offsetScale=1,this.referenceDistance=0,this.pinchTouches=[]},e.prototype.mouseDown=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},e.prototype.touchStart=function(t){this.pinchTouches.length<2&&2==this.pinchTouches.push(t)&&(this.referenceDistance=this.currentPinchDistance(),this._offsetScale*=this._scale,this._scale=1)},e.prototype.touchMove=function(t){if(2==this.pinchTouches.length)if(this.state==WorldWind.POSSIBLE)this.shouldRecognize()&&(this.state=WorldWind.BEGAN);else if(this.state==WorldWind.BEGAN||this.state==WorldWind.CHANGED){var e=this.currentPinchDistance(),i=Math.abs(e/this.referenceDistance),n=this.weight;this._scale=this._scale*(1-n)+i*n,this.state=WorldWind.CHANGED}},e.prototype.touchEnd=function(t){var e=this.pinchTouches.indexOf(t);e!=-1&&this.pinchTouches.splice(e,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},e.prototype.touchCancel=function(t){var e=this.pinchTouches.indexOf(t);e!=-1&&this.pinchTouches.splice(e,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CANCELLED))},e.prototype.prepareToRecognize=function(){this.referenceDistance=this.currentPinchDistance(),this._scale=1},e.prototype.shouldRecognize=function(){var t=this.currentPinchDistance();return Math.abs(t-this.referenceDistance)>this.interpretThreshold},e.prototype.currentPinchDistance=function(){var t=this.pinchTouches[0],e=this.pinchTouches[1],i=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(i*i+n*n)},e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(6)],r=function(t,e){"use strict";var i=function(t,i){e.call(this,t,i),this._rotation=0,this._offsetRotation=0,this.referenceAngle=0,this.interpretThreshold=20,this.weight=.4,this.rotationTouches=[]};return i.prototype=Object.create(e.prototype),Object.defineProperties(i.prototype,{rotation:{get:function(){return this._rotation+this._offsetRotation}}}),i.prototype.reset=function(){e.prototype.reset.call(this),this._rotation=0,this._offsetRotation=0,this.referenceAngle=0,this.rotationTouches=[]},i.prototype.mouseDown=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},i.prototype.touchStart=function(t){this.rotationTouches.length<2&&2==this.rotationTouches.push(t)&&(this.referenceAngle=this.currentTouchAngle(),this._offsetRotation+=this._rotation,this._rotation=0)},i.prototype.touchMove=function(e){if(2==this.rotationTouches.length)if(this.state==WorldWind.POSSIBLE)this.shouldRecognize()&&(this.state=WorldWind.BEGAN);else if(this.state==WorldWind.BEGAN||this.state==WorldWind.CHANGED){var i=this.currentTouchAngle(),n=t.normalizedDegrees(i-this.referenceAngle),r=this.weight;this._rotation=this._rotation*(1-r)+n*r,this.state=WorldWind.CHANGED}},i.prototype.touchEnd=function(t){var e=this.rotationTouches.indexOf(t);e!=-1&&this.rotationTouches.splice(e,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},i.prototype.touchCancel=function(t){var e=this.rotationTouches.indexOf(t);e!=-1&&(this.rotationTouches.splice(e,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CANCELLED)))},i.prototype.prepareToRecognize=function(){this.referenceAngle=this.currentTouchAngle(),this._rotation=0},i.prototype.shouldRecognize=function(){var e=this.currentTouchAngle(),i=t.normalizedDegrees(e-this.referenceAngle);return Math.abs(i)>this.interpretThreshold},i.prototype.currentTouchAngle=function(){var e=this.rotationTouches[0],i=this.rotationTouches[1],n=e.clientX-i.clientX,r=e.clientY-i.clientY;return Math.atan2(r,n)*t.RADIANS_TO_DEGREES},i}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(5)],r=function(t){"use strict";var e=function(e,i){t.call(this,e,i),this.maxTouchDistance=250,this.maxTouchDivergence=50};return e.LEFT=1,e.RIGHT=2,e.UP=4,e.DOWN=8,e.prototype=Object.create(t.prototype),e.prototype.shouldInterpret=function(){for(var t=0,e=this.touchCount;t<e;t++){var i=this.touch(t),n=i.translationX,r=i.translationY,o=Math.sqrt(n*n+r*r);if(o>this.interpretDistance)return!0}return!1},e.prototype.shouldRecognize=function(){var t=this.touchCount;if(t<2)return!1;var i=this.touch(0),n=this.touch(1),r=i.clientX-n.clientX,o=i.clientY-n.clientY,s=Math.sqrt(r*r+o*o);if(s>this.maxTouchDistance)return!1;var a=i.translationX-n.translationX,h=i.translationY-n.translationY,l=Math.sqrt(a*a+h*h);if(l>this.maxTouchDivergence)return!1;var u=e.UP|e.DOWN,c=this.touchDirection(i)&u,d=this.touchDirection(n)&u;return 0!=(c&d)},e.prototype.touchDirection=function(t){var i=t.translationX,n=t.translationY,r=0;return Math.abs(i)>Math.abs(n)?(r|=i<0?e.LEFT:0,r|=i>0?e.RIGHT:0):(r|=n<0?e.UP:0,r|=n>0?e.DOWN:0),r},e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(18),i(31),i(32),i(47)],r=function(t,e,i,n){"use strict";var r=function(){i.call(this,e.FULL_SPHERE,new t(45,45),12,"application/bil16","EarthElevations256",256,256),this.displayName="Earth Elevation Model",this.minElevation=-11e3,this.maxElevation=8850,this.pixelIsPoint=!1,this.urlBuilder=new n("https://worldwind26.arc.nasa.gov/elev","GEBCO,aster_v2,USGS-NED","","1.3.0")};return r.prototype=Object.create(i.prototype),r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(7),i(18),i(9),i(16),i(19)],r=function(t,e,i,n,r,o){"use strict";var s=function(t,e,i,n){this.minLatitude=t,this.maxLatitude=e,this.minLongitude=i,this.maxLongitude=n};return s.ZERO=new s(0,0,0,0),s.FULL_SPHERE=new s(-90,90,-180,180),s.prototype.copy=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Sector","copy","missingSector"));return this.minLatitude=t.minLatitude,this.maxLatitude=t.maxLatitude,this.minLongitude=t.minLongitude,this.maxLongitude=t.maxLongitude,this},s.prototype.isEmpty=function(){return this.minLatitude===this.maxLatitude&&this.minLongitude===this.maxLongitude},s.prototype.deltaLatitude=function(){return this.maxLatitude-this.minLatitude},s.prototype.deltaLongitude=function(){return this.maxLongitude-this.minLongitude},s.prototype.centroidLatitude=function(){return.5*(this.minLatitude+this.maxLatitude)},s.prototype.centroidLongitude=function(){return.5*(this.minLongitude+this.maxLongitude)},s.prototype.centroid=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Sector","centroid","missingResult"));return t.latitude=this.centroidLatitude(),t.longitude=this.centroidLongitude(),t},s.prototype.minLatitudeRadians=function(){return this.minLatitude*t.DEGREES_TO_RADIANS},s.prototype.maxLatitudeRadians=function(){return this.maxLatitude*t.DEGREES_TO_RADIANS},s.prototype.minLongitudeRadians=function(){return this.minLongitude*t.DEGREES_TO_RADIANS},s.prototype.maxLongitudeRadians=function(){return this.maxLongitude*t.DEGREES_TO_RADIANS},s.prototype.setToBoundingSector=function(t){if(!t||t.length<2)throw new e(n.logMessage(n.LEVEL_SEVERE,"Sector","setToBoundingSector","missingArray"));for(var i=90,r=-90,o=180,s=-180,a=0,h=t.length;a<h;a+=1){var l=t[a];l&&(i=Math.min(i,l.latitude),r=Math.max(r,l.latitude),o=Math.min(o,l.longitude),s=Math.max(s,l.longitude))}return this.minLatitude=i,this.maxLatitude=r,this.minLongitude=o,this.maxLongitude=s,this},s.splitBoundingSectors=function(t){if(!t||t.length<2)throw new e(n.logMessage(n.LEVEL_SEVERE,"Sector","splitBoundingSectors","missingArray"));for(var i=90,r=180,a=-90,h=-180,l=null,u=0,c=t.length;u<c;u+=1){var d=t[u],p=d.latitude;p<i&&(i=p),p>a&&(a=p);var f=d.longitude;if(f>=0&&f<r&&(r=f),f<=0&&f>h&&(h=f),null!=l){var g=l.longitude;o.signum(f)!=o.signum(g)&&Math.abs(f-g)<180&&(h=0,r=0)}l=d}return i===a&&r===h?null:[new s(i,a,r,180),new s(i,a,-180,h)]},s.prototype.intersects=function(t){return t&&this.minLongitude<=t.maxLongitude&&this.maxLongitude>=t.minLongitude&&this.minLatitude<=t.maxLatitude&&this.maxLatitude>=t.minLatitude},s.prototype.overlaps=function(t){return t&&this.minLongitude<t.maxLongitude&&this.maxLongitude>t.minLongitude&&this.minLatitude<t.maxLatitude&&this.maxLatitude>t.minLatitude},s.prototype.contains=function(t){return t&&this.minLatitude<=t.minLatitude&&this.maxLatitude>=t.maxLatitude&&this.minLongitude<=t.minLongitude&&this.maxLongitude>=t.maxLongitude},s.prototype.containsLocation=function(t,e){return this.minLatitude<=t&&this.maxLatitude>=t&&this.minLongitude<=e&&this.maxLongitude>=e},s.prototype.intersection=function(t){if(!t instanceof s)throw new e(n.logMessage(n.LEVEL_SEVERE,"Sector","intersection","missingSector"));return this.minLatitude<t.minLatitude&&(this.minLatitude=t.minLatitude),this.maxLatitude>t.maxLatitude&&(this.maxLatitude=t.maxLatitude),this.minLongitude<t.minLongitude&&(this.minLongitude=t.minLongitude),this.maxLongitude>t.maxLongitude&&(this.maxLongitude=t.maxLongitude),this.maxLatitude<this.minLatitude&&(this.maxLatitude=this.minLatitude),this.maxLongitude<this.minLongitude&&(this.maxLongitude=this.minLongitude),this},s.prototype.union=function(t){if(!t instanceof s)throw new e(n.logMessage(n.LEVEL_SEVERE,"Sector","union","missingSector"));return this.minLatitude>t.minLatitude&&(this.minLatitude=t.minLatitude),this.maxLatitude<t.maxLatitude&&(this.maxLatitude=t.maxLatitude),this.minLongitude>t.minLongitude&&(this.minLongitude=t.minLongitude),this.maxLongitude<t.maxLongitude&&(this.maxLongitude=t.maxLongitude),this},s}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(33),i(11),i(7),i(34),i(35),i(44),i(9),i(46),i(31),i(36),i(19)],r=function(t,e,i,n,r,o,s,a,h,l,u){"use strict";var c=function(e,n,r,l,u,d,p){if(!e)throw new i(s.logMessage(s.LEVEL_SEVERE,"ElevationModel","constructor","missingSector"));if(!n)throw new i(s.logMessage(s.LEVEL_SEVERE,"ElevationModel","constructor","The specified level-zero delta is null or undefined."));if(!l)throw new i(s.logMessage(s.LEVEL_SEVERE,"ElevationModel","constructor","The specified image format is null or undefined."));if(!u)throw new i(s.logMessage(s.LEVEL_SEVERE,"ElevationModel","constructor","The specified cache path is null or undefined."));if(!r||r<1)throw new i(s.logMessage(s.LEVEL_SEVERE,"ElevationModel","constructor","The specified number of levels is not greater than zero."));if(!d||!p||d<1||p<1)throw new i(s.logMessage(s.LEVEL_SEVERE,"ElevationModel","constructor","The specified tile width or height is not greater than zero."));this.coverageSector=e,this.retrievalImageFormat=l,this.cachePath=u,this.displayName="Elevations",this.timestamp=Date.now(),this.minElevation=0,this.maxElevation=0,this.pixelIsPoint=!0,this.levels=new o(this.coverageSector,n,r,d,p),this.currentTiles=[],this.currentSector=new h(0,0,0,0),this.tileCache=new a(1e6,8e5),this.imageCache=new a(1e7,8e6),this.currentRetrievals=[],this.absentResourceList=new t(3,5e3),this.id=++c.idPool,this.stateKey="elevationModel "+this.id.toString()+" "};return c.idPool=0,c.prototype.minAndMaxElevationsForSector=function(t){if(!t)throw new i(s.logMessage(s.LEVEL_SEVERE,"ElevationModel","minAndMaxElevationsForSector","missingSector"));var n=this.levels.levelForTexelSize(t.deltaLatitude()*e.DEGREES_TO_RADIANS/64);if(this.assembleTiles(n,t,!1),0==this.currentTiles.length)return null;for(var r,o,a,h=Number.MAX_VALUE,l=-h,u=[],c=0,d=this.currentTiles.length;c<d;c++){if(r=this.currentTiles[c].image(),!r)return u[0]=this.minElevation,u[1]=this.maxElevation,u;o=r.minElevation,h>o&&(h=o),a=r.maxElevation,l<a&&(l=a)}return u[0]=h,u[1]=l,u},c.prototype.elevationAtLocation=function(t,e){return this.coverageSector.containsLocation(t,e)?this.pointElevationForLocation(t,e):0},c.prototype.elevationsForGrid=function(t,e,n,r,o){if(!t)throw new i(s.logMessage(s.LEVEL_SEVERE,"ElevationModel","elevationsForSector","missingSector"));if(!o)throw new i(s.logMessage(s.LEVEL_SEVERE,"ElevationModel","elevationsForSector","missingResult"));if(!e||!n||e<1||n<1)throw new i(s.logMessage(s.LEVEL_SEVERE,"ElevationModel","constructor","The specified number of latitudinal or longitudinal positions is less than one."));var a=this.levels.levelForTexelSize(r);return this.pixelIsPoint?this.pointElevationsForGrid(t,e,n,a,o):this.areaElevationsForGrid(t,e,n,a,o)},c.prototype.pointElevationForLocation=function(t,e){for(var i,n=this.levels.lastLevel(),r=n.tileDelta.latitude,o=n.tileDelta.longitude,s=l.computeRow(r,t),a=l.computeColumn(o,e),h=null,u=n.levelNumber;u>=0;u--){if(i=this.tileCache.entryForKey(u+"."+s+"."+a),i&&(h=i.image()))return h.elevationAtLocation(t,e);s=Math.floor(s/2),a=Math.floor(a/2)}return 0},c.prototype.pointElevationsForGrid=function(t,e,i,n,r){var o,s=0;if(this.assembleTiles(n,t,!0),0===this.currentTiles.length)return 0;this.currentTiles.sort(function(t,e){return t.level.levelNumber-e.level.levelNumber});for(var a=0,h=this.currentTiles.length;a<h;a++){var l=this.currentTiles[a],u=l.image();u?(u.elevationsForGrid(t,e,i,r),o=l.level.texelSize,s<o&&(s=o)):s=Number.MAX_VALUE}return s},c.prototype.areaElevationsForGrid=function(t,e,i,n,r){var o,s,a,h,l,u,c=t.minLatitude,d=t.maxLatitude,p=t.minLongitude,f=t.maxLongitude,g=t.deltaLatitude()/(e>1?e-1:1),E=t.deltaLongitude()/(i>1?i-1:1),m=0;for(l=0,o=c;l<e;l+=1,o+=g)for(l===e-1&&(o=d),u=0,s=p;u<i;u+=1,s+=E)u===i-1&&(s=f),this.coverageSector.containsLocation(o,s)&&(a=(s+180)/360,h=(o+90)/180,this.areaElevationForCoord(a,h,n.levelNumber,r,m)),m++;return n.texelSize},c.prototype.areaElevationForCoord=function(t,e,i,n,r){for(var o,s,a,h,l,c,d,p,f,g,E,m,v,y,L,w,S=new Float64Array(4),R=i;R>=0;R--)if(o=this.levels.level(R),s=Math.round(360*o.tileWidth/o.tileDelta.longitude),a=Math.round(180*o.tileHeight/o.tileDelta.latitude),h=1/(2*a),l=1-h,c=0,d=a-1,p=s*u.fract(t),f=a*u.clamp(e,h,l),g=u.mod(Math.floor(p-.5),s),E=u.mod(g+1,s),m=u.clamp(Math.floor(f-.5),c,d),v=u.clamp(m+1,c,d),y=u.fract(p-.5),L=u.fract(f-.5),w=R==i||0==R,this.lookupPixels(g,E,m,v,o,w,S))return void(n[r]=(1-y)*(1-L)*S[0]+y*(1-L)*S[1]+(1-y)*L*S[2]+y*L*S[3])},c.prototype.lookupPixels=function(t,e,i,n,r,o,s){var a,h,l,u,c=r.levelNumber,d=r.tileWidth,p=r.tileHeight,f=Math.floor(i/p),g=Math.floor(n/p),E=Math.floor(t/d),m=Math.floor(e/d);return f==g&&f==this.cachedRow&&E==m&&E==this.cachedCol?a=h=l=u=this.cachedImage:f==g&&E==m?(a=this.lookupImage(c,f,E,o),h=l=u=a,this.cachedRow=f,this.cachedCol=E,this.cachedImage=a):(a=this.lookupImage(c,f,E,o),h=this.lookupImage(c,f,m,o),l=this.lookupImage(c,g,E,o),u=this.lookupImage(c,g,m,o)),!!(a&&h&&l&&u)&&(s[0]=a.pixel(t%d,i%p),s[1]=h.pixel(e%d,i%p),s[2]=l.pixel(t%d,n%p),s[3]=u.pixel(e%d,n%p),!0)},c.prototype.lookupImage=function(t,e,i,n){var r=this.tileForLevel(t,e,i),o=r.image();return null==o&&n&&this.retrieveTileImage(r),o},c.prototype.createTile=function(t,e,i,n){var o=this.cachePath+"/"+e.levelNumber+"/"+i+"/"+i+"_"+n+".bil";return new r(t,e,i,n,o,this.imageCache)},c.prototype.assembleTiles=function(t,e,i){if(this.currentTiles=[],this.currentSector.copy(e),this.currentSector.intersection(this.coverageSector),!this.currentSector.isEmpty())for(var n=t.tileDelta.latitude,r=t.tileDelta.longitude,o=l.computeRow(n,this.currentSector.minLatitude),s=l.computeLastRow(n,this.currentSector.maxLatitude),a=l.computeColumn(r,this.currentSector.minLongitude),h=l.computeLastColumn(r,this.currentSector.maxLongitude),u=o;u<=s;u++)for(var c=a;c<=h;c++)this.addTileOrAncestor(t,u,c,i)},c.prototype.addTileOrAncestor=function(t,e,i,n){var r=this.tileForLevel(t.levelNumber,e,i);this.isTileImageInMemory(r)?this.addToCurrentTiles(r):(n&&this.retrieveTileImage(r),t.isFirstLevel()?this.currentTiles.push(r):this.addAncestor(t,e,i,n))},c.prototype.addAncestor=function(t,e,i,n){for(var r=null,o=Math.floor(e/2),s=Math.floor(i/2),a=t.levelNumber-1;a>=0;a--){if(r=this.tileForLevel(a,o,s),this.isTileImageInMemory(r))return void this.addToCurrentTiles(r);o=Math.floor(o/2),s=Math.floor(s/2)}this.addToCurrentTiles(r),n&&this.retrieveTileImage(r)},c.prototype.addToCurrentTiles=function(t){this.currentTiles.push(t)},c.prototype.tileForLevel=function(t,e,i){var n=t+"."+e+"."+i,r=this.tileCache.entryForKey(n);if(r)return r;var o=this.levels.level(t),s=l.computeSector(o,e,i);return r=this.createTile(s,o,e,i),this.tileCache.putEntry(n,r,r.size()),r},c.prototype.isTileImageInMemory=function(t){return this.imageCache.containsKey(t.imagePath)},c.prototype.resourceUrlForTile=function(t){return this.urlBuilder.urlForTile(t,this.retrievalImageFormat)},c.prototype.retrieveTileImage=function(t){if(this.currentRetrievals.indexOf(t.imagePath)<0){var e=this.resourceUrlForTile(t,this.retrievalImageFormat),i=new XMLHttpRequest,n=this;if(!e)return;i.open("GET",e,!0),i.responseType="arraybuffer",i.onreadystatechange=function(){if(4===i.readyState){n.removeFromCurrentRetrievals(t.imagePath);var r=i.getResponseHeader("content-type");if(200===i.status)if(r===n.retrievalImageFormat||"text/plain"===r||"application/octet-stream"===r){s.log(s.LEVEL_INFO,"Elevations retrieval succeeded: "+e),n.loadElevationImage(t,i),n.absentResourceList.unmarkResourceAbsent(t.imagePath);var o=document.createEvent("Event");o.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(o)}else"text/xml"===r?(n.absentResourceList.markResourceAbsent(t.imagePath),s.log(s.LEVEL_WARNING,"Elevations retrieval failed ("+i.statusText+"): "+e+".\n "+String.fromCharCode.apply(null,new Uint8Array(i.response)))):(n.absentResourceList.markResourceAbsent(t.imagePath),s.log(s.LEVEL_WARNING,"Elevations retrieval failed: "+e+". Unexpected content type "+r));else n.absentResourceList.markResourceAbsent(t.imagePath),s.log(s.LEVEL_WARNING,"Elevations retrieval failed ("+i.statusText+"): "+e)}},i.onerror=function(){n.removeFromCurrentRetrievals(t.imagePath),n.absentResourceList.markResourceAbsent(t.imagePath),s.log(s.LEVEL_WARNING,"Elevations retrieval failed: "+e)},i.ontimeout=function(){n.removeFromCurrentRetrievals(t.imagePath),n.absentResourceList.markResourceAbsent(t.imagePath),s.log(s.LEVEL_WARNING,"Elevations retrieval timed out: "+e)},i.send(null),this.currentRetrievals.push(t.imagePath)}},c.prototype.removeFromCurrentRetrievals=function(t){var e=this.currentRetrievals.indexOf(t);e>-1&&this.currentRetrievals.splice(e,1)},c.prototype.loadElevationImage=function(t,e){var i=new n(t.imagePath,t.sector,t.tileWidth,t.tileHeight);"application/bil16"==this.retrievalImageFormat?(i.imageData=new Int16Array(e.response),i.size=2*i.imageData.length):"application/bil32"==this.retrievalImageFormat&&(i.imageData=new Float32Array(e.response),i.size=4*i.imageData.length),i.imageData&&(i.findMinAndMaxElevation(),this.imageCache.putEntry(t.imagePath,i,i.size),this.timestamp=Date.now())},c}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[],r=function(){"use strict";var t=function(t,e){this.maxTrys=t,this.minCheckInterval=e,this.tryAgainInterval=6e4,this.possiblyAbsent={}};return t.prototype.isResourceAbsent=function(t){var e=this.possiblyAbsent[t];if(!e)return!1;if(e.permanent)return!0;var i=Date.now()-e.timeOfLastMark;return i>this.tryAgainInterval?(delete this.possiblyAbsent[t],!1):i<this.minCheckInterval||e.numTrys>this.maxTrys},t.prototype.markResourceAbsent=function(t){var e=this.possiblyAbsent[t];e||(e={timeOfLastMark:Date.now(),numTrys:0},this.possiblyAbsent[t]=e),e.numTrys=e.numTrys+1,e.timeOfLastMark=Date.now()},t.prototype.markResourceAbsentPermanently=function(t){var e=this.possiblyAbsent[t];e||(e={timeOfLastMark:Date.now(),numTrys:0},this.possiblyAbsent[t]=e),e.numTrys=e.numTrys+1,e.timeOfLastMark=Date.now(),e.permanent=!0},t.prototype.unmarkResourceAbsent=function(t){var e=this.possiblyAbsent[t];e&&delete this.possiblyAbsent[t]},t}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(19)],r=function(t,e,i){"use strict";var n=function(i,n,r,o){if(!i||i.length<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationImage","constructor","The specified image path is null, undefined or zero length."));if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationImage","constructor","missingSector"));this.sector=n,this.imagePath=i,this.imageWidth=r,this.imageHeight=o,this.size=this.imageWidth*this.imageHeight};return n.prototype.pixel=function(t,e){return t<0||t>=this.imageWidth?0:e<0||e>=this.imageHeight?0:(e=this.imageHeight-e-1,this.imageData[t+e*this.imageWidth])},n.prototype.elevationAtLocation=function(t,e){var n=this.sector.maxLatitude,r=this.sector.minLongitude,o=this.sector.deltaLatitude(),s=this.sector.deltaLongitude(),a=(this.imageWidth-1)*(e-r)/s,h=(this.imageHeight-1)*(n-t)/o,l=Math.floor(i.clamp(a,0,this.imageWidth-1)),u=Math.floor(i.clamp(l+1,0,this.imageWidth-1)),c=Math.floor(i.clamp(h,0,this.imageHeight-1)),d=Math.floor(i.clamp(c+1,0,this.imageHeight-1)),p=this.imageData,f=p[l+c*this.imageWidth],g=p[u+c*this.imageWidth],E=p[l+d*this.imageWidth],m=p[u+d*this.imageWidth],v=a-l,y=h-c;return(1-v)*(1-y)*f+v*(1-y)*g+(1-v)*y*E+v*y*m},n.prototype.elevationsForGrid=function(n,r,o,s){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationImage","elevationsForSector","missingSector"));if(r<1||o<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationImage","elevationsForSector","The specified number of sample points is less than 1."));if(!s)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationImage","elevationsForSector","missingResult"));var a,h,l,u,c=this.sector.minLatitude,d=this.sector.maxLatitude,p=this.sector.minLongitude,f=this.sector.maxLongitude,g=d-c,E=f-p,m=n.minLatitude,v=n.maxLatitude,y=n.minLongitude,L=n.maxLongitude,w=(v-m)/(r>1?r-1:1),S=(L-y)/(o>1?o-1:1),R=0,T=this.imageData;for(u=0,a=m;u<r;u+=1,a+=w)if(u===r-1&&(a=v),a>=c&&a<=d){var _=(this.imageHeight-1)*(d-a)/g,x=Math.floor(i.clamp(_,0,this.imageHeight-1)),M=Math.floor(i.clamp(x+1,0,this.imageHeight-1)),b=_-x;for(l=0,h=y;l<o;l+=1,h+=S){if(l===o-1&&(h=L),h>=p&&h<=f){var C=(this.imageWidth-1)*(h-p)/E,A=Math.floor(i.clamp(C,0,this.imageWidth-1)),P=Math.floor(i.clamp(A+1,0,this.imageWidth-1)),V=C-A,I=T[A+x*this.imageWidth],D=T[P+x*this.imageWidth],W=T[A+M*this.imageWidth],O=T[P+M*this.imageWidth];s[R]=(1-V)*(1-b)*I+V*(1-b)*D+(1-V)*b*W+V*b*O}R++}}else R+=o},n.prototype.minAndMaxElevationsForSector=function(t){var e=[];if(t)if(t.contains(this.sector))e[0]>this.minElevation&&(e[0]=this.minElevation),e[1]<this.maxElevation&&(e[1]=this.maxElevation);else{var n=this.sector.maxLatitude,r=this.sector.minLongitude,o=this.sector.deltaLatitude(),s=this.sector.deltaLongitude(),a=t.minLatitude,h=t.maxLatitude,l=t.minLongitude,u=t.maxLongitude,c=Math.floor((this.imageHeight-1)*(n-h)/o),d=Math.ceil((this.imageHeight-1)*(n-a)/o),p=Math.floor((this.imageWidth-1)*(l-r)/s),f=Math.ceil((this.imageWidth-1)*(u-r)/s);c=i.clamp(c,0,this.imageHeight-1),d=i.clamp(d,0,this.imageHeight-1),p=i.clamp(p,0,this.imageWidth-1),f=i.clamp(f,0,this.imageWidth-1);for(var g=this.imageData,E=Number.MAX_VALUE,m=-E,v=c;v<=d;v++)for(var y=p;y<=f;y++){var L=g[Math.floor(y+v*this.imageWidth)];E>L&&(E=L),m<L&&(m=L)}e[0]>E&&(e[0]=E),e[1]<m&&(e[1]=m)}else e[0]=this.minElevation,e[1]=this.maxElevation;return e},n.prototype.findMinAndMaxElevation=function(){if(this.imageData&&this.imageData.length>0){this.minElevation=Number.MAX_VALUE,this.maxElevation=-this.minElevation;for(var t=this.imageData,e=this.imageWidth*this.imageHeight,i=0;i<e;i++){var n=t[i];this.minElevation>n&&(this.minElevation=n),this.maxElevation<n&&(this.maxElevation=n)}}else this.minElevation=0,this.maxElevation=0},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(36)],r=function(t,e,i){"use strict";var n=function(n,r,o,s,a,h){if(!a||a.length<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationTile","constructor","The specified image path is null, undefined or zero length."));if(!h)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationTile","constructor","The specified cache is null or undefined."));i.call(this,n,r,o,s),this.imagePath=a,this.memoryCache=h};return n.prototype=Object.create(i.prototype),n.prototype.size=function(){return i.prototype.size.call(this)+this.imagePath.length+8},n.prototype.image=function(){return this.memoryCache.entryForKey(this.imagePath)},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(37),i(9),i(31),i(16),i(43)],r=function(t,e,i,n,r,o){"use strict";var s=function(e,n,r,o){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","constructor","missingSector"));if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","constructor","The specified level is null or undefined."));if(r<0||o<0)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","constructor","The specified row or column is less than zero."));this.sector=e,this.level=n,this.row=r,this.column=o,this.tileWidth=n.tileWidth,this.tileHeight=n.tileHeight,this.texelSize=n.texelSize,this.tileKey=n.levelNumber.toString()+"."+r.toString()+"."+o.toString(),this.extent=null,this.referencePoint=null,this.opacity=1,this.samplePoints=null,this.sampleElevations=null,this.updateTimestamp=null,this.updateVerticalExaggeration=null,this.updateGlobeStateKey=null};return s.prototype.isEqual=function(t){return!!t&&(!!t.tileKey&&this.tileKey==t.tileKey)},s.prototype.size=function(){return 828},s.prototype.distanceTo=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","distanceTo","missingVector"));for(var n,r,o,s=e[0],a=e[1],h=e[2],l=this.samplePoints,u=Number.POSITIVE_INFINITY,c=0,d=l.length;c<d;c+=3)n=s-l[c],r=a-l[c+1],o=h-l[c+2],u=Math.min(u,n*n+r*r+o*o);return Math.sqrt(u)},s.prototype.subdivide=function(e,r){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","subdivide","The specified level is null or undefined."));if(!r)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","subdivide","The specified tile factory is null or undefined."));var o,s,a,h=this.sector.minLatitude,l=this.sector.maxLatitude,u=this.sector.centroidLatitude(),c=this.sector.minLongitude,d=this.sector.maxLongitude,p=this.sector.centroidLongitude(),f=[];return o=2*this.row,s=2*this.column,a=new n(h,u,c,p),f.push(r.createTile(a,e,o,s)),o=2*this.row,s=2*this.column+1,a=new n(h,u,p,d),f.push(r.createTile(a,e,o,s)),o=2*this.row+1,s=2*this.column,a=new n(u,l,c,p),f.push(r.createTile(a,e,o,s)),o=2*this.row+1,s=2*this.column+1,a=new n(u,l,p,d),f.push(r.createTile(a,e,o,s)),f},s.prototype.subdivideToCache=function(e,n,r){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","subdivideToCache","The specified level is null or undefined."));if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","subdivideToCache","The specified tile factory is null or undefined."));
var o=r?r.entryForKey(this.tileKey):null;return o||(o=this.subdivide(e,n),o&&r&&r.putEntry(this.tileKey,o,4*o[0].size())),o},s.prototype.mustSubdivide=function(t,e){var i=t.globe.equatorialRadius*this.texelSize,n=this.distanceTo(t.navigatorState.eyePoint),r=t.navigatorState.pixelSizeAtDistance(n);return i>Math.max(e*r,.5)},s.prototype.update=function(t){var e=t.globe.elevationTimestamp(),i=t.verticalExaggeration,n=t.globeStateKey;this.updateTimestamp==e&&this.updateVerticalExaggeration==i&&this.updateGlobeStateKey==n||(this.doUpdate(t),t.frameStatistics.incrementTileUpdateCount(1),this.updateTimestamp=e,this.updateVerticalExaggeration=i,this.updateGlobeStateKey=n)},s.prototype.doUpdate=function(t){var i=t.globe,n=t.verticalExaggeration,s=i.minAndMaxElevationsForSector(this.sector),a=s?s[0]*n:0,h=s?s[1]*n:0;a==h&&(a=h+10),this.extent||(this.extent=new e),this.extent.setToSector(this.sector,i,a,h),this.samplePoints||(this.sampleElevations=new Float64Array(9),this.samplePoints=new Float64Array(3*this.sampleElevations.length)),o.fillArray(this.sampleElevations,.5*(a+h)),i.computePointsForGrid(this.sector,3,3,this.sampleElevations,r.ZERO,this.samplePoints),this.referencePoint||(this.referencePoint=new r(0,0,0)),i.computePointFromPosition(this.sector.centroidLatitude(),this.sector.centroidLongitude(),0,this.referencePoint)},s.computeRow=function(t,e){var i=Math.floor((e+90)/t);return 90==e&&(i-=1),i},s.computeColumn=function(t,e){var i=Math.floor((e+180)/t);return 180==e&&(i-=1),i},s.computeLastRow=function(t,e){var i=Math.ceil((e+90)/t-1);return e+90<t&&(i=0),i},s.computeLastColumn=function(t,e){var i=Math.ceil((e+180)/t-1);return e+180<t&&(i=0),i},s.computeSector=function(e,r,o){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","computeSector","missingLevel"));if(r<0||o<0)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","computeSector","The specified row or column is less than zero."));var s=e.tileDelta.latitude,a=e.tileDelta.longitude,h=-90+r*s,l=-180+o*a,u=h+s,c=l+a;return new n(h,u,l,c)},s.createTilesForLevel=function(e,r,o){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","createTilesForLevel","missingLevel"));if(!r)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","createTilesForLevel","The specified tile factory is null or undefined"));if(!o)throw new t(i.logMessage(i.LEVEL_SEVERE,"Tile","createTilesForLevel","missingResult"));for(var a,h,l,u=e.tileDelta.latitude,c=e.tileDelta.longitude,d=e.sector,p=s.computeRow(u,d.minLatitude),f=s.computeRow(u,d.maxLatitude),g=s.computeColumn(c,d.minLongitude),E=s.computeColumn(c,d.maxLongitude),m=-90+p*u,v=-180+g*c,y=m,L=p;L<=f;L+=1){h=y+u,a=v;for(var w=g;w<=E;w+=1){l=a+c;var S=new n(y,h,a,l),R=r.createTile(S,e,L,w);o.push(R),a=l}y=h}},s}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(39),i(12),i(9),i(13),i(38),i(14),i(31),i(16),i(19),i(43)],r=function(t,e,i,n,r,o,s,a,h,l,u){"use strict";var c=function(){this.center=new h(0,0,0),this.bottomCenter=new h(-.5,0,0),this.topCenter=new h(.5,0,0),this.r=new h(1,0,0),this.s=new h(0,1,0),this.t=new h(0,0,1),this.radius=Math.sqrt(3),this.tmp1=new h(0,0,0),this.tmp2=new h(0,0,0),this.tmp3=new h(0,0,0),this.scratchElevations=new Float64Array(9),this.scratchPoints=new Float64Array(3*this.scratchElevations.length)};return c.scratchMatrix=r.fromIdentity(),c.prototype.setToPoints=function(e){if(!e||e.length<3)throw new t(n.logMessage(n.LEVEL_SEVERE,"BoundingBox","setToPoints","missingArray"));var i,o,s,a,l,u,c,d,p,f,g,E,m,v,y,L=+Number.MAX_VALUE,w=-Number.MAX_VALUE,S=+Number.MAX_VALUE,R=-Number.MAX_VALUE,T=+Number.MAX_VALUE,_=-Number.MAX_VALUE,x=this.r,M=this.s,b=this.t,C=new h(0,0,0);r.principalAxesFromPoints(e,x,M,b);for(var A=0,P=e.length/3;A<P;A++)C[0]=e[3*A],C[1]=e[3*A+1],C[2]=e[3*A+2],i=C.dot(x),L>i&&(L=i),w<i&&(w=i),o=C.dot(M),S>o&&(S=o),R<o&&(R=o),s=C.dot(b),T>s&&(T=s),_<s&&(_=s);return w===L&&(w=L+1),R===S&&(R=S+1),_===T&&(_=T+1),a=w-L,l=R-S,u=_-T,c=w+L,d=R+S,p=_+T,f=.5*x[0]*a,g=.5*x[1]*a,E=.5*x[2]*a,m=.5*(x[0]*c+M[0]*d+b[0]*p),v=.5*(x[1]*c+M[1]*d+b[1]*p),y=.5*(x[2]*c+M[2]*d+b[2]*p),this.center[0]=m,this.center[1]=v,this.center[2]=y,this.topCenter[0]=m+f,this.topCenter[1]=v+g,this.topCenter[2]=y+E,this.bottomCenter[0]=m-f,this.bottomCenter[1]=v-g,this.bottomCenter[2]=y-E,x.multiply(a),M.multiply(l),b.multiply(u),this.radius=.5*Math.sqrt(a*a+l*l+u*u),this},c.prototype.setToSector=function(e,i,r,o){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"BoundingBox","setToSector","missingSector"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"BoundingBox","setToSector","missingGlobe"));var s=this.scratchElevations,a=this.scratchPoints;u.fillArray(s,o),s[0]=s[2]=s[6]=s[8]=r,i.computePointsForGrid(e,3,3,s,h.ZERO,a);var c=12;this.tmp1.set(a[c],a[c+1],a[c+2]),l.localCoordinateAxesAtPoint(this.tmp1,i,this.r,this.s,this.t);for(var d=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],p=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],f=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],g=0,E=a.length;g<E;g+=3)this.tmp1.set(a[g],a[g+1],a[g+2]),this.adjustExtremes(this.r,d,this.s,p,this.t,f,this.tmp1);d[1]-d[0]<p[1]-p[0]&&this.swapAxes(this.r,d,this.s,p),p[1]-p[0]<f[1]-f[0]&&this.swapAxes(this.s,p,this.t,f),d[1]-d[0]<p[1]-p[0]&&this.swapAxes(this.r,d,this.s,p);var m=d[1]-d[0],v=p[1]-p[0],y=f[1]-f[0],L=d[1]+d[0],w=p[1]+p[0],S=f[1]+f[0],R=.5*(this.r[0]*L+this.s[0]*w+this.t[0]*S),T=.5*(this.r[1]*L+this.s[1]*w+this.t[1]*S),_=.5*(this.r[2]*L+this.s[2]*w+this.t[2]*S),x=.5*this.r[0]*m,M=.5*this.r[1]*m,b=.5*this.r[2]*m;return this.center.set(R,T,_),this.topCenter.set(R+x,T+M,_+b),this.bottomCenter.set(R-x,T-M,_-b),this.r.multiply(m),this.s.multiply(v),this.t.multiply(y),this.radius=.5*Math.sqrt(m*m+v*v+y*y),this},c.prototype.translate=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"BoundingBox","translate","missingVector"));return this.bottomCenter.add(e),this.topCenter.add(e),this.center.add(e),this},c.prototype.distanceTo=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"BoundingBox","distanceTo","missingPoint"));var i=this.center.distanceTo(e)-this.radius;return i>=0?i:-i},c.prototype.effectiveRadius=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"BoundingBox","effectiveRadius","missingPlane"));var i=e.normal;return.5*(l.fabs(this.r.dot(i))+l.fabs(this.s.dot(i))+l.fabs(this.t.dot(i)))},c.prototype.intersectsFrustum=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"BoundingBox","intersectsFrustum","missingFrustum"));return this.tmp1.copy(this.bottomCenter),this.tmp2.copy(this.topCenter),!(this.intersectionPoint(e.near)<0)&&(!(this.intersectionPoint(e.far)<0)&&(!(this.intersectionPoint(e.left)<0)&&(!(this.intersectionPoint(e.right)<0)&&(!(this.intersectionPoint(e.top)<0)&&!(this.intersectionPoint(e.bottom)<0)))))},c.prototype.intersectionPoint=function(t){var e=t.normal,i=.5*(Math.abs(this.s.dot(e))+Math.abs(this.t.dot(e)));return this.intersectsAt(t,i,this.tmp1,this.tmp2)},c.prototype.intersectsAt=function(t,e,i,n){var r=t.dot(i),o=r<=-e,s=t.dot(n),a=s<=-e;if(o&&a)return-1;if(o==a)return 0;this.tmp3.copy(i),this.tmp3.subtract(n);var h=(e+r)/t.normal.dot(this.tmp3);return this.tmp3.copy(n),this.tmp3.subtract(i),this.tmp3.multiply(h),this.tmp3.add(i),o?i.copy(this.tmp3):n.copy(this.tmp3),h},c.prototype.adjustExtremes=function(t,e,i,n,r,o,s){var a=s.dot(t);e[0]>a&&(e[0]=a),e[1]<a&&(e[1]=a);var h=s.dot(i);n[0]>h&&(n[0]=h),n[1]<h&&(n[1]=h);var l=s.dot(r);o[0]>l&&(o[0]=l),o[1]<l&&(o[1]=l)},c.prototype.swapAxes=function(t,e,i,n){t.swap(i);var r=e[0];e[0]=n[0],n[0]=r,r=e[1],e[1]=n[1],n[1]=r},c.prototype.render=function(t){var i=t.currentGlContext,n=c.scratchMatrix,r=t.findAndBindProgram(e);try{n.copy(t.navigatorState.modelviewProjection),n.multiply(this.r[0],this.s[0],this.t[0],this.center[0],this.r[1],this.s[1],this.t[1],this.center[1],this.r[2],this.s[2],this.t[2],this.center[2],0,0,0,1),n.multiplyByTranslation(-.5,-.5,-.5),r.loadModelviewProjection(i,n),i.disable(i.CULL_FACE),i.bindBuffer(i.ARRAY_BUFFER,t.unitCubeBuffer()),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.unitCubeElements()),i.enableVertexAttribArray(r.vertexPointLocation),i.vertexAttribPointer(r.vertexPointLocation,3,i.FLOAT,!1,0,0),r.loadColorComponents(i,0,1,0,.6),i.drawElements(i.LINES,24,i.UNSIGNED_SHORT,72),r.loadColorComponents(i,1,1,1,.3),i.drawElements(i.TRIANGLES,36,i.UNSIGNED_SHORT,0)}finally{i.enable(i.CULL_FACE),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null)}},c}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(8)],r=function(t){"use strict";var e=function(e){t.call(this,"NotYetImplementedError",e);var i;try{throw new Error}catch(t){i=t.stack}this.stack=i};return e.prototype=Object.create(t.prototype),e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(40),i(41),i(9)],r=function(t,e,i,n){"use strict";var r=function(t){var e="attribute vec4 vertexPoint;\nuniform mat4 mvpMatrix;\nvoid main() {gl_Position = mvpMatrix * vertexPoint;}",n="precision mediump float;\nuniform vec4 color;\nvoid main() {gl_FragColor = color;}";i.call(this,t,e,n),this.vertexPointLocation=this.attributeLocation(t,"vertexPoint"),this.mvpMatrixLocation=this.uniformLocation(t,"mvpMatrix"),this.colorLocation=this.uniformLocation(t,"color")};return r.key="WorldWindGpuBasicProgram",r.prototype=Object.create(i.prototype),r.prototype.loadModelviewProjection=function(e,i){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"BasicProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(e,i,this.mvpMatrixLocation)},r.prototype.loadColor=function(e,i){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"BasicProgram","loadColor","missingColor"));this.loadUniformColor(e,i,this.colorLocation)},r.prototype.loadColorComponents=function(t,e,i,n,r){this.loadUniformColorComponents(t,e,i,n,r,this.colorLocation)},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(9)],r=function(t){"use strict";var e=function(t,e,i,n){this.red=t,this.green=e,this.blue=i,this.alpha=n};return e.WHITE=new e(1,1,1,1),e.BLACK=new e(0,0,0,1),e.RED=new e(1,0,0,1),e.GREEN=new e(0,1,0,1),e.BLUE=new e(0,0,1,1),e.CYAN=new e(0,1,1,1),e.YELLOW=new e(1,1,0,1),e.MAGENTA=new e(1,0,1,1),e.LIGHT_GRAY=new e(.75,.75,.75,1),e.MEDIUM_GRAY=new e(.5,.5,.5,1),e.DARK_GRAY=new e(.25,.25,.25,1),e.TRANSPARENT=new e(0,0,0,0),e.prototype.set=function(t,e,i,n){return this.red=t,this.green=e,this.blue=i,this.alpha=n,this},e.prototype.copy=function(e){if(!e)throw new ArgumentError(t.logMessage(t.LEVEL_SEVERE,"Color","copy","missingColor"));return this.red=e.red,this.green=e.green,this.blue=e.blue,this.alpha=e.alpha,this},e.prototype.clone=function(){return new e(this.red,this.green,this.blue,this.alpha)},e.prototype.premultipliedComponents=function(t){var e=this.alpha;return t[0]=this.red*e,t[1]=this.green*e,t[2]=this.blue*e,t[3]=e,t},e.colorFromByteArray=function(t){return new e(t[0]/255,t[1]/255,t[2]/255,t[3]/255)},e.colorFromBytes=function(t,i,n,r){return new e(t/255,i/255,n/255,r/255)},e.colorFromHex=function(t){var i=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16),o=parseInt(t.substring(6,8),16);return e.colorFromBytes(i,n,r,o)},e.colorFromKmlHex=function(t){return t=t.split("").reverse().join(""),e.colorFromHex(t)},e.prototype.nextColor=function(){var t=Math.round(255*this.red),e=Math.round(255*this.green),i=Math.round(255*this.blue);return t<255?this.red=(t+1)/255:e<255?(this.red=0,this.green=(e+1)/255):i<255?(this.red=0,this.green=0,this.blue=(i+1)/255):(this.red=1/255,this.green=0,this.blue=0),this},e.prototype.equals=function(t){var e=Math.round(255*this.red),i=Math.round(255*this.green),n=Math.round(255*this.blue),r=Math.round(255*this.alpha),o=Math.round(255*t.red),s=Math.round(255*t.green),a=Math.round(255*t.blue),h=Math.round(255*t.alpha);return e===o&&i===s&&n===a&&r===h},e.prototype.equalsBytes=function(t){var e=Math.round(255*this.red),i=Math.round(255*this.green),n=Math.round(255*this.blue),r=Math.round(255*this.alpha);return e===t[0]&&i===t[1]&&n===t[2]&&r===t[3]},e.prototype.toByteString=function(){var t=Math.round(255*this.red),e=Math.round(255*this.green),i=Math.round(255*this.blue),n=Math.round(255*this.alpha);return"("+t+","+e+","+i+","+n+")"},e.prototype.toHexString=function(t){var e=Math.ceil(255*this.red).toString(16),i=Math.ceil(255*this.green).toString(16),n=Math.ceil(255*this.blue).toString(16),r=Math.ceil(255*this.alpha).toString(16),o="#";return o+=e.length<2?"0"+e:e,o+=i.length<2?"0"+i:i,o+=n.length<2?"0"+n:n,t&&(o+=r.length<2?"0"+r:r),o},e.prototype.toRGBAString=function(){var t=Math.floor(255*this.red),e=Math.floor(255*this.green),i=Math.floor(255*this.blue);return"rgba("+t+" ,"+e+" ,"+i+" ,"+this.alpha+")"},e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(40),i(42),i(9)],r=function(t,e,i,n){"use strict";var r=function(e,r,o,s){if(!r||!o)throw new t(n.logMessage(n.LEVEL_SEVERE,"GpuProgram","constructor","The specified shader source is null or undefined."));var a,h,l;try{h=new i(e,e.VERTEX_SHADER,r),l=new i(e,e.FRAGMENT_SHADER,o)}catch(t){throw h&&h.dispose(e),l&&l.dispose(e),t}if(a=e.createProgram(),!a)throw new t(n.logMessage(n.LEVEL_SEVERE,"GpuProgram","constructor","Unable to create shader program."));if(e.attachShader(a,h.shaderId),e.attachShader(a,l.shaderId),s)for(var u=0,c=s.length;u<c;u++)e.bindAttribLocation(a,u,s[u]);if(!this.link(e,a)){var d=e.getProgramInfoLog(a);throw e.detachShader(a,h.shaderId),e.detachShader(a,l.shaderId),e.deleteProgram(a),h.dispose(e),l.dispose(e),new t(n.logMessage(n.LEVEL_SEVERE,"GpuProgram","constructor","Unable to link shader program: "+d))}this.programId=a,this.attributeLocations={},this.uniformLocations={},this.vertexShader=h,this.fragmentShader=l,this.size=r.length+o.length,this.scratchArray=new Float32Array(16)};return r.prototype.dispose=function(t){this.programId&&(this.vertexShader&&t.detachShader(this.programId,this.vertexShader.shaderId),this.fragmentShader&&t.detachShader(this.programId,this.fragmentShader.shaderId),t.deleteProgram(this.programId),delete this.programId),this.vertexShader&&(this.vertexShader.dispose(t),delete this.vertexShader),this.fragmentShader&&(this.fragmentShader.dispose(t),delete this.fragmentShader),this.attributeLocations={},this.uniformLocations={}},r.prototype.attributeLocation=function(e,i){if(!i||0==i.length)throw new t(n.logMessage(n.LEVEL_SEVERE,"GpuProgram","attributeLocation","The specified attribute name is null, undefined or empty."));var r=this.attributeLocations[i];return r||(r=e.getAttribLocation(this.programId,i),this.attributeLocations[i]=r),r},r.prototype.uniformLocation=function(e,i){if(!i||0==i.length)throw new t(n.logMessage(n.LEVEL_SEVERE,"GpuProgram","uniformLocation","The specified uniform name is null, undefined or empty."));var r=this.uniformLocations[i];return r||(r=e.getUniformLocation(this.programId,i),this.uniformLocations[i]=r),r},r.prototype.link=function(t,e){return t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS)},r.prototype.loadUniformMatrix=function(e,i,r){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GpuProgram","loadUniformMatrix","missingMatrix"));var o=i.columnMajorComponents(this.scratchArray);e.uniformMatrix4fv(r,!1,o)},r.prototype.loadUniformColor=function(e,i,r){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GpuProgram","loadUniformColor","missingColor"));var o=i.premultipliedComponents(this.scratchArray);e.uniform4f(r,o[0],o[1],o[2],o[3])},r.prototype.loadUniformColorComponents=function(t,e,i,n,r,o){t.uniform4f(o,e*r,i*r,n*r,r)},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9)],r=function(t,e){"use strict";var i=function(i,n,r){if(n!==i.VERTEX_SHADER&&n!==i.FRAGMENT_SHADER)throw new t(e.logMessage(e.LEVEL_SEVERE,"GpuShader","constructor","The specified shader type is unrecognized."));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"GpuShader","constructor","The specified shader source is null or undefined."));var o=i.createShader(n);if(!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"GpuShader","constructor","Unable to create shader of type "+(n==i.VERTEX_SHADER?"VERTEX_SHADER.":"FRAGMENT_SHADER.")));if(!this.compile(i,o,n,r)){var s=i.getShaderInfoLog(o);throw i.deleteShader(o),new t(e.logMessage(e.LEVEL_SEVERE,"GpuShader","constructor","Unable to compile shader: "+s))}this.shaderId=o};return i.prototype.compile=function(t,e,i,n){return t.shaderSource(e,n),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)},i.prototype.dispose=function(t){this.shaderId&&(t.deleteShader(this.shaderId),delete this.shaderId)},i}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(15),i(9),i(20),i(16)],r=function(t,e,i,n,r){"use strict";var o={latLonRegex:/^(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)$/,suffixForMimeType:function(t){return"image/png"===t?"png":"image/jpeg"===t?"jpg":"application/bil16"===t?"bil":"application/bil32"===t?"bil":null},currentUrlSansFilePart:function(){for(var t=window.location.protocol,e=window.location.host,i=window.location.pathname,n=i.split("/"),r="",o=0,s=n.length;o<s-1;o++)n[o].length>0&&(r=r+"/"+n[o]);return t+"//"+e+r},worldwindlibLocation:function(){for(var t=document.getElementsByTagName("script"),e="/worldwind.",i=0;i<t.length;i++){var n=t[i].src.indexOf(e);if(n>=0)return t[i].src.substring(0,n)+"/"}return null},urlPath:function(t){if(!t)return"";for(var e=t.split("/"),i="",n=0,r=e.length;n<r;n++){var o=e[n];o&&0!==o.length&&o.indexOf(":")==-1&&"."!==o&&".."!==o&&"null"!==o&&"undefined"!==o&&(0!==i.length&&(i+="/"),i+=o)}return i},fillArray:function(t,e){if(t)for(var i=0,n=t.length;i<n;i++)t[i]=e},multiplyArray:function(t,e){if(t)for(var i=0,n=t.length;i<n;i++)t[i]*=e},jsonpCounter:0,jsonp:function(t,e,i){var n="gov_nasa_worldwind_jsonp_"+o.jsonpCounter++;window[n]=function(t){delete window[n],i(t)};var r=t+(t.indexOf("?")===-1?"?":"&");r+=e+"="+n;var s=document.createElement("script");s.async=!0,s.src=r;var a=document.getElementsByTagName("head")[0],h=function(){s.onload=void 0,s.onerror=void 0,a.removeChild(s)};s.onload=h,s.onerror=h,a.appendChild(s)},arrayEquals:function(t,e){return t.length==e.length&&t.every(function(t,i){return t===e[i]||t.equals&&t.equals(e[i])})},transformToBoolean:function(t){return 0!=t&&"0"!=t&&"false"!=t&&Boolean(t)},clone:function(t){var e,i={},n=Object.keys(t);for(e=0;e<n.length;e++)i[n[e]]=t[n[e]];return i},guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},date:function(t){return new Date(t)}};return o}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(45),i(18),i(9)],r=function(t,e,i,n){"use strict";var r=function(r,o,s,a,h){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"LevelSet","constructor","missingSector"));if(!o)throw new t(n.logMessage(n.LEVEL_SEVERE,"LevelSet","constructor","The specified level zero delta is null or undefined"));if(o.latitude<=0||o.longitude<=0)throw new t(n.logMessage(n.LEVEL_SEVERE,"LevelSet","constructor","The specified level zero delta is less than or equal to zero."));if(s<1)throw new t(n.logMessage(n.LEVEL_SEVERE,"LevelSet","constructor","The specified number of levels is less than one."));if(a<1||h<1)throw new t(n.logMessage(n.LEVEL_SEVERE,"LevelSet","constructor","The specified tile width or tile height is less than one."));this.sector=r,this.levelZeroDelta=o,this.numLevels=s,this.tileWidth=a,this.tileHeight=h,this.levels=[];for(var l=0;l<s;l+=1){var u=Math.pow(2,l),c=o.latitude/u,d=o.longitude/u,p=new i(c,d),f=new e(l,p,this);this.levels[l]=f}};return r.prototype.level=function(t){return t<0||t>=this.levels.length?null:this.levels[t]},r.prototype.levelForTexelSize=function(t){var e=this.lastLevel();if(e.texelSize>=t)return e;for(var i=0,n=this.levels.length;i<n;i+=1){var r=this.levels[i];if(r.texelSize<=t)return r}return e},r.prototype.firstLevel=function(){return this.levels[0]},r.prototype.lastLevel=function(){return this.levels[this.levels.length-1]},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(7),i(18),i(9)],r=function(t,e,i,n){"use strict";var r=function(i,r,o){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Level","constructor","The specified tile delta is null or undefined"));if(!o)throw new e(n.logMessage(n.LEVEL_SEVERE,"Level","constructor","The specified parent level set is null or undefined"));this.levelNumber=i,this.tileDelta=r,this.parent=o,this.texelSize=r.latitude*t.DEGREES_TO_RADIANS/o.tileHeight,this.tileWidth=o.tileWidth,this.tileHeight=o.tileHeight,this.sector=o.sector};return r.prototype.isFirstLevel=function(){return this.parent.firstLevel()==this},r.prototype.isLastLevel=function(){return this.parent.lastLevel()==this},r.prototype.previousLevel=function(){return this.parent.level(this.levelNumber-1)},r.prototype.nextLevel=function(){return this.parent.level(this.levelNumber+1)},r.prototype.compare=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Level","compare","The specified level is null or undefined"));return this.levelNumber<t.levelNumber?-1:this.levelNumber>t.levelNumber?1:0},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9)],r=function(t,e){"use strict";var i=function(i,n){if(!i||i<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","constructor","The specified capacity is undefined, zero or negative"));if(!n||n>=i||n<0)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","constructor","The specified low-water value is undefined, greater than or equal to the capacity, or less than 1"));this._capacity=i,this._lowWater=n,this.usedCapacity=0,this.freeCapacity=i,this.entries={},this.listeners=[]};return Object.defineProperties(i.prototype,{capacity:{get:function(){return this._capacity},set:function(i){if(!i||i<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","capacity","Specified cache capacity is undefined, 0 or negative."));var n=this._capacity;this._capacity=i,this._capacity<=this.lowWater&&(this._lowWater=.85*this._capacity),this._capacity<n&&this.makeSpace(0)}},lowWater:{get:function(){return this._lowWater},set:function(i){if(!i||i>=this._capacity||i<0)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","lowWater","Specified cache low-water value is undefined, negative or not less than the current capacity."));this._lowWater=i}}}),i.prototype.entryForKey=function(t){if(!t)return null;var e=this.entries[t];return e?(e.lastUsed=Date.now(),e.entry):null},i.prototype.putEntry=function(i,n,r){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","putEntry","missingKey."));if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","putEntry","missingEntry."));if(r<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","putEntry","The specified entry size is less than 1."));var o,s=this.entries[i];s&&this.removeEntry(i),this.usedCapacity+r>this._capacity&&this.makeSpace(r),this.usedCapacity+=r,this.freeCapacity=this._capacity-this.usedCapacity,o={key:i,entry:n,size:r,lastUsed:Date.now()},this.entries[i]=o},i.prototype.clear=function(t){if(t)for(var e in this.entries)this.entries.hasOwnProperty(e)&&this.removeCacheEntry(e);this.entries={},this.freeCapacity=this._capacity,this.usedCapacity=0},i.prototype.removeEntry=function(t){if(t){var e=this.entries[t];e&&this.removeCacheEntry(e)}},i.prototype.removeCacheEntry=function(t){delete this.entries[t.key],this.usedCapacity-=t.size,this.freeCapacity=this._capacity-this.usedCapacity;for(var e=0,i=this.listeners.length;e<i;e++)try{this.listeners[e].entryRemoved(t.key,t.entry)}catch(i){this.listeners[e].removalError(i,t.key,t.entry)}},i.prototype.containsKey=function(t){return t&&this.entries[t]},i.prototype.addCacheListener=function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","addCacheListener","missingListener"));if("function"!=typeof i.entryRemoved||"function"!=typeof i.removalError)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","addCacheListener","The specified listener does not implement the required functions."));this.listeners.push(i)},i.prototype.removeCacheListener=function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","removeCacheListener","missingListener"));var n=this.listeners.indexOf(i);n>-1&&this.listeners.splice(n,1)},i.prototype.makeSpace=function(t){var e=[];this.usedCapacity;for(var i in this.entries)this.entries.hasOwnProperty(i)&&e.push(this.entries[i]);e.sort(function(t,e){return t.lastUsed-e.lastUsed});for(var n=0,r=e.length;n<r&&(this.usedCapacity>this._lowWater||this.freeCapacity<t);n++)this.removeCacheEntry(e[n])},i}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9)],r=function(t,e){"use strict";var i=function(i,n,r,o,s){if(!i||0===i.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","constructor","The WMS service address is missing."));if(!n||0===n.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","constructor","The WMS layer names are not specified."));this.serviceAddress=i,this.layerNames=n,this.styleNames=r?r:"",this.transparent=!0,this.wmsVersion=o&&o.length>0?o:"1.3.0",this.isWms130OrGreater=this.wmsVersion>="1.3.0",this.crs="EPSG:4326",this.timeString=s};return i.prototype.urlForTile=function(n,r){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","urlForTile","missingTile"));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","urlForTile","The image format is null or undefined."));var o=n.sector,s=i.fixGetMapString(this.serviceAddress);return s.search(/service=wms/i)<0&&(s+="service=WMS"),s+="&request=GetMap",s=s+"&version="+this.wmsVersion,s=s+"&transparent="+(this.transparent?"TRUE":"FALSE"),s=s+"&layers="+this.layerNames,s=s+"&styles="+this.styleNames,s=s+"&format="+r,s=s+"&width="+n.tileWidth,s=s+"&height="+n.tileHeight,this.timeString&&(s=s+"&time="+this.timeString),this.isWms130OrGreater?(s=s+"&crs="+this.crs,s+="&bbox=","CRS:84"===this.crs?(s=s+o.minLongitude+","+o.minLatitude+",",s=s+o.maxLongitude+","+o.maxLatitude):(s=s+o.minLatitude+","+o.minLongitude+",",s=s+o.maxLatitude+","+o.maxLongitude)):(s=s+"&srs="+this.crs,s+="&bbox=",s=s+o.minLongitude+","+o.minLatitude+",",s=s+o.maxLongitude+","+o.maxLatitude),s=s.replace(" ","%20")},i.fixGetMapString=function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","fixGetMapString","The specified service address is null or undefined."));var n=i.indexOf("?");return n<0?i+="?":n!==i.length-1&&(n=i.search(/&$/),n<0&&(i+="&")),i},i}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[],r=function(){"use strict";var t=function(){this.frameCount=0,this.frameTimeCumulative=0,this.frameTimeBase=0,this.frameTimeExtremes=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],this.frameTime=0,this.tessellationTime=0,this.layerRenderingTime=0,this.orderedRenderingTime=0,this.terrainTileCount=0,this.imageTileCount=0,this.renderedTileCount=0,this.tileUpdateCount=0,this.textureLoadCount=0,this.vboLoadCount=0,this.frameTimeAverage=0,this.frameRateAverage=0,this.frameTimeMin=0,this.frameTimeMax=0};return t.prototype.beginFrame=function(){this.frameTime=Date.now(),this.tessellationTime=0,this.layerRenderingTime=0,this.orderedRenderingTime=0,this.terrainTileCount=0,this.imageTileCount=0,this.renderedTileCount=0,this.tileUpdateCount=0,this.textureLoadCount=0,this.vboLoadCount=0,++this.frameCount},t.prototype.endFrame=function(){var t=Date.now();this.frameTime=t-this.frameTime,this.frameTimeCumulative+=this.frameTime,this.frameTimeExtremes[0]=Math.min(this.frameTimeExtremes[0],this.frameTime),this.frameTimeExtremes[1]=Math.max(this.frameTimeExtremes[1],this.frameTime),t-this.frameTimeBase>2e3&&(this.frameTimeAverage=this.frameTimeCumulative/this.frameCount,this.frameRateAverage=1e3*this.frameCount/(t-this.frameTimeBase),this.frameTimeMin=this.frameTimeExtremes[0],this.frameTimeMax=this.frameTimeExtremes[1],this.frameCount=0,this.frameTimeCumulative=0,this.frameTimeBase=t,this.frameTimeExtremes=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY])},t.prototype.incrementRenderedTileCount=function(t){this.renderedTileCount+=t},t.prototype.setTerrainTileCount=function(t){this.terrainTileCount=t},t.prototype.incrementImageTileCount=function(t){this.imageTileCount=t},t.prototype.incrementTileUpdateCount=function(t){this.tileUpdateCount+=t},t.prototype.incrementTextureLoadCount=function(t){this.textureLoadCount+=t},t.prototype.incrementVboLoadCount=function(t){this.vboLoadCount+=t},t}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(7),i(37),i(32),i(15),i(18),i(9),i(17),i(50),i(31),i(52),i(16),i(19)],r=function(t,e,i,n,r,o,s,a,h,l,u,c,d){"use strict";var p=function(t,i){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","constructor","Elevation model is null or undefined."));this.elevationModel=t,this.equatorialRadius=6378137,this.polarRadius=6356752.3,this.eccentricitySquared=.00669437999013,this.tessellator=new u,this._projection=i||new h,this._offset=0,this.offsetVector=new c(0,0,0),this.id=++p.idPool,this._stateKey="globe "+this.id.toString()+" "};return p.idPool=0,Object.defineProperties(p.prototype,{stateKey:{get:function(){return this._stateKey+this.elevationModel.stateKey+"offset "+this.offset.toString()+" "+this.projection.stateKey}},continuous:{get:function(){return this.projection.continuous}},projection:{get:function(){return this._projection},set:function(t){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","projection","missingProjection"));this.projection!=t&&(this.tessellator=new u),this._projection=t}},projectionLimits:{get:function(){return this._projection.projectionLimits}},offset:{get:function(){return this._offset},set:function(t){this._offset=t,this.offsetVector[0]=2*t*Math.PI*this.equatorialRadius}}}),p.prototype.is2D=function(){return this.projection.is2D},p.prototype.computePointFromPosition=function(t,i,n,r){if(!r)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","computePointFromPosition","missingResult"));return this.projection.geographicToCartesian(this,t,i,n,this.offsetVector,r)},p.prototype.computePointFromLocation=function(t,i,n){if(!n)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","computePointFromLocation","missingResult"));return this.computePointFromPosition(t,i,0,n)},p.prototype.computePointsForGrid=function(t,i,n,r,o,a){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","computePointsFromPositions","missingSector"));if(i<1||n<1)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","computePointsFromPositions","Number of latitude or longitude locations is less than one."));var h=i*n;if(!r||r.length<h)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","computePointsFromPositions","Elevations array is null, undefined or insufficient length."));if(!a||a.length<h)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","computePointsFromPositions","Result array is null, undefined or insufficient length."));return this.projection.geographicToCartesianGrid(this,t,i,n,r,o,this.offsetVector,a)},p.prototype.computePositionFromPoint=function(t,i,n,r){if(!r)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","computePositionFromPoint","missingResult"));return this.projection.cartesianToGeographic(this,t,i,n,this.offsetVector,r),this.continuous&&(r.longitude<-180?r.longitude+=360:r.longitude>180&&(r.longitude-=360)),r},p.prototype.radiusAt=function(e,i){var n=Math.sin(e*t.DEGREES_TO_RADIANS),r=this.equatorialRadius/Math.sqrt(1-this.eccentricitySquared*n*n);return r*Math.sqrt(1+(this.eccentricitySquared*this.eccentricitySquared-2*this.eccentricitySquared)*n*n)},p.prototype.surfaceNormalAtLocation=function(i,n,r){if(!r)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","surfaceNormalAtLocation","missingResult"));if(this.is2D())return r[0]=0,r[1]=0,r[2]=1,r;var o=Math.cos(i*t.DEGREES_TO_RADIANS),a=Math.cos(n*t.DEGREES_TO_RADIANS),h=Math.sin(i*t.DEGREES_TO_RADIANS),l=Math.sin(n*t.DEGREES_TO_RADIANS),u=this.equatorialRadius*this.equatorialRadius,c=this.polarRadius*this.polarRadius;return r[0]=o*l/u,r[1]=(1-this.eccentricitySquared)*h/c,
r[2]=o*a/u,r.normalize()},p.prototype.surfaceNormalAtPoint=function(t,i,n,r){if(!r)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","surfaceNormalAtPoint","missingResult"));if(this.projection.surfaceNormalAtPoint)return this.projection.surfaceNormalAtPoint(this,t,i,n,r);if(this.is2D())return r[0]=0,r[1]=0,r[2]=1,r;var o=this.equatorialRadius*this.equatorialRadius,a=this.polarRadius*this.polarRadius;return r[0]=t/o,r[1]=i/a,r[2]=n/o,r.normalize()},p.prototype.northTangentAtLocation=function(t,i,n){if(!n)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","northTangentAtLocation","missingResult"));return this.projection.northTangentAtLocation(this,t,i,n)},p.prototype.northTangentAtPoint=function(t,i,n,r){if(!r)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","northTangentAtPoint","missingResult"));return this.projection.northTangentAtPoint(this,t,i,n,this.offsetVector,r)},p.prototype.intersectsFrustum=function(t){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","intersectsFrustum","missingFrustum"));if(this.is2D()){var n=new i;return n.setToSector(l.FULL_SPHERE,this,this.elevationModel.minElevation,this.elevationModel.maxElevation),n.intersectsFrustum(t)}return!(t.far.distance<=this.equatorialRadius)&&(!(t.left.distance<=this.equatorialRadius)&&(!(t.right.distance<=this.equatorialRadius)&&(!(t.top.distance<=this.equatorialRadius)&&(!(t.bottom.distance<=this.equatorialRadius)&&!(t.near.distance<=this.equatorialRadius)))))},p.prototype.intersectsLine=function(t,i){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","intersectWithRay","missingLine"));if(!i)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","intersectsLine","missingResult"));if(this.is2D()){var n,r=t.direction[0],o=t.direction[1],a=t.direction[2],h=t.origin[0],l=t.origin[1],u=t.origin[2];return(0!=a||0==u)&&(n=-u/a,!(n<0)&&(i[0]=h+r*n,i[1]=l+o*n,i[2]=u+a*n,!0))}return d.computeEllipsoidalGlobeIntersection(t,this.equatorialRadius,this.polarRadius,i)},p.prototype.elevationTimestamp=function(){return this.elevationModel.timestamp},p.prototype.minElevation=function(){return this.elevationModel.minElevation},p.prototype.maxElevation=function(){return this.elevationModel.maxElevation},p.prototype.minAndMaxElevationsForSector=function(t){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","minAndMaxElevationsForSector","missingSector"));return this.elevationModel.minAndMaxElevationsForSector(t)},p.prototype.elevationAtLocation=function(t,e){return this.elevationModel.elevationAtLocation(t,e)},p.prototype.elevationsForGrid=function(t,i,n,r,o){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","elevationsForSector","missingSector"));if(i<=0||n<=0)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","elevationsForSector","numLat or numLon is less than 1"));if(!o||o.length<i*n)throw new e(s.logMessage(s.LEVEL_SEVERE,"Globe","elevationsForSector","missingArray"));return this.elevationModel.elevationsForGrid(t,i,n,r,o)},p}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(7),i(51),i(9),i(17),i(16),i(19)],r=function(t,e,i,n,r,o,s){"use strict";var a=function(){i.call(this,"WGS84",!1,null),this.is2D=!1,this.scratchPosition=new r(0,0,0)};return a.prototype=Object.create(i.prototype),Object.defineProperties(a.prototype,{stateKey:{get:function(){return"projection wgs84 "}}}),a.prototype.geographicToCartesian=function(i,r,o,s,a,h){if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionWgs84","geographicToCartesian","missingGlobe"));var l=Math.cos(r*t.DEGREES_TO_RADIANS),u=Math.sin(r*t.DEGREES_TO_RADIANS),c=Math.cos(o*t.DEGREES_TO_RADIANS),d=Math.sin(o*t.DEGREES_TO_RADIANS),p=i.equatorialRadius/Math.sqrt(1-i.eccentricitySquared*u*u);return h[0]=(p+s)*l*d,h[1]=(p*(1-i.eccentricitySquared)+s)*u,h[2]=(p+s)*l*c,h},a.prototype.geographicToCartesianGrid=function(i,r,s,a,h,l,u,c){if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionWgs84","geographicToCartesianGrid","missingGlobe"));var d,p,f,g,E,m,v,y,L=r.minLatitude*t.DEGREES_TO_RADIANS,w=r.maxLatitude*t.DEGREES_TO_RADIANS,S=r.minLongitude*t.DEGREES_TO_RADIANS,R=r.maxLongitude*t.DEGREES_TO_RADIANS,T=(w-L)/(s>1?s-1:1),_=(R-S)/(a>1?a-1:1),x=l?l:new o(0,0,0),M=0,b=0,C=new Float64Array(a),A=new Float64Array(a);for(p=0,g=S;p<a;p++,g+=_)p===a-1&&(g=R),C[p]=Math.cos(g),A[p]=Math.sin(g);for(d=0,f=L;d<s;d++,f+=T)for(d===s-1&&(f=w),v=Math.cos(f),y=Math.sin(f),E=i.equatorialRadius/Math.sqrt(1-i.eccentricitySquared*y*y),p=0;p<a;p++)m=h[M++],c[b++]=(E+m)*v*A[p]-x[0],c[b++]=(E*(1-i.eccentricitySquared)+m)*y-x[1],c[b++]=(E+m)*v*C[p]-x[2];return c},a.prototype.cartesianToGeographic=function(i,r,o,a,h,l){if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionWgs84","cartesianToGeographic","missingGlobe"));var u,c,d,p,f,g,E,m,v,y,L,w,S,R,T,_=a,x=r,M=o,b=_*_+x*x,C=Math.sqrt(b),A=i.equatorialRadius,P=1/(A*A),V=i.eccentricitySquared,I=V*V,D=b*P,W=M*M*(1-V)*P,O=(D+W-I)/6,N=8*O*O*O+I*D*W;return N>0||0!=W?(N>0?(p=Math.sqrt(N),f=Math.sqrt(I*D*W),N>10*V?(g=s.cbrt((p+f)*(p+f)),d=O+.5*g+2*O*O/g):d=O+.5*s.cbrt((p+f)*(p+f))+.5*s.cbrt((p-f)*(p-f))):(p=Math.sqrt(-N),f=Math.sqrt(-8*O*O*O),g=Math.sqrt(I*D*W),E=2*Math.atan2(g,p+f)/3,d=-4*O*Math.sin(E)*Math.cos(Math.PI/6+E)),m=Math.sqrt(d*d+I*W),v=V*(d+m-W)/(2*m),y=(d+m)/(Math.sqrt(v*v+d+m)+v),L=y*C/(y+V),w=Math.sqrt(L*L+M*M),u=(y+V-1)*w/y,c=2*Math.atan2(M,w+L)):(p=Math.sqrt(1-V),f=Math.sqrt(V-D),S=Math.sqrt(V),u=-A*p*f/S,c=f/(S*f+p*Math.sqrt(D))),T=Math.sqrt(2),R=(T-1)*x<C+_?2*Math.atan2(x,C+_):C+x<(T+1)*_?.5*-Math.PI+2*Math.atan2(_,C-x):.5*Math.PI-2*Math.atan2(_,C+x),l.latitude=t.RADIANS_TO_DEGREES*c,l.longitude=t.RADIANS_TO_DEGREES*R,l.altitude=u,l},a.prototype.northTangentAtLocation=function(e,i,n,r){var o=Math.cos(i*t.DEGREES_TO_RADIANS),s=Math.cos(n*t.DEGREES_TO_RADIANS),a=Math.sin(i*t.DEGREES_TO_RADIANS),h=Math.sin(n*t.DEGREES_TO_RADIANS);return r[0]=-a*h,r[1]=o,r[2]=-a*s,r},a.prototype.northTangentAtPoint=function(t,e,i,n,r,s){return this.cartesianToGeographic(t,e,i,n,o.ZERO,this.scratchPosition),this.northTangentAtLocation(t,this.scratchPosition.latitude,this.scratchPosition.longitude,s)},a.prototype.surfaceNormalAtPoint=function(t,i,r,o,s){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionWgs84","surfaceNormalAtPoint","missingGlobe"));var a=t.equatorialRadius*t.equatorialRadius,h=t.polarRadius*t.polarRadius;return s[0]=i/a,s[1]=r/h,s[2]=o/a,s.normalize()},a}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(31),i(25)],r=function(t,e,i,n){"use strict";var r=function(t,e,i){this.displayName=t||"Geographic Projection",this.continuous=e,this.projectionLimits=i,this.is2D=!0};return r.prototype.geographicToCartesian=function(t,i,r,o,s,a){throw new n(e.logMessage(e.LEVEL_SEVERE,"GeographicProjection","geographicToCartesian","abstractInvocation"))},r.prototype.geographicToCartesianGrid=function(t,i,r,o,s,a,h,l){throw new n(e.logMessage(e.LEVEL_SEVERE,"GeographicProjection","geographicToCartesianGrid","abstractInvocation"))},r.prototype.cartesianToGeographic=function(t,i,r,o,s,a){throw new n(e.logMessage(e.LEVEL_SEVERE,"GeographicProjection","cartesianToGeographic","abstractInvocation"))},r.prototype.northTangentAtLocation=function(i,n,r,o){if(!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"ProjectionEquirectangular","northTangentAtLocation","missingResult"));return o[0]=0,o[1]=1,o[2]=0,o},r.prototype.northTangentAtPoint=function(i,n,r,o,s,a){if(!a)throw new t(e.logMessage(e.LEVEL_SEVERE,"ProjectionEquirectangular","northTangentAtPoint","missingResult"));return a[0]=0,a[1]=1,a[2]=0,a},r.prototype.surfaceNormalAtPoint=function(i,n,r,o,s){if(!s)throw new t(e.logMessage(e.LEVEL_SEVERE,"GeographicProjection","surfaceNormalAtPoint","missingResult"));return s[0]=0,s[1]=0,s[2]=1,s},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(39),i(49),i(41),i(45),i(44),i(18),i(9),i(13),i(46),i(23),i(38),i(53),i(17),i(20),i(31),i(54),i(55),i(56),i(36),i(19),i(43)],r=function(t,e,i,n,r,o,s,a,h,l,u,c,d,p,f,g,E,m,v,y,L,w){"use strict";var S=function(){this.numRowsTilesInTopLevel=4,this.numColumnsTilesInTopLevel=8,this.maximumSubdivisionDepth=15,this.tileWidth=32,this.tileHeight=32,this.detailControl=40,this.levels=new o(g.FULL_SPHERE,new s(180/this.numRowsTilesInTopLevel,360/this.numColumnsTilesInTopLevel),this.maximumSubdivisionDepth,this.tileWidth,this.tileHeight),this.topLevelTiles={},this.currentTiles=new v(this),this.tileCache=new l(5e6,4e6),this.elevationTimestamp=void 0,this.lastModelViewProjection=void 0,this.vertexPointLocation=-1,this.vertexTexCoordLocation=-1,this.texCoords=null,this.texCoordVboCacheKey="global_tex_coords",this.indices=null,this.indicesVboCacheKey="global_indices",this.baseIndices=null,this.baseIndicesOffset=null,this.numBaseIndices=null,this.indicesNorth=null,this.indicesNorthOffset=null,this.numIndicesNorth=null,this.indicesSouth=null,this.indicesSouthOffset=null,this.numIndicesSouth=null,this.indicesWest=null,this.indicesWestOffset=null,this.numIndicesWest=null,this.indicesEast=null,this.indicesEastOffset=null,this.numIndicesEast=null,this.indicesLoresNorth=null,this.indicesLoresNorthOffset=null,this.numIndicesLoresNorth=null,this.indicesLoresSouth=null,this.indicesLoresSouthOffset=null,this.numIndicesLoresSouth=null,this.indicesLoresWest=null,this.indicesLoresWestOffset=null,this.numIndicesLoresWest=null,this.indicesLoresEast=null,this.indicesLoresEastOffset=null,this.numIndicesLoresEast=null,this.outlineIndicesOffset=null,this.numOutlineIndices=null,this.wireframeIndicesOffset=null,this.numWireframeIndices=null,this.scratchMatrix=h.fromIdentity(),this.scratchElevations=null,this.scratchPrevElevations=null,this.corners={},this.tiles=[]};return S.prototype.tessellate=function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Tessellator","tessellate","missingDC"));var i=e.globe.elevationTimestamp();if(this.lastGlobeStateKey===e.globeStateKey&&this.lastVerticalExaggeration===e.verticalExaggeration&&this.elevationTimestamp===i&&this.lastModelViewProjection&&e.navigatorState.modelviewProjection.equals(this.lastModelViewProjection))return this.lastTerrain;var n=e.navigatorState;this.lastModelViewProjection=n.modelviewProjection,this.lastGlobeStateKey=e.globeStateKey,this.elevationTimestamp=i,this.lastVerticalExaggeration=e.verticalExaggeration,this.currentTiles.removeAllTiles(),this.topLevelTiles[e.globeStateKey]&&0!=this.topLevelTiles[e.globeStateKey].length||this.createTopLevelTiles(e),this.corners={},this.tiles=[];for(var r=0,o=this.topLevelTiles[e.globeStateKey].length;r<o;r+=1){var s=this.topLevelTiles[e.globeStateKey][r];s.update(e),this.isTileVisible(e,s)&&this.addTileOrDescendants(e,s)}return this.refineNeighbors(e),this.finishTessellating(e),this.lastTerrain=0===this.currentTiles.length?null:new E(e.globe,this,this.currentTiles,e.verticalExaggeration),this.lastTerrain},S.prototype.createTile=function(e,i,n,r){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Tile","constructor","missingSector"));if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Tile","constructor","The specified level is null or undefined."));if(n<0||r<0)throw new t(a.logMessage(a.LEVEL_SEVERE,"Tile","constructor","The specified row or column is less than zero."));return new m(e,i,n,r)},S.prototype.beginRendering=function(t){var e=t.currentProgram;if(!e)return void a.logMessage(a.LEVEL_INFO,"Tessellator","beginRendering","Current Program is empty");this.buildSharedGeometry(),this.cacheSharedGeometryVBOs(t);var i=t.currentGlContext,n=t.gpuResourceCache;if(this.vertexPointLocation=e.attributeLocation(i,"vertexPoint"),this.vertexTexCoordLocation=e.attributeLocation(i,"vertexTexCoord"),i.enableVertexAttribArray(this.vertexPointLocation),this.vertexTexCoordLocation>=0){var r=n.resourceForKey(this.texCoordVboCacheKey);i.bindBuffer(i.ARRAY_BUFFER,r),i.vertexAttribPointer(this.vertexTexCoordLocation,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(this.vertexTexCoordLocation)}var o=n.resourceForKey(this.indicesVboCacheKey);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,o)},S.prototype.endRendering=function(t){var e=t.currentGlContext;e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.vertexPointLocation>=0&&e.disableVertexAttribArray(this.vertexPointLocation),this.vertexTexCoordLocation>=0&&e.disableVertexAttribArray(this.vertexTexCoordLocation)},S.prototype.beginRenderingTile=function(e,i){if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Tessellator","beginRenderingTile","missingTile"));var n=e.currentGlContext,r=e.gpuResourceCache;this.scratchMatrix.setToMultiply(e.navigatorState.modelviewProjection,i.transformationMatrix),e.currentProgram.loadModelviewProjection(n,this.scratchMatrix);var o=e.globeStateKey+i.tileKey,s=r.resourceForKey(o);s?i.pointsVboStateKey!=i.pointsStateKey?(n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferSubData(n.ARRAY_BUFFER,0,i.points),i.pointsVboStateKey=i.pointsStateKey):e.currentGlContext.bindBuffer(n.ARRAY_BUFFER,s):(s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferData(n.ARRAY_BUFFER,i.points,n.STATIC_DRAW),e.frameStatistics.incrementVboLoadCount(1),r.putResource(o,s,4*i.points.length),i.pointsVboStateKey=i.pointsStateKey),n.vertexAttribPointer(this.vertexPointLocation,3,n.FLOAT,!1,0,0)},S.prototype.endRenderingTile=function(t,e){},S.prototype.renderTile=function(e,i){if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Tessellator","renderTile","missingTile"));var n=e.currentGlContext,r=n.TRIANGLE_STRIP;n.drawElements(r,this.numBaseIndices,n.UNSIGNED_SHORT,2*this.baseIndicesOffset);var o,s=i.level;o=i.neighborLevel(WorldWind.NORTH),o&&o.compare(s)<0?n.drawElements(r,this.numIndicesLoresNorth,n.UNSIGNED_SHORT,2*this.indicesLoresNorthOffset):n.drawElements(r,this.numIndicesNorth,n.UNSIGNED_SHORT,2*this.indicesNorthOffset),o=i.neighborLevel(WorldWind.SOUTH),o&&o.compare(s)<0?n.drawElements(r,this.numIndicesLoresSouth,n.UNSIGNED_SHORT,2*this.indicesLoresSouthOffset):n.drawElements(r,this.numIndicesSouth,n.UNSIGNED_SHORT,2*this.indicesSouthOffset),o=i.neighborLevel(WorldWind.WEST),o&&o.compare(s)<0?n.drawElements(r,this.numIndicesLoresWest,n.UNSIGNED_SHORT,2*this.indicesLoresWestOffset):n.drawElements(r,this.numIndicesWest,n.UNSIGNED_SHORT,2*this.indicesWestOffset),o=i.neighborLevel(WorldWind.EAST),o&&o.compare(s)<0?n.drawElements(r,this.numIndicesLoresEast,n.UNSIGNED_SHORT,2*this.indicesLoresEastOffset):n.drawElements(r,this.numIndicesEast,n.UNSIGNED_SHORT,2*this.indicesEastOffset)},S.prototype.renderWireframeTile=function(e,i){if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Tessellator","renderWireframeTile","missingTile"));var n=e.currentGlContext;this.vertexTexCoordLocation>=0&&n.disableVertexAttribArray(this.vertexTexCoordLocation),n.drawElements(n.LINES,this.numWireframeIndices,n.UNSIGNED_SHORT,2*this.wireframeIndicesOffset)},S.prototype.renderTileOutline=function(e,i){if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Tessellator","renderTileOutline","missingTile"));var n=e.currentGlContext;this.vertexTexCoordLocation>=0&&n.disableVertexAttribArray(this.vertexTexCoordLocation),n.drawElements(n.LINE_LOOP,this.numOutlineIndices,n.UNSIGNED_SHORT,2*this.outlineIndicesOffset)},S.prototype.pick=function(e,i,n){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"Tessellator","pick","missingDc"));if(!i)throw new t(a.logMessage(a.LEVEL_SEVERE,"Tessellator","pick","missingList"));for(var r=null,o=n||this,s=new p(0,0,0),h=[],l=0,u=i.length;l<u;l++){var c=i[l];c.extent.intersectsFrustum(e.pickFrustum)&&h.push(c)}if(e.pickTerrainOnly||(r=e.uniquePickColor(),this.drawPickTiles(e,h,r)),!e.regionPicking){var f=e.navigatorState.rayFromScreenPoint(e.pickPoint),g=this.computeNearestIntersection(f,h);g&&(e.globe.computePositionFromPoint(g[0],g[1],g[2],s),s.altitude=e.globe.elevationAtLocation(s.latitude,s.longitude),e.addPickedObject(new d(r,o,s,null,!0)))}},S.prototype.drawPickTiles=function(t,i,n){var r=t.currentGlContext;try{t.findAndBindProgram(e),t.currentProgram.loadColor(r,n),this.beginRendering(t);for(var o=0,s=i.length;o<s;o++){var a=i[o];this.beginRenderingTile(t,a),this.renderTile(t,a),this.endRenderingTile(t,a)}}finally{this.endRendering(t)}},S.prototype.computeNearestIntersection=function(t,e){for(var i=[],n=0,r=e.length;n<r;n++)this.computeIntersections(t,e[n],i);if(0==i.length)return null;var o,s=Number.POSITIVE_INFINITY;for(n=0,r=i.length;n<r;n++){var a=t.origin.distanceToSquared(i[n]);s>a&&(s=a,o=n)}return i[o]},S.prototype.computeIntersections=function(t,e,i){var n,r,o=e.level,s=e.points,a=i.length;t.origin.subtract(e.referencePoint),this.buildSharedGeometry(e),r=this.baseIndices,L.computeTriStripIntersections(t,s,r,i),n=e.neighborLevel(WorldWind.SOUTH),r=n&&n.compare(o)<0?this.indicesLoresSouth:this.indicesSouth,L.computeTriStripIntersections(t,s,r,i),n=e.neighborLevel(WorldWind.WEST),r=n&&n.compare(o)<0?this.indicesLoresWest:this.indicesWest,L.computeTriStripIntersections(t,s,r,i),n=e.neighborLevel(WorldWind.EAST),r=n&&n.compare(o)<0?this.indicesLoresEast:this.indicesEast,L.computeTriStripIntersections(t,s,r,i),n=e.neighborLevel(WorldWind.NORTH),r=n&&n.compare(o)<0?this.indicesLoresNorth:this.indicesNorth,L.computeTriStripIntersections(t,s,r,i),t.origin.add(e.referencePoint);for(var h=a,l=i.length;h<l;h++)i[h].add(e.referencePoint)},S.prototype.createTopLevelTiles=function(t){this.topLevelTiles[t.globeStateKey]=[],y.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles[t.globeStateKey])},S.prototype.addTileOrDescendants=function(t,e){return this.tileMeetsRenderCriteria(t,e)?void this.addTile(t,e):void this.addTileDescendants(t,e)},S.prototype.addTileDescendants=function(t,e){for(var i=e.level.nextLevel(),n=e.subdivideToCache(i,this,this.tileCache),r=0;r<n.length;r+=1){var o=n[r];o.update(t),this.levels.sector.intersects(o.sector)&&this.isTileVisible(t,o)&&this.addTileOrDescendants(t,o)}},S.prototype.addTile=function(t,e){var i=this.tiles.length;this.tiles.push(e);var n,r=e.sector,o=[r.maxLatitude,r.maxLongitude].toString(),s=[r.minLatitude,r.maxLongitude].toString(),a=[r.maxLatitude,r.minLongitude].toString(),h=[r.minLatitude,r.minLongitude].toString();n=this.corners[h],n?n.sw=i:this.corners[h]={sw:i},n=this.corners[a],n?n.nw=i:this.corners[a]={nw:i},n=this.corners[s],n?n.se=i:this.corners[s]={se:i},n=this.corners[o],n?n.ne=i:this.corners[o]={ne:i}},S.prototype.refineNeighbors=function(t){for(var e={},i=0,n=this.tiles.length;i<n;i+=1){var r,o,i,n,s=this.tiles[i],a=s.level.levelNumber,h=s.sector,l=[h.maxLatitude,h.maxLongitude].toString(),u=[h.minLatitude,h.maxLongitude].toString(),c=[h.maxLatitude,h.minLongitude].toString(),d=[h.minLatitude,h.minLongitude].toString();r=this.corners[l],r.hasOwnProperty("se")&&(o=r.se,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),r.hasOwnProperty("nw")&&(o=r.nw,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),r=this.corners[u],r.hasOwnProperty("ne")&&(o=r.ne,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),r.hasOwnProperty("sw")&&(o=r.sw,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),r=this.corners[c],r.hasOwnProperty("ne")&&(o=r.ne,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),r.hasOwnProperty("sw")&&(o=r.sw,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),r=this.corners[d],r.hasOwnProperty("se")&&(o=r.se,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),r.hasOwnProperty("nw")&&(o=r.nw,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0)))}var p=[],f=[];for(i=0,n=this.tiles.length;i<n;i+=1)s=this.tiles[i],e[i]?p.push(s):f.push(s);if(p.length>0){for(this.tiles=[],this.corners={},i=0,n=f.length;i<n;i+=1)s=f[i],this.addTile(t,s);for(i=0,n=p.length;i<n;i+=1){var s=p[i];this.addTileDescendants(t,s)}this.refineNeighbors(t)}},S.prototype.finishTessellating=function(t){for(var e=0,i=this.tiles.length;e<i;e+=1){var n=this.tiles[e];this.setNeighbors(n),this.regenerateTileGeometryIfNeeded(t,n),this.currentTiles.addTile(n)}},S.prototype.setNeighbors=function(t){var e=t.sector,i=[e.maxLatitude,e.maxLongitude].toString(),n=[e.minLatitude,e.maxLongitude].toString(),r=[e.maxLatitude,e.minLongitude].toString(),o=[e.minLatitude,e.minLongitude].toString(),s=this.corners[i],a=this.corners[n],h=this.corners[r],l=this.corners[o],u=-1,c=-1,d=-1,p=-1;s.hasOwnProperty("se")?u=s.se:h.hasOwnProperty("sw")&&(u=h.sw),a.hasOwnProperty("ne")?c=a.ne:l.hasOwnProperty("nw")&&(c=l.nw),s.hasOwnProperty("nw")?d=s.nw:a.hasOwnProperty("sw")&&(d=a.sw),h.hasOwnProperty("ne")?p=h.ne:l.hasOwnProperty("se")&&(p=l.se),t.setNeighborLevel(WorldWind.NORTH,u>=0?this.tiles[u].level:null),t.setNeighborLevel(WorldWind.SOUTH,c>=0?this.tiles[c].level:null),t.setNeighborLevel(WorldWind.EAST,d>=0?this.tiles[d].level:null),t.setNeighborLevel(WorldWind.WEST,p>=0?this.tiles[p].level:null)},S.prototype.isTileVisible=function(t,e){return!(t.globe.projectionLimits&&!e.sector.overlaps(t.globe.projectionLimits))&&e.extent.intersectsFrustum(t.navigatorState.frustumInModelCoordinates)},S.prototype.tileMeetsRenderCriteria=function(t,e){var i=this.detailControl;return(e.sector.minLatitude>=75||e.sector.maxLatitude<=-75)&&(i*=2),e.level.isLastLevel()||!e.mustSubdivide(t,i)},S.prototype.regenerateTileGeometryIfNeeded=function(t,e){var i=t.globeStateKey+e.stateKey+t.verticalExaggeration;e.points&&e.pointsStateKey==i||(this.regenerateTileGeometry(t,e),e.pointsStateKey=i)},S.prototype.regenerateTileGeometry=function(t,e){var i=e.tileHeight+1,n=e.tileWidth+1,r=e.referencePoint,o=this.scratchElevations;o||(o=new Float64Array(i*n),this.scratchElevations=o),e.points||(e.points=new Float32Array(i*n*3)),w.fillArray(o,0),t.globe.elevationsForGrid(e.sector,i,n,e.texelSize,o),this.mustAlignNeighborElevations(t,e)&&this.alignNeighborElevations(t,e,o),w.multiplyArray(o,t.verticalExaggeration),t.globe.computePointsForGrid(e.sector,i,n,o,r,e.points),e.transformationMatrix.setTranslation(r[0],r[1],r[2])},S.prototype.mustAlignNeighborElevations=function(t,e){var i=e.level,n=e.neighborLevel(WorldWind.NORTH),r=e.neighborLevel(WorldWind.SOUTH),o=e.neighborLevel(WorldWind.EAST),s=e.neighborLevel(WorldWind.WEST);return n&&n.compare(i)<0||r&&r.compare(i)<0||o&&o.compare(i)<0||s&&s.compare(i)<0},S.prototype.alignNeighborElevations=function(t,e,i){var n,r,o,s,a=e.tileHeight+1,h=e.tileWidth+1,l=e.level,u=Math.floor(a/2)+1,c=Math.floor(h/2)+1,d=l.previousLevel(),p=this.scratchPrevElevations;if(p||(p=new Float64Array(u*c),this.scratchPrevElevations=p),w.fillArray(p,0),t.globe.elevationsForGrid(e.sector,u,c,d.texelSize,p),n=e.neighborLevel(WorldWind.NORTH),n&&n.compare(l)<0)for(o=(a-1)*h,s=(u-1)*c,r=0;r<c;r++,o+=2,s+=1)i[o]=p[s],r<c-1&&(i[o+1]=.5*(p[s]+p[s+1]));if(n=e.neighborLevel(WorldWind.SOUTH),n&&n.compare(l)<0)for(o=0,s=0,r=0;r<c;r++,o+=2,s+=1)i[o]=p[s],r<c-1&&(i[o+1]=.5*(p[s]+p[s+1]));if(n=e.neighborLevel(WorldWind.EAST),n&&n.compare(l)<0)for(o=h-1,s=c-1,r=0;r<u;r++,o+=2*h,s+=c)i[o]=p[s],r<u-1&&(i[o+h]=.5*(p[s]+p[s+c]));if(n=e.neighborLevel(WorldWind.WEST),n&&n.compare(l)<0)for(o=0,s=0,r=0;r<u;r++,o+=2*h,s+=c)i[o]=p[s],r<u-1&&(i[o+h]=.5*(p[s]+p[s+c]))},S.prototype.buildSharedGeometry=function(){var t=this.levels.tileWidth,e=this.levels.tileHeight;this.texCoords||this.buildTexCoords(t,e),this.indices||this.buildIndices(t,e)},S.prototype.buildTexCoords=function(t,e){for(var i=t+1,n=e+1,r=1/t,o=1/e,s=new Float32Array(i*n*2),a=0,h=0,l=0;h<n;h++,l+=o){h==n-1&&(l=1);for(var u=0,c=0;u<i;u++,c+=r)u==i-1&&(c=1),s[a++]=c,s[a++]=l}this.texCoords=s},S.prototype.buildIndices=function(t,e){for(var i,n=e+1,r=t+1,o=2*(n-3)*(r-2)+2*(n-3),s=[],a=0,h=1;h<r-2;h+=1){for(var l=1;l<n-1;l+=1)i=h+l*r,s[a++]=i,s[a++]=i+1;s[a++]=i+1,i=h+1+1*r,s[a++]=i}for(this.baseIndicesOffset=s.length-o,this.baseIndices=new Uint16Array(s.slice(this.baseIndicesOffset)),this.numBaseIndices=o,o=2*r-2,l=n-1,h=r-1,i=h+l*r,s[a++]=i,h=r-2;h>0;h-=1)i=h+l*r,s[a++]=i,s[a++]=i-r;for(h=0,i=h+l*r,s[a++]=i,this.indicesNorthOffset=s.length-o,this.indicesNorth=new Uint16Array(s.slice(this.indicesNorthOffset)),this.numIndicesNorth=o,o=2*r-2,l=0,h=0,i=h+l*r,s[a++]=i,h=1;h<r-1;h+=1)i=h+l*r,s[a++]=i,s[a++]=i+r;for(h=r-1,i=h+l*r,s[a++]=i,this.indicesSouthOffset=s.length-o,this.indicesSouth=new Uint16Array(s.slice(this.indicesSouthOffset)),this.numIndicesSouth=o,o=2*n-2,h=0,l=n-1,i=h+l*r,s[a++]=i,l=n-2;l>0;l-=1)i=h+l*r,s[a++]=i,s[a++]=i+1;for(l=0,i=h+l*r,s[a++]=i,this.indicesWestOffset=s.length-o,this.indicesWest=new Uint16Array(s.slice(this.indicesWestOffset)),this.numIndicesWest=o,o=2*n-2,h=r-1,l=0,i=h+l*r,s[a++]=i,l=1;l<n-1;l+=1)i=h+l*r,s[a++]=i,s[a++]=i-1;for(l=n-1,i=h+l*r,s[a++]=i,this.indicesEastOffset=s.length-o,this.indicesEast=new Uint16Array(s.slice(this.indicesEastOffset)),this.numIndicesEast=o,o=2*r-2,l=n-1,h=r-1,i=h+l*r,s[a++]=i,h=r-2;h>0;h-=1)i=(h+1&-2)+l*r,s[a++]=i,i=h+(l-1)*r,s[a++]=i;for(h=0,i=h+l*r,s[a++]=i,this.indicesLoresNorthOffset=s.length-o,this.indicesLoresNorth=new Uint16Array(s.slice(this.indicesLoresNorthOffset)),this.numIndicesLoresNorth=o,o=2*r-2,l=0,h=0,i=h+l*r,s[a++]=i,h=1;h<r-1;h+=1)i=(h&-2)+l*r,s[a++]=i,i=h+(l+1)*r,s[a++]=i;for(h=r-1,i=h+l*r,s[a++]=i,this.indicesLoresSouthOffset=s.length-o,this.indicesLoresSouth=new Uint16Array(s.slice(this.indicesLoresSouthOffset)),this.numIndicesLoresSouth=o,o=2*n-2,h=0,l=n-1,i=h+l*r,s[a++]=i,l=n-2;l>0;l-=1)i=h+(l+1&-2)*r,s[a++]=i,i=h+1+l*r,s[a++]=i;for(l=0,i=h+l*r,s[a++]=i,this.indicesLoresWestOffset=s.length-o,this.indicesLoresWest=new Uint16Array(s.slice(this.indicesLoresWestOffset)),this.numIndicesLoresWest=o,o=2*n-2,h=r-1,l=0,i=h+l*r,s[a++]=i,l=1;l<n-1;l+=1)i=h+(l&-2)*r,s[a++]=i,i=h-1+l*r,s[a++]=i;l=n-1,i=h+l*r,s[a++]=i,this.indicesLoresEastOffset=s.length-o,this.indicesLoresEast=new Uint16Array(s.slice(this.indicesLoresEastOffset)),this.numIndicesLoresEast=o;var u=this.buildWireframeIndices(t,e),c=this.buildOutlineIndices(t,e);s=s.concat(u),this.wireframeIndicesOffset=s.length-this.numWireframeIndices,s=s.concat(c),this.outlineIndicesOffset=s.length-this.numOutlineIndices,this.indices=new Uint16Array(s)},S.prototype.buildWireframeIndices=function(t,e){var i,n,r,o=e+1,s=t+1,a=2*t*o+2*e*s,h=[],l=s,u=0;for(n=0;n<o;n+=1)for(i=0;i<t;i+=1)r=i+n*l,h[u]=r,h[u+1]=r+1,u+=2;for(i=0;i<s;i+=1)for(n=0;n<e;n+=1)r=i+n*l,h[u]=r,h[u+1]=r+l,u+=2;return this.numWireframeIndices=a,h},S.prototype.buildOutlineIndices=function(t,e){var i,n,r,o=e+1,s=t+1,a=2*(o-2)+2*s+1,h=[],l=0;for(n=0,i=0;i<s;i+=1)r=i+n*s,h[l]=r,l+=1;for(i=s-1,n=1;n<o;n+=1)r=i+n*s,h[l]=r,l+=1;for(n=o-1,i=s-1;i>=0;i-=1)r=i+n*s,h[l]=r,l+=1;for(i=0,n=o-1;n>=0;n-=1)r=i+n*s,h[l]=r,l+=1;return this.numOutlineIndices=a,h},S.prototype.cacheSharedGeometryVBOs=function(t){var e=t.currentGlContext,i=t.gpuResourceCache,n=i.resourceForKey(this.texCoordVboCacheKey);n||(n=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,this.texCoords,e.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),i.putResource(this.texCoordVboCacheKey,n,4*this.texCoords.length/2));var r=i.resourceForKey(this.indicesVboCacheKey);r||(r=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),i.putResource(this.indicesVboCacheKey,r,2*this.indices.length))},S}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[],r=function(){"use strict";var t=function(t,e,i,n,r){this.color=t,this.userObject=e,this.position=i,this.parentLayer=n,this.isTerrain=r,this.isOnTop=!1};return t}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(16)],r=function(t,e,i){"use strict";var n=function(t,e,i,n){this.globe=t,this.verticalExaggeration=n,this.sector=i.sector,this.tessellator=e,this.surfaceGeometry=i.tileArray,this.stateKey=t.stateKey+" ve "+n.toString()};return n.scratchPoint=new i(0,0,0),n.prototype.surfacePoint=function(i,r,o,s){if(!s)throw new t(e.logMessage(e.LEVEL_SEVERE,"Terrain","surfacePoint","missingResult"));for(var a=0,h=this.surfaceGeometry.length;a<h;a++)if(this.surfaceGeometry[a].sector.containsLocation(i,r)){if(this.surfaceGeometry[a].surfacePoint(i,r,s),o){var l=this.globe.surfaceNormalAtPoint(s[0],s[1],s[2],n.scratchPoint);s[0]+=l[0]*o,s[1]+=l[1]*o,s[2]+=l[2]*o}return s}var u=o+this.globe.elevationAtLocation(i,r)*this.verticalExaggeration;return this.globe.computePointFromPosition(i,r,u,s),s},n.prototype.surfacePointForMode=function(i,n,r,o,s){if(!s)throw new t(e.logMessage(e.LEVEL_SEVERE,"Terrain","surfacePointForMode","missingResult"));if(o||(o=WorldWind.ABSOLUTE),o===WorldWind.CLAMP_TO_GROUND)return this.surfacePoint(i,n,0,s);if(o===WorldWind.RELATIVE_TO_GROUND)return this.surfacePoint(i,n,r,s);var a=r*this.verticalExaggeration;return this.globe.computePointFromPosition(i,n,a,s),s},n.prototype.beginRendering=function(t){this.globe&&this.globe.tessellator&&this.globe.tessellator.beginRendering(t)},n.prototype.endRendering=function(t){this.globe&&this.globe.tessellator&&this.globe.tessellator.endRendering(t)},n.prototype.beginRenderingTile=function(i,n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Terrain","beginRenderingTile","missingTile"));this.globe&&this.globe.tessellator&&this.globe.tessellator.beginRenderingTile(i,n)},n.prototype.endRenderingTile=function(t,e){},n.prototype.renderTile=function(i,n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Terrain","renderTile","missingTile"));this.globe&&this.globe.tessellator&&this.globe.tessellator.renderTile(i,n)},n.prototype.pick=function(t){this.globe&&this.globe.tessellator&&this.globe.tessellator.pick(t,this.surfaceGeometry,this)},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(13),i(36)],r=function(t,e,i,n){"use strict";var r=function(t,e,r,o){n.call(this,t,e,r,o),this.transformationMatrix=i.fromIdentity(),this.points=null,this.pointsStateKey=null,this.pointsVboStateKey=null,this.neighborMap={},this.neighborMap[WorldWind.NORTH]=null,this.neighborMap[WorldWind.SOUTH]=null,this.neighborMap[WorldWind.EAST]=null,this.neighborMap[WorldWind.WEST]=null,this._stateKey=null,this._elevationTimestamp=null,this.scratchArray=[]};return r.prototype=Object.create(n.prototype),Object.defineProperties(r.prototype,{stateKey:{get:function(){return this._stateKey||(this._stateKey=this.computeStateKey()),this._stateKey}}}),r.prototype.neighborLevel=function(t){return this.neighborMap[t]},r.prototype.setNeighborLevel=function(t,e){this.neighborMap[t]=e,this._stateKey=null},r.prototype.surfacePoint=function(i,n,r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"TerrainTile","surfacePoint","missingResult"));var o,s,a,h,l,u,c,d,p,f,g=this.sector,E=g.minLatitude,m=g.maxLatitude,v=g.minLongitude,y=g.maxLongitude,L=this.tileWidth,w=this.tileHeight;o=(n-v)/(y-v)*L,s=(i-E)/(m-E)*w,a=o<L?Math.floor(o):L-1,h=s<w?Math.floor(s):w-1,l=L+1,u=this.points,c=this.scratchArray,d=3*(a+h*l);for(var S=0;S<6;S++)c[S]=u[d+S];d=3*(a+(h+1)*l);for(var R=6;R<12;R++)c[R]=u[d+(R-6)];return p=o<L?o-Math.floor(o):1,f=s<w?s-Math.floor(s):1,p>f?(r[0]=c[0]+p*(c[3]-c[0])+f*(c[6]-c[0]),r[1]=c[1]+p*(c[4]-c[1])+f*(c[7]-c[1]),r[2]=c[2]+p*(c[5]-c[2])+f*(c[8]-c[2])):(r[0]=c[9]+(1-p)*(c[6]-c[9])+(1-f)*(c[3]-c[9]),r[1]=c[10]+(1-p)*(c[7]-c[10])+(1-f)*(c[4]-c[10]),r[2]=c[11]+(1-p)*(c[8]-c[11])+(1-f)*(c[5]-c[11])),r[0]+=this.referencePoint[0],r[1]+=this.referencePoint[1],r[2]+=this.referencePoint[2],r},r.prototype.update=function(t){n.prototype.update.call(this,t);var e=t.globe.elevationTimestamp();this._elevationTimestamp!=e&&(this._elevationTimestamp=e,this._stateKey=null)},r.prototype.computeStateKey=function(){var t=[];return t.push(this._elevationTimestamp),t.push(this.neighborMap[WorldWind.NORTH]?this.neighborMap[WorldWind.NORTH].compare(this.level):0),t.push(this.neighborMap[WorldWind.SOUTH]?this.neighborMap[WorldWind.SOUTH].compare(this.level):0),t.push(this.neighborMap[WorldWind.EAST]?this.neighborMap[WorldWind.EAST].compare(this.level):0),t.push(this.neighborMap[WorldWind.WEST]?this.neighborMap[WorldWind.WEST].compare(this.level):0),t.join(".")},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(31)],r=function(t,e,i){"use strict";var n=function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"TerrainTileList","TerrainTileList","missingTessellator"));
this.tessellator=i,this.sector=null,this.tileArray=[]};return Object.defineProperties(n.prototype,{length:{get:function(){return this.tileArray.length}}}),n.prototype.addTile=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"TerrainTileList","addTile","missingTile"));this.tileArray.indexOf(n)==-1&&(this.tileArray.push(n),this.sector?this.sector.union(n.sector):(this.sector=new i(0,0,0,0),this.sector.copy(n.sector)))},n.prototype.removeAllTiles=function(){this.tileArray=[],this.sector=null},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(49),i(58),i(59)],r=function(t,e,i){"use strict";var n=function(){t.call(this,new i,new e)};return n.prototype=Object.create(t.prototype),n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(7),i(51),i(9),i(16)],r=function(t,e,i,n,r){"use strict";var o=function(){i.call(this,"Equirectangular",!0,null)};return o.prototype=Object.create(i.prototype),Object.defineProperties(o.prototype,{stateKey:{get:function(){return"projection equirectangular "}}}),o.prototype.geographicToCartesian=function(i,r,o,s,a,h){if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesian","missingGlobe"));if(!h)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesian","missingResult"));return h[0]=i.equatorialRadius*o*t.DEGREES_TO_RADIANS+(a?a[0]:0),h[1]=i.equatorialRadius*r*t.DEGREES_TO_RADIANS,h[2]=s,h},o.prototype.geographicToCartesianGrid=function(i,o,s,a,h,l,u,c){if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","missingGlobe"));if(!o)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","missingSector"));if(!h||h.length<s*a)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!c)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","missingResult"));var d,p,f,g,E,m=i.equatorialRadius,v=o.minLatitude*t.DEGREES_TO_RADIANS,y=o.maxLatitude*t.DEGREES_TO_RADIANS,L=o.minLongitude*t.DEGREES_TO_RADIANS,w=o.maxLongitude*t.DEGREES_TO_RADIANS,S=(y-v)/(s>1?s-1:1),R=(w-L)/(a>1?a-1:1),T=l?l:new r(0,0,0),_=u?u[0]:0,x=0,M=0;for(d=0,f=v;d<s;d++,f+=S)for(d===s-1&&(f=y),E=m*f-T[1],p=0,g=L;p<a;p++,g+=R)p===a-1&&(g=w),c[M++]=m*g-T[0]+_,c[M++]=E,c[M++]=h[x++]-T[2];return c},o.prototype.cartesianToGeographic=function(i,r,o,s,a,h){if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionEquirectangular","cartesianToGeographic","missingGlobe"));if(!h)throw new e(n.logMessage(n.LEVEL_SEVERE,"ProjectionEquirectangular","cartesianToGeographic","missingResult"));return h.latitude=o/i.equatorialRadius*t.RADIANS_TO_DEGREES,h.longitude=(r-(a?a[0]:0))/i.equatorialRadius*t.RADIANS_TO_DEGREES,h.altitude=s,h},o}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(32),i(18),i(9),i(31)],r=function(t,e,i,n,r){"use strict";var o=function(){e.call(this,r.FULL_SPHERE,new i(45,45),1," "," ",150,150),this.displayName="Zero Elevations",this.timestamp=Date.now(),this.minElevation=0,this.maxElevation=0};return o.prototype=Object.create(e.prototype),o.prototype.minAndMaxElevationsForSector=function(t){return[0,0]},o.prototype.elevationAtLocation=function(t,e){return 0},o.prototype.elevationsForGrid=function(e,i,r,o,s){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"ZeroElevationModel","elevationsForSector","missingSector"));if(i<=0||r<=0)throw new t(n.logMessage(n.LEVEL_SEVERE,"ZeroElevationModel","elevationsForSector","numLat or numLon is less than 1"));if(!s||s.length<i*r)throw new t(n.logMessage(n.LEVEL_SEVERE,"ZeroElevationModel","elevationsForSector","missingArray"));for(var a=0,h=s.length;a<h;a++)s[a]=0;return 0},o}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(18),i(9),i(17),i(16)],r=function(t,e,i,n){"use strict";var r=function(t){if(!t)throw new ArgumentError(e.logMessage(e.LEVEL_SEVERE,"GoToAnimator","constructor","missingWorldWindow"));this.wwd=t,this.animationFrequency=20,this.travelTime=3e3,this.cancelled=!1};return r.prototype.cancel=function(){this.cancelled=!0},r.prototype.goTo=function(r,o){if(!r)throw new ArgumentError(e.logMessage(e.LEVEL_SEVERE,"GoToAnimator","goTo","missingPosition"));this.completionCallback=o,this.cancelled=!1,this.targetPosition=new i(r.latitude,r.longitude,r.altitude||this.wwd.navigator.range),this.startPosition=new i(this.wwd.navigator.lookAtLocation.latitude,this.wwd.navigator.lookAtLocation.longitude,this.wwd.navigator.range),this.startTime=Date.now();var s,a=this.travelTime,h=t.greatCircleDistance(this.startPosition,this.targetPosition),l=this.wwd.globe.computePointFromLocation(this.startPosition.latitude,this.startPosition.longitude,new n(0,0,0)),u=this.wwd.globe.computePointFromLocation(this.targetPosition.latitude,this.targetPosition.longitude,new n(0,0,0));this.maxAltitude=l.distanceTo(u);var c=this.wwd.navigator.currentState().pixelSizeAtDistance(this.startPosition.altitude)*this.wwd.canvas.clientWidth/this.wwd.globe.equatorialRadius;h<=2*c&&(this.maxAltitude=this.startPosition.altitude),this.maxAltitudeReachedTime=this.maxAltitude<=this.wwd.navigator.range?Date.now():null,this.maxAltitude>this.startPosition.altitude?(s=Math.max(0,this.maxAltitude-this.startPosition.altitude),s+=Math.abs(this.targetPosition.altitude-this.maxAltitude)):s=Math.abs(this.targetPosition.altitude-this.startPosition.altitude);var d=Math.max(h,s/this.wwd.globe.equatorialRadius);if(0!==d){d<2*c&&(a=Math.min(d/c*this.travelTime,this.travelTime)),a=Math.max(1,a),this.panVelocity=h/a,this.rangeVelocity=s/a;var p=this,f=function(){return p.cancelled?void(p.completionCallback&&p.completionCallback(p)):void(p.update()?setTimeout(f,p.animationFrequency):p.completionCallback&&p.completionCallback(p))};setTimeout(f,this.animationFrequency)}},r.prototype.update=function(){var t=new i(this.wwd.navigator.lookAtLocation.latitude,this.wwd.navigator.lookAtLocation.longitude,this.wwd.navigator.range),e=this.updateRange(t);return e=this.updateLocation(t)||e,this.wwd.redraw(),e},r.prototype.updateRange=function(t){var e,i,n=!1;return this.maxAltitudeReachedTime?(i=Date.now()-this.maxAltitudeReachedTime,this.maxAltitude>this.targetPosition.altitude?(e=this.maxAltitude-this.rangeVelocity*i,e=Math.max(e,this.targetPosition.altitude)):(e=this.maxAltitude+this.rangeVelocity*i,e=Math.min(e,this.targetPosition.altitude)),this.wwd.navigator.range=e,n=Math.abs(this.wwd.navigator.range-this.targetPosition.altitude)>1):(i=Date.now()-this.startTime,e=Math.min(this.startPosition.altitude+this.rangeVelocity*i,this.maxAltitude),Math.abs(this.wwd.navigator.range-e)<1&&(this.maxAltitudeReachedTime=Date.now()),this.wwd.navigator.range=e,n=!0),n},r.prototype.updateLocation=function(e){var i=Date.now()-this.startTime,n=t.greatCircleDistance(this.startPosition,e),r=t.greatCircleDistance(e,this.targetPosition),o=t.greatCircleAzimuth(e,this.targetPosition),s=this.panVelocity*i,a=Math.min(s-n,r),h=t.greatCircleLocation(e,o,a,new t(0,0)),l=!1;return this.wwd.navigator.lookAtLocation.latitude=h.latitude,this.wwd.navigator.lookAtLocation.longitude=h.longitude,a<1/this.wwd.globe.equatorialRadius&&(l=!0),!l},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(33),i(7),i(62),i(9),i(46),i(21)],r=function(t,e,i,n,r,o){"use strict";var s=function(i,o){if(!i||i<1)throw new e(n.logMessage(n.LEVEL_SEVERE,"GpuResourceCache","constructor","Specified cache capacity is undefined, 0 or negative."));if(!o||o<0||o>=i)throw new e(n.logMessage(n.LEVEL_SEVERE,"GpuResourceCache","constructor","Specified cache low-water value is undefined, negative or not less than the capacity."));this.entries=new r(i,o),this.cacheKeyPool=0,this.currentRetrievals={},this.absentResourceList=new t(3,6e4)};return Object.defineProperties(s.prototype,{capacity:{get:function(){return this.entries.capacity}},lowWater:{get:function(){return this.entries.lowWater}},usedCapacity:{get:function(){return this.entries.usedCapacity}},freeCapacity:{get:function(){return this.entries.freeCapacity}}}),s.prototype.generateCacheKey=function(){return"GpuResourceCache "+ ++this.cacheKeyPool},s.prototype.putResource=function(t,r,o){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"GpuResourceCache","putResource","missingKey."));if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"GpuResourceCache","putResource","missingResource."));if(!o||o<1)throw new e(n.logMessage(n.LEVEL_SEVERE,"GpuResourceCache","putResource","The specified resource size is undefined or less than 1."));var s={resource:r};this.entries.putEntry(t instanceof i?t.key:t,s,o)},s.prototype.resourceForKey=function(t){var e=t instanceof i?this.entries.entryForKey(t.key):this.entries.entryForKey(t);return e?e.resource:null},s.prototype.containsResource=function(t){return this.entries.containsKey(t instanceof i?t.key:t)},s.prototype.removeResource=function(t){this.entries.removeEntry(t instanceof i?t.key:t)},s.prototype.clear=function(){this.entries.clear(!1)},s.prototype.retrieveTexture=function(t,e,r){if(!e)return null;if(e instanceof i){var s=new o(t,e.image,r);return this.putResource(e.key,s,s.size),s}if(this.currentRetrievals[e]||this.absentResourceList.isResourceAbsent(e))return null;var a=this,h=new Image;return h.onload=function(){n.log(n.LEVEL_INFO,"Image retrieval succeeded: "+e);var i=new o(t,h,r);a.putResource(e,i,i.size),delete a.currentRetrievals[e],a.absentResourceList.unmarkResourceAbsent(e);var s=document.createEvent("Event");s.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(s)},h.onerror=function(){delete a.currentRetrievals[e],a.absentResourceList.markResourceAbsent(e),n.log(n.LEVEL_WARNING,"Image retrieval failed: "+e)},this.currentRetrievals[e]=e,h.crossOrigin="anonymous",h.src=e,null},s}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(40),i(9)],r=function(t,e,i){"use strict";var n=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"ImageSource","constructor","missingImage"));this.image=e,this.key="ImageSource "+ ++n.keyPool};return n.keyPool=0,n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(40),i(48),i(65),i(66),i(12),i(49),i(41),i(61),i(69),i(9),i(13),i(23),i(64),i(14),i(17),i(20),i(70),i(31),i(75),i(77),i(79),i(81),i(24),i(16),i(19)],r=function(t,e,i,n,r,o,s,a,h,l,u,c,d,p,f,g,E,m,v,y,L,w,S,R,T,_){"use strict";var x=function(i){if(!i)throw new t(u.logMessage(u.LEVEL_SEVERE,"Texture","constructor","missingGlContext"));this.currentGlContext=i,this.canvas2D=document.createElement("canvas"),this.ctx2D=this.canvas2D.getContext("2d"),this.clearColor=e.TRANSPARENT,this.gpuResourceCache=new h(WorldWind.configuration.gpuCacheSize,.8*WorldWind.configuration.gpuCacheSize),this.surfaceTileRenderer=new w,this.surfaceShapeTileBuilder=new L,this.surfaceShapeTileController=new r,this.screenCreditController=new m,this.textSupport=new S,this.currentFramebuffer=null,this.currentProgram=null,this.surfaceRenderables=[],this.orderedRenderingMode=!1,this.orderedRenderables=[],this.screeRenderables=[],this.orderedRenderablesCounter=0,this.timestamp=Date.now(),this.previousRedrawTimestamp=this.timestamp,this.redrawRequested=!1,this.globe=null,this.globeStateKey=null,this.layers=null,this.currentLayer=null,this.navigatorState=null,this.eyePosition=new g(0,0,0),this.screenProjection=c.fromIdentity(),this.terrain=null,this.verticalExaggeration=1,this.fadeTime=500,this.surfaceOpacity=1,this.frameStatistics=null,this.pickingMode=!1,this.pickTerrainOnly=!1,this.deepPicking=!1,this.regionPicking=!1,this.pickPoint=null,this.pickRectangle=null,this.pickFramebuffer=null,this.pickFrustum=null,this.pickColor=new e(0,0,0,1),this.objectsAtPickPoint=new p,this.pixelScale=1};return x.unitCubeKey="DrawContextUnitCubeKey",x.unitCubeElementsKey="DrawContextUnitCubeElementsKey",x.unitQuadKey="DrawContextUnitQuadKey",x.unitQuadKey3="DrawContextUnitQuadKey3",x.prototype.reset=function(){this.screenCreditController.clear(),this.surfaceRenderables=[],this.orderedRenderingMode=!1,this.orderedRenderables=[],this.screenRenderables=[],this.orderedRenderablesCounter=0;var t=this.timestamp;this.timestamp=Date.now(),this.timestamp===t&&++this.timestamp,this.redrawRequested=!1,this.globe=null,this.globeStateKey=null,this.layers=null,this.currentLayer=null,this.navigatorState=null,this.terrain=null,this.verticalExaggeration=1,this.frameStatistics=null,this.accumulateOrderedRenderables=!0,this.pickingMode=!1,this.pickTerrainOnly=!1,this.deepPicking=!1,this.regionPicking=!1,this.pickPoint=null,this.pickRectangle=null,this.pickFrustum=null,this.pickColor=new e(0,0,0,1),this.objectsAtPickPoint.clear()},x.prototype.update=function(){var t=this.currentGlContext,e=this.navigatorState.eyePoint;this.globeStateKey=this.globe.stateKey,this.globe.computePositionFromPoint(e[0],e[1],e[2],this.eyePosition),this.screenProjection.setToScreenProjection(t.drawingBufferWidth,t.drawingBufferHeight)},x.prototype.contextLost=function(){this.gpuResourceCache.clear(),this.pickFramebuffer=null,this.currentFramebuffer=null,this.currentProgram=null},x.prototype.contextRestored=function(){this.gpuResourceCache.clear()},x.prototype.bindFramebuffer=function(t){this.currentFramebuffer!=t&&(this.currentGlContext.bindFramebuffer(this.currentGlContext.FRAMEBUFFER,t?t.framebufferId:null),this.currentFramebuffer=t)},x.prototype.bindProgram=function(t){this.currentProgram!=t&&(this.currentGlContext.useProgram(t?t.programId:null),this.currentProgram=t)},x.prototype.findAndBindProgram=function(e){if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"DrawContext","findAndBindProgram","The specified program constructor is null or undefined."));var i=this.gpuResourceCache.resourceForKey(e.key);if(i)this.bindProgram(i);else try{i=new e(this.currentGlContext),this.bindProgram(i),this.gpuResourceCache.putResource(e.key,i,i.size)}catch(t){u.log(u.LEVEL_SEVERE,"Error attempting to create GPU program.")}return i},x.prototype.addSurfaceRenderable=function(t){t&&this.surfaceRenderables.push(t)},x.prototype.peekSurfaceRenderable=function(){return this.surfaceRenderables.length>0?this.surfaceRenderables[this.surfaceRenderables.length-1]:null},x.prototype.popSurfaceRenderable=function(){return this.surfaceRenderables.length>0?this.surfaceRenderables.pop():null},x.prototype.reverseSurfaceRenderables=function(){this.surfaceRenderables.reverse()},x.prototype.addOrderedRenderable=function(t,e){if(t){var i={orderedRenderable:t,insertionOrder:this.orderedRenderablesCounter++,eyeDistance:e||t.eyeDistance,globeStateKey:this.globeStateKey};this.globe.continuous&&(i.globeOffset=this.globe.offset),0===i.eyeDistance?this.screenRenderables.push(i):this.orderedRenderables.push(i)}},x.prototype.addOrderedRenderableToBack=function(t){if(t){var e={orderedRenderable:t,insertionOrder:this.orderedRenderablesCounter++,eyeDistance:Number.MAX_VALUE,globeStateKey:this.globeStateKey};this.globe.continuous&&(e.globeOffset=this.globe.offset),this.orderedRenderables.push(e)}},x.prototype.peekOrderedRenderable=function(){return this.orderedRenderables.length>0?this.orderedRenderables[this.orderedRenderables.length-1].orderedRenderable:null},x.prototype.popOrderedRenderable=function(){if(this.orderedRenderables.length>0){var t=this.orderedRenderables.pop();return this.globeStateKey=t.globeStateKey,this.globe.continuous&&(this.globe.offset=t.globeOffset),t.orderedRenderable}return null},x.prototype.nextScreenRenderable=function(){if(this.screenRenderables.length>0){var t=this.screenRenderables.shift();return this.globeStateKey=t.globeStateKey,this.globe.continuous&&(this.globe.offset=t.globeOffset),t.orderedRenderable}return null},x.prototype.sortOrderedRenderables=function(){this.orderedRenderables.sort(function(t,e){var i=t.eyeDistance,n=e.eyeDistance;if(i<n)return-1;if(i>n)return 1;var r=t.insertionOrder,o=e.insertionOrder;return r>o?-1:r<o?1:0})},x.prototype.readPickColor=function(t){var i=this.navigatorState.convertPointToViewport(t,new R(0,0)),n=new Uint8Array(4);return this.currentGlContext.readPixels(i[0],i[1],1,1,this.currentGlContext.RGBA,this.currentGlContext.UNSIGNED_BYTE,n),this.clearColor.equalsBytes(n)?null:e.colorFromByteArray(n)},x.prototype.readPickColors=function(t){var i,n=this.currentGlContext,r=new Uint8Array(t.width*t.height*4),o={},s=new e(0,0,0,0),a=n.getParameter(n.PACK_ALIGNMENT);n.pixelStorei(n.PACK_ALIGNMENT,1),this.currentGlContext.readPixels(t.x,t.y,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,r),n.pixelStorei(n.PACK_ALIGNMENT,a);for(var h=0,l=t.width*t.height;h<l;h++){var u=4*h;i=e.colorFromBytes(r[u],r[u+1],r[u+2],r[u+3]),i.equals(this.clearColor)||i.equals(s)||(o[i.toByteString()]=i)}return o},x.prototype.resolvePick=function(t){if(t.userObject instanceof y||!this.deepPicking||this.regionPicking)this.addPickedObject(t);else{var e=this.readPickColor(this.pickPoint);if(!e)return null;t.color.equals(e)&&this.addPickedObject(t)}},x.prototype.addPickedObject=function(t){t&&this.objectsAtPickPoint.add(t)},x.prototype.uniquePickColor=function(){var t=this.pickColor.nextColor().clone();return t.equals(this.clearColor)?t.nextColor():t},x.prototype.makePickFramebuffer=function(){var t=this.currentGlContext,e=t.drawingBufferWidth,i=t.drawingBufferHeight;return this.pickFramebuffer&&this.pickFramebuffer.width==e&&this.pickFramebuffer.height==i||(this.pickFramebuffer=new n(t,e,i,!0)),this.pickFramebuffer},x.prototype.makePickFrustum=function(){if(!this.pickPoint&&!this.pickRectangle)return!1;var t,e,i,n,r,s,a,h,l,u,c,d,p,g,m,v,y,L,w,S,x,M,b=new T(0,0,0),C=2,A=new T(0,0,0),P=this.pickRectangle,V=this.navigatorState.viewport;P||(M=this.navigatorState.convertPointToViewport(this.pickPoint,new R(0,0)),P=new E(M[0]-C,M[1]-C,2*C,2*C));var I=P.x,D=P.x+P.width,W=P.y,O=P.y+P.height;return!(D<0||O<0||I>V.x+V.width||W>V.y+V.height)&&(P.x=_.clamp(I,V.x,V.x+V.width),P.y=_.clamp(W,V.y,V.y+V.height),P.width=_.clamp(D,V.x,V.x+V.width)-P.x,P.height=_.clamp(O,V.y,V.y+V.height)-P.y,this.pickRectangle=P,A[0]=P.x,A[1]=P.y,A[2]=0,this.navigatorState.unProject(A,t=new T(0,0,0)),A[0]=P.x,A[1]=P.y,A[2]=1,this.navigatorState.unProject(A,e=new T(0,0,0)),A[0]=P.x+P.width,A[1]=P.y,A[2]=0,this.navigatorState.unProject(A,i=new T(0,0,0)),A[0]=P.x+P.width,A[1]=P.y,A[2]=1,this.navigatorState.unProject(A,n=new T(0,0,0)),A[0]=P.x,A[1]=P.y+P.height,A[2]=0,this.navigatorState.unProject(A,r=new T(0,0,0)),A[0]=P.x,A[1]=P.y+P.height,A[2]=1,this.navigatorState.unProject(A,s=new T(0,0,0)),A[0]=P.x+P.width,A[1]=P.y+P.height,A[2]=0,this.navigatorState.unProject(A,a=new T(0,0,0)),A[0]=P.x+P.width,A[1]=P.y+P.height,A[2]=1,this.navigatorState.unProject(A,h=new T(0,0,0)),x=new T(s[0]-t[0],s[1]-t[1],s[2]-t[2]),b.set(r[0]-e[0],r[1]-e[1],r[2]-e[2]),l=x.cross(b),m=new f(l[0],l[1],l[2],-l.dot(t)),m.normalize(),x=new T(a[0]-n[0],a[1]-n[1],a[2]-n[2]),b.set(h[0]-i[0],h[1]-i[1],h[2]-i[2]),u=x.cross(b),v=new f(u[0],u[1],u[2],-u.dot(i)),v.normalize(),x=new T(s[0]-a[0],s[1]-a[1],s[2]-a[2]),b.set(h[0]-r[0],h[1]-r[1],h[2]-r[2]),c=x.cross(b),y=new f(c[0],c[1],c[2],-c.dot(r)),y.normalize(),x=new T(n[0]-t[0],n[1]-t[1],n[2]-t[2]),b.set(e[0]-i[0],e[1]-i[1],e[2]-i[2]),d=x.cross(b),L=new f(d[0],d[1],d[2],-d.dot(i)),L.normalize(),x=new T(r[0]-i[0],r[1]-i[1],r[2]-i[2]),b.set(a[0]-t[0],a[1]-t[1],a[2]-t[2]),p=x.cross(b),w=new f(p[0],p[1],p[2],-p.dot(t)),w.normalize(),x=new T(h[0]-e[0],h[1]-e[1],h[2]-e[2]),b.set(s[0]-n[0],s[1]-n[1],s[2]-n[2]),g=x.cross(b),S=new f(g[0],g[1],g[2],-g.dot(e)),S.normalize(),this.pickFrustum=new o(m,v,L,y,w,S),!0)},x.prototype.isSmall=function(t,e){if(!t)return!1;var i=this.navigatorState.eyePoint.distanceTo(t.center),n=this.navigatorState.pixelSizeAtDistance(i);return 2*t.radius<e*n},x.prototype.unitCubeBuffer=function(){var t=this.gpuResourceCache.resourceForKey(x.unitCubeKey);if(!t){var e=this.currentGlContext,i=new Float32Array(24),n=0;i[n++]=0,i[n++]=1,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=1,i[n++]=1,i[n++]=0,i[n++]=1,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=1,i[n++]=1,i[n++]=0,i[n++]=0,i[n++]=1,i[n++]=1,i[n++]=1,i[n++]=1,i[n++]=1,i[n++]=0,i[n]=1,t=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(x.unitCubeKey,t,4*i.length)}return t},x.prototype.unitCubeElements=function(){var t=this.gpuResourceCache.resourceForKey(x.unitCubeElementsKey);if(!t){var e=this.currentGlContext,i=new Int16Array(60),n=0;i[n++]=1,i[n++]=0,i[n++]=3,i[n++]=3,i[n++]=0,i[n++]=2,i[n++]=4,i[n++]=5,i[n++]=6,i[n++]=6,i[n++]=5,i[n++]=7,i[n++]=5,i[n++]=1,i[n++]=7,i[n++]=7,i[n++]=1,i[n++]=3,i[n++]=6,i[n++]=2,i[n++]=4,i[n++]=4,i[n++]=2,i[n++]=0,i[n++]=4,i[n++]=0,i[n++]=5,i[n++]=5,i[n++]=0,i[n++]=1,i[n++]=7,i[n++]=3,i[n++]=6,i[n++]=6,i[n++]=3,i[n++]=2,i[n++]=0,i[n++]=1,i[n++]=1,i[n++]=3,i[n++]=3,i[n++]=2,i[n++]=2,i[n++]=0,i[n++]=4,i[n++]=5,i[n++]=5,i[n++]=7,i[n++]=7,i[n++]=6,i[n++]=6,i[n++]=4,i[n++]=0,i[n++]=4,i[n++]=5,i[n++]=1,i[n++]=2,i[n++]=6,i[n++]=7,i[n]=3,t=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(x.unitCubeElementsKey,t,2*i.length)}return t},x.prototype.unitQuadBuffer=function(){var t=this.gpuResourceCache.resourceForKey(x.unitQuadKey);if(!t){var e=this.currentGlContext,i=new Float32Array(8);i[0]=0,i[1]=1,i[2]=0,i[3]=0,i[4]=1,i[5]=1,i[6]=1,i[7]=0,t=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(x.unitQuadKey,t,4*i.length)}return t},x.prototype.unitQuadBuffer3=function(){var t=this.gpuResourceCache.resourceForKey(x.unitQuadKey3);if(!t){var e=this.currentGlContext,i=new Float32Array(12);i[0]=0,i[1]=1,i[2]=0,i[3]=0,i[4]=0,i[5]=0,i[6]=1,i[7]=1,i[8]=0,i[9]=1,i[10]=0,i[11]=0,t=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(x.unitQuadKey3,t,4*i.length)}return t},x.prototype.surfacePointForMode=function(e,i,n,r,o){if(!o)throw new t(u.logMessage(u.LEVEL_SEVERE,"DrawContext","surfacePointForMode","missingResult"));if(this.terrain)this.terrain.surfacePointForMode(e,i,n,r,o);else{var s=n+this.globe.elevationAtLocation(e,i)*this.verticalExaggeration;this.globe.computePointFromPosition(e,i,s,o)}return o},x}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[],r=function(){"use strict";var t=function(){this.objects=[]};return t.prototype.hasNonTerrainObjects=function(){return this.objects.length>1||1===this.objects.length&&null==this.terrainObject()},t.prototype.terrainObject=function(){for(var t=0,e=this.objects.length;t<e;t++)if(this.objects[t].isTerrain)return this.objects[t];return null},t.prototype.add=function(t){if(t)if(t.isTerrain){for(var e=this.objects.length,i=0,n=this.objects.length;i<n;i++)if(this.objects[i].isTerrain){e=i;break}this.objects[e]=t}else this.objects.push(t)},t.prototype.clear=function(){this.objects=[]},t.prototype.topPickedObject=function(){var t=this.objects.length;if(t>1)for(var e=0;e<t;e++)if(this.objects[[e].isOnTop])return this.objects[e];return t>0?this.objects[0]:null},t}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(19)],r=function(t,e){"use strict";var i=function(i,n,r,o){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"FramebufferTexture","constructor","missingGlContext"));if(n<0||r<0)throw new t(e.logMessage(e.LEVEL_SEVERE,"FramebufferTexture","constructor","The framebuffer width or height is less than zero."));this.width=n,this.height=r,this.depth=o,this.size=n*r*4+(o?n*r*2:0),this.framebufferId=i.createFramebuffer(),i.bindFramebuffer(i.FRAMEBUFFER,this.framebufferId),this.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,n,r,0,i.RGBA,i.UNSIGNED_BYTE,null),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this.texture,0),this.depthBuffer=null,o&&(this.depthBuffer=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.depthBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,n,r),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,this.depthBuffer));var s=i.checkFramebufferStatus(i.FRAMEBUFFER);s!=i.FRAMEBUFFER_COMPLETE&&(e.logMessage(e.LEVEL_WARNING,"FramebufferTexture","constructor","Error creating framebuffer: "+s),this.framebufferId=null,this.texture=null,this.depthBuffer=null),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.bindTexture(i.TEXTURE_2D,null)};return i.prototype.bind=function(t){return this.texture&&t.currentGlContext.bindTexture(gl.TEXTURE_2D,this.texture),!!this.texture},i}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(67),i(44),i(18),i(9),i(46),i(31),i(36)],r=function(t,e,i,n,r,o,s,a){"use strict";var h=function(){this.tileWidth=256,this.tileHeight=256,this.detailControl=1.75,this.levels=new i(s.FULL_SPHERE,new n(45,45),16,this.tileWidth,this.tileHeight),this.topLevelTiles=[],this.currentTiles=[],this.currentTimestamp=null,this.currentGlobeStateKey=null,this.tileCache=new o(5e5,4e5),this.key="FramebufferTileController "+ ++h.keyPool};return h.keyPool=0,h.prototype.selectTiles=function(e,i){if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"FramebufferTileController","selectTiles","missingSector"));this.assembleTiles(e);for(var n=[],o=0,s=this.currentTiles.length;o<s;o++){var a=this.currentTiles[o];a.sector.overlaps(i)&&(a.selected=!0,n.push(a))}return n},h.prototype.render=function(t){if(0!=this.currentTiles.length){for(var e=[],i=0,n=this.currentTiles.length;i<n;i++){var r=this.currentTiles[i];r.selected&&e.push(r)}t.surfaceTileRenderer.renderTiles(t,e,1);var o=t.currentGlContext,s=t.currentFramebuffer;try{for(o.clearColor(0,0,0,0),i=0,n=e.length;i<n;i++)r=e[i],r.selected=!1,r.bindFramebuffer(t),o.clear(o.COLOR_BUFFER_BIT)}finally{t.bindFramebuffer(s)}}},h.prototype.assembleTiles=function(t){var e=t.timestamp,i=t.globeStateKey;this.currentTimestamp==e&&this.currentGlobeStateKey==i||(this.doAssembleTiles(t),this.currentTimestamp=e,this.currentGlobeStateKey=i)},h.prototype.doAssembleTiles=function(t){if(this.currentTiles=[],t.terrain){0==this.topLevelTiles.length&&this.createTopLevelTiles();for(var e=0,i=this.topLevelTiles.length;e<i;e++){var n=this.topLevelTiles[e];n.update(t),this.isTileVisible(t,n)&&this.addTileOrDescendants(t,n)}}},h.prototype.createTile=function(t,i,n,r){var o=this.key+" "+i.levelNumber+"."+n+"."+r;return new e(t,i,n,r,o)},h.prototype.createTopLevelTiles=function(){a.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles)},h.prototype.addTileOrDescendants=function(t,e){if(this.tileMeetsRenderingCriteria(t,e))return void this.addTile(e);for(var i=e.subdivideToCache(e.level.nextLevel(),this,this.tileCache),n=0,r=i.length;n<r;n++){var o=i[n];o.update(t),this.isTileVisible(t,o)&&this.addTileOrDescendants(t,o)}},h.prototype.addTile=function(t){this.currentTiles.push(t)},h.prototype.isTileVisible=function(t,e){return!(t.globe.projectionLimits&&!e.sector.overlaps(t.globe.projectionLimits))&&(t.pickingMode?e.extent.intersectsFrustum(t.pickFrustum):e.extent.intersectsFrustum(t.navigatorState.frustumInModelCoordinates))},h.prototype.tileMeetsRenderingCriteria=function(t,e){var i=this.detailControl;return(e.sector.minLatitude>=75||e.sector.maxLatitude<=-75)&&(i*=1.2),e.level.isLastLevel()||!e.mustSubdivide(t,i)},h}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(65),i(9),i(13),i(20),i(68)],r=function(t,e,i,n,r,o){"use strict";var s=function(e,r,s,a,h){if(!h||h.length<1)throw new t(i.logMessage(i.LEVEL_SEVERE,"FramebufferTile","constructor","The specified cache name is null, undefined or zero length."));o.call(this,e,r,s,a),this.gpuCacheKey=h,this.textureTransform=n.fromIdentity().setToUnitYFlip(),this.mustClear=!0};return s.prototype=Object.create(o.prototype),s.prototype.clearFramebuffer=function(t){this.mustClear=!0},s.prototype.bindFramebuffer=function(t){var e=t.gpuResourceCache.resourceForKey(this.gpuCacheKey);return e||(e=this.createFramebuffer(t)),t.bindFramebuffer(e),this.mustClear&&(this.doClearFramebuffer(t),this.mustClear=!1),!0},s.prototype.createFramebuffer=function(t){var i=new e(t.currentGlContext,this.tileWidth,this.tileHeight,!1);return t.gpuResourceCache.putResource(this.gpuCacheKey,i,i.size),i},s.prototype.doClearFramebuffer=function(t){var e=t.currentGlContext;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},s.prototype.applyInternalTransform=function(t,e){e.multiplyMatrix(this.textureTransform)},s}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(36)],r=function(t,e,i){"use strict";var n=function(t,e,n,r){i.call(this,t,e,n,r),this.gpuCacheKey=null};return n.prototype=Object.create(i.prototype),n.prototype.size=function(){return i.prototype.size.call(this)},n.prototype.bind=function(t){var e=t.gpuResourceCache.resourceForKey(this.gpuCacheKey);return!!e&&e.bind(t)},n.prototype.applyInternalTransform=function(t,e){},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(9)],r=function(t){"use strict";var e=function(t){this.displayName=t?t:"Layer",this.enabled=!0,this.pickEnabled=!0,this.opacity=1,this.minActiveAltitude=-Number.MAX_VALUE,this.maxActiveAltitude=Number.MAX_VALUE,this.inCurrentFrame=!1,this.time=null};return e.prototype.refresh=function(){},e.prototype.render=function(t){this.inCurrentFrame=!1,this.enabled&&(t.pickingMode&&!this.pickEnabled||this.withinActiveAltitudes(t)&&this.isLayerInView(t)&&this.doRender(t))},e.prototype.doRender=function(t){},e.prototype.withinActiveAltitudes=function(t){var e=t.eyePosition;return!!e&&(e.altitude>=this.minActiveAltitude&&e.altitude<=this.maxActiveAltitude)},e.prototype.isLayerInView=function(t){return!0},e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(73),i(40),i(72),i(9),i(13),i(71),i(53),i(74),i(16),i(19)],r=function(t,e,i,n,r,o,s,a,h,l,u){"use strict";var c=function(){this.imageUrls=[],this.stringCredits=[],this.imageCreditSize=64,this.margin=5,this.opacity=.5,this.creditFont=new n(14)};return c.scratchMatrix=o.fromIdentity(),c.imageTransform=o.fromIdentity(),c.texCoordMatrix=o.fromIdentity(),c.prototype.clear=function(){this.imageUrls=[],this.stringCredits=[]},c.prototype.addImageCredit=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"ScreenCreditController","addImageCredit","missingUrl"));this.imageUrls.indexOf(e)===-1&&this.imageUrls.push(e)},c.prototype.addStringCredit=function(e,n){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"ScreenCreditController","addStringCredit","missingText"));if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"ScreenCreditController","addStringCredit","missingColor"));this.stringCredits.indexOf(e)===-1&&this.stringCredits.push({text:e,color:n||i.WHITE})},c.prototype.drawCredits=function(t){if((0!==this.imageUrls.length||0!==this.stringCredits.length)&&!t.pickingMode&&t.timestamp!=this.lastFrameTimestamp){this.lastFrameTimestamp=t.timestamp,this.beginDrawingCredits(t);for(var e,i=t.navigatorState.viewport.width-(this.margin+this.imageCreditSize),n=0,r=0;r<this.imageUrls.length;r++)e=this.drawImageCredit(t,this.imageUrls[r],i,this.margin),e>0&&(i-=this.margin+this.imageCreditSize,n=u.max(e,n));for(var o=n+this.margin,s=0;s<this.stringCredits.length;s++)this.drawStringCredit(t,this.stringCredits[s],o),o+=this.margin+15;
this.endDrawingCredits(t)}},c.prototype.beginDrawingCredits=function(t){var i,n=t.currentGlContext;t.findAndBindProgram(e),i=t.currentProgram,n.bindBuffer(n.ARRAY_BUFFER,t.unitQuadBuffer3()),n.vertexAttribPointer(i.vertexPointLocation,3,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,t.unitQuadBuffer()),n.vertexAttribPointer(i.vertexTexCoordLocation,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(i.vertexPointLocation),n.enableVertexAttribArray(i.vertexTexCoordLocation),i.loadTextureUnit(n,n.TEXTURE0),i.loadModulateColor(n,!1)},c.prototype.endDrawingCredits=function(t){var e=t.currentGlContext,i=t.currentProgram;e.disableVertexAttribArray(i.vertexPointLocation),e.disableVertexAttribArray(i.vertexTexCoordLocation),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.enable(e.DEPTH_TEST)},c.prototype.drawImageCredit=function(t,e,n,r){var o,s,a,h,l,u;return(h=t.gpuResourceCache.resourceForKey(e))?(o=h.imageWidth,s=h.imageHeight,a=o<=this.imageCreditSize&&this.imageHeight<=this.imageCreditSize?1:o>=s?this.imageCreditSize/o:this.imageCreditSize/s,c.imageTransform.setTranslation(n,r,0),c.imageTransform.setScale(a*o,a*s,1),l=t.currentGlContext,u=t.currentProgram,c.scratchMatrix.copy(t.screenProjection),c.scratchMatrix.multiplyMatrix(c.imageTransform),u.loadModelviewProjection(l,c.scratchMatrix),u.loadTextureEnabled(l,!0),u.loadColor(l,i.WHITE),u.loadOpacity(l,this.opacity),c.texCoordMatrix.setToIdentity(),c.texCoordMatrix.multiplyByTextureTransform(h),u.loadTextureMatrix(l,c.texCoordMatrix),h.bind(t)&&l.drawArrays(l.TRIANGLE_STRIP,0,4),s):(t.gpuResourceCache.retrieveTexture(t.currentGlContext,e),0)},c.prototype.drawStringCredit=function(t,e,i){var n,r,o,s,a,h,l;return s=e.text+this.creditFont.toString(),o=t.gpuResourceCache.resourceForKey(s),o||(o=t.textSupport.createTexture(t,e.text,this.creditFont,!1),t.gpuResourceCache.putResource(s,o,o.size)),n=o.imageWidth,r=o.imageHeight,l=t.navigatorState.viewport.width-(n+this.margin),c.imageTransform.setTranslation(l,i,0),c.imageTransform.setScale(n,r,1),a=t.currentGlContext,h=t.currentProgram,c.scratchMatrix.copy(t.screenProjection),c.scratchMatrix.multiplyMatrix(c.imageTransform),h.loadModelviewProjection(a,c.scratchMatrix),h.loadTextureEnabled(a,!0),h.loadColor(a,e.color),h.loadOpacity(a,this.opacity),c.texCoordMatrix.setToIdentity(),c.texCoordMatrix.multiplyByTextureTransform(o),h.loadTextureMatrix(a,c.texCoordMatrix),o.bind(t)&&a.drawArrays(a.TRIANGLE_STRIP,0,4),!0},c}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(24)],r=function(t){"use strict";var e=function(t,e,i,n){this.x=e,this.y=n,this.xUnits=t,this.yUnits=i};return e.prototype.clone=function(){return new e(this.xUnits,this.x,this.yUnits,this.y)},e.prototype.offsetForSize=function(e,i){var n,r;return n=this.xUnits==WorldWind.OFFSET_FRACTION?e*this.x:this.xUnits==WorldWind.OFFSET_INSET_PIXELS?e-this.x:this.x,r=this.yUnits==WorldWind.OFFSET_FRACTION?i*this.y:this.yUnits==WorldWind.OFFSET_INSET_PIXELS?i-this.y:this.y,new t(n,r)},e.prototype.toString=function(){return this.xUnits+" "+this.x+" "+this.yUnits+" "+this.y},e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(40),i(9)],r=function(t,e,i){"use strict";var n=function(e,n,r,o,s,a){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Font","constructor","missingSize"));if(e<=0)throw new t(i.logMessage(i.LEVEL_SEVERE,"Font","constructor","invalidSize"));this._size=e,this.style=n||"normal",this.variant=r||"normal",this.weight=o||"normal",this.family=s||"sans-serif",this.horizontalAlignment=a||"center"};return Object.defineProperties(n.prototype,{size:{get:function(){return this._size},set:function(t){this._fontString=null,this._size=t}},style:{get:function(){return this._style},set:function(t){this._fontString=null,this._style=t}},variant:{get:function(){return this._variant},set:function(t){this._fontString=null,this._variant=t}},weight:{get:function(){return this._weight},set:function(t){this._fontString=null,this._weight=t}},family:{get:function(){return this._family},set:function(t){this._fontString=null,this._family=t}},horizontalAlignment:{get:function(){return this._horizontalAlignment},set:function(t){this._toString=null,this._horizontalAlignment=t}},fontString:{get:function(){return this._fontString||(this._fontString=this._style+" "+this.variant+" "+this._weight+" "+this._size.toString()+"px "+this._family),this._fontString}}}),n.prototype.toString=function(){return this._toString&&this._fontString||(this._toString=this.fontString+" "+this.horizontalAlignment),this._toString},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(40),i(41),i(9)],r=function(t,e,i,n){"use strict";var r=function(t){var e="attribute vec4 vertexPoint;\nattribute vec4 vertexTexCoord;\nattribute vec4 normalVector;\nuniform mat4 mvpMatrix;\nuniform mat4 mvInverseMatrix;\nuniform mat4 texCoordMatrix;\nuniform bool applyLighting;\nvarying vec2 texCoord;\nvarying vec4 normal;\nvoid main() {gl_Position = mvpMatrix * vertexPoint;\ntexCoord = (texCoordMatrix * vertexTexCoord).st;\nif (applyLighting) {normal = mvInverseMatrix * normalVector;}\n}",n="precision mediump float;\nuniform float opacity;\nuniform vec4 color;\nuniform bool enableTexture;\nuniform bool modulateColor;\nuniform sampler2D textureSampler;\nuniform bool applyLighting;\nvarying vec2 texCoord;\nvarying vec4 normal;\nvoid main() {\nvec4 textureColor = texture2D(textureSampler, texCoord);\nfloat ambient = 0.15; vec4 lightDirection = vec4(0, 0, 1, 0);\nif (enableTexture && !modulateColor)\n    gl_FragColor = textureColor * color * opacity;\nelse if (enableTexture && modulateColor)\n    gl_FragColor = color * floor(textureColor.a + 0.5);\nelse\n    gl_FragColor = color * opacity;\nif (gl_FragColor.a == 0.0) {discard;}\nif (applyLighting) {\n    vec4 n = normal * (gl_FrontFacing ? 1.0 : -1.0);\n    gl_FragColor.rgb *= clamp(ambient + dot(lightDirection, n), 0.0, 1.0);\n}\n}",r=["vertexPoint","normalVector","vertexTexCoord"];i.call(this,t,e,n,r),this.vertexPointLocation=this.attributeLocation(t,"vertexPoint"),this.normalVectorLocation=this.attributeLocation(t,"normalVector"),this.vertexTexCoordLocation=this.attributeLocation(t,"vertexTexCoord"),this.mvpMatrixLocation=this.uniformLocation(t,"mvpMatrix"),this.mvInverseMatrixLocation=this.uniformLocation(t,"mvInverseMatrix"),this.colorLocation=this.uniformLocation(t,"color"),this.textureEnabledLocation=this.uniformLocation(t,"enableTexture"),this.modulateColorLocation=this.uniformLocation(t,"modulateColor"),this.textureUnitLocation=this.uniformLocation(t,"textureSampler"),this.textureMatrixLocation=this.uniformLocation(t,"texCoordMatrix"),this.opacityLocation=this.uniformLocation(t,"opacity"),this.applyLightingLocation=this.uniformLocation(t,"applyLighting")};return r.key="WorldWindGpuBasicTextureProgram",r.prototype=Object.create(i.prototype),r.prototype.loadModelviewInverse=function(e,i){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"BasicTextureProgram","loadModelviewInverse","missingMatrix"));this.loadUniformMatrix(e,i,this.mvInverseMatrixLocation)},r.prototype.loadModelviewProjection=function(e,i){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"BasicTextureProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(e,i,this.mvpMatrixLocation)},r.prototype.loadColor=function(e,i){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"BasicTextureProgram","loadColor","missingColor"));this.loadUniformColor(e,i,this.colorLocation)},r.prototype.loadTextureEnabled=function(t,e){t.uniform1i(this.textureEnabledLocation,e?1:0)},r.prototype.loadModulateColor=function(t,e){t.uniform1i(this.modulateColorLocation,e?1:0)},r.prototype.loadTextureUnit=function(t,e){t.uniform1i(this.textureUnitLocation,e-t.TEXTURE0)},r.prototype.loadTextureMatrix=function(t,e){this.loadUniformMatrix(t,e,this.textureMatrixLocation)},r.prototype.loadOpacity=function(t,e){t.uniform1f(this.opacityLocation,e)},r.prototype.loadApplyLighting=function(t,e){t.uniform1i(this.applyLightingLocation,e)},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(9),i(25)],r=function(t,e){"use strict";var i=function(){this.displayName="Renderable",this.enabled=!0,this.pickDelegate=null,this.userProperties={}};return i.prototype.render=function(i){throw new e(t.logMessage(t.LEVEL_SEVERE,"Renderable","render","abstractInvocation"))},i}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(8),i(11),i(7),i(18),i(9),i(38),i(53),i(74),i(31),i(76),i(25),i(19)],r=function(t,e,i,n,r,o,s,a,h,l,u,c){"use strict";var d=function(t){a.call(this),this._displayName="Surface Shape",this._attributes=t?t:new l(null),this._highlightAttributes=null,this._highlighted=!1,this._enabled=!0,this._pathType=WorldWind.GREAT_CIRCLE,this._maximumNumEdgeIntervals=d.DEFAULT_NUM_EDGE_INTERVALS,this._polarThrottle=d.DEFAULT_POLAR_THROTTLE,this._sector=null,this.pickDelegate=null,this._sectors=[],this._locations=null,this._boundaries=null,this._interiorGeometry=null,this._outlineGeometry=null,this._isInteriorInhibited=!1,this.stateKeyInvalid=!0,this._attributesStateKey=null,this.isPrepared=!1,this.layer=null,this.pickColor=null};return d.prototype=Object.create(a.prototype),Object.defineProperties(d.prototype,{stateKey:{get:function(){if(this._attributesStateKey){var t=null;this._highlighted?this._highlightAttributes&&(t=this._highlightAttributes.stateKey):this._attributes&&(t=this._attributes.stateKey),t!=this._attributesStateKey&&(this._attributesStateKey=t,this.stateKeyInvalid=!0)}else this._highlighted?this._highlightAttributes&&(this._attributesStateKey=this._highlightAttributes.stateKey):this._attributes&&(this._attributesStateKey=this._attributes.stateKey),this._attributesStateKey&&(this.stateKeyInvalid=!0);return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey()),this._stateKey}},displayName:{get:function(){return this._displayName},set:function(t){this.stateKeyInvalid=!0,this._displayName=t}},attributes:{get:function(){return this._attributes},set:function(t){this.stateKeyInvalid=!0,this._attributes=t,this._attributesStateKey=t.stateKey}},highlightAttributes:{get:function(){return this._highlightAttributes},set:function(t){this.stateKeyInvalid=!0,this._highlightAttributes=t}},highlighted:{get:function(){return this._highlighted},set:function(t){this.stateKeyInvalid=!0,this._highlighted=t}},enabled:{get:function(){return this._enabled},set:function(t){this.stateKeyInvalid=!0,this._enabled=t}},pathType:{get:function(){return this._pathType},set:function(t){this.stateKeyInvalid=!0,this._pathType=t}},maximumNumEdgeIntervals:{get:function(){return this._maximumNumEdgeIntervals},set:function(t){this.stateKeyInvalid=!0,this._maximumNumEdgeIntervals=t}},polarThrottle:{get:function(){return this._polarThrottle},set:function(t){this.stateKeyInvalid=!0,this._polarThrottle=t}},sector:{get:function(){return this._sector}}}),d.staticStateKey=function(t){return t.stateKeyInvalid=!1,t.highlighted&&t._highlightAttributes?t._attributesStateKey=t._highlightAttributes.stateKey:t._attributes?t._attributesStateKey=t._attributes.stateKey:t._attributesStateKey=null,"dn "+t.displayName+" at "+(t._attributesStateKey?t._attributesStateKey:"null")+" hi "+t.highlighted+" en "+t.enabled+" pt "+t.pathType+" ne "+t.maximumNumEdgeIntervals+" po "+t.polarThrottle+" se ["+t.sector.minLatitude+","+t.sector.maxLatitude+","+t.sector.minLongitude+","+t.sector.maxLongitude+"]"},d.prototype.computeStateKey=function(){return d.staticStateKey(this)},d.prototype.area=function(t,e){throw new o(r.logMessage(r.LEVEL_SEVERE,"SurfaceShape","area","notYetImplemented"))},d.prototype.computeBoundaries=function(e){throw new t(r.logMessage(r.LEVEL_SEVERE,"SurfaceShape","computeBoundaries","abstractInvocation"))},d.prototype.render=function(t){this.enabled&&(this.layer=t.currentLayer,this.prepareBoundaries(t),t.surfaceShapeTileBuilder.insertSurfaceShape(this))},d.prototype.interpolateLocations=function(t){var e,i,n,r=t[0],o=r,s=!0,a=!0,h=0,l=!0;for(this._locations=[r],i=1,n=t.length;i<n;i+=1)e=o,a=s,o=t[i],s=o.latitude==r.latitude&&o.longitude==r.longitude,l=!0,(s||a)&&(h+=1,h>2&&(l=!1)),l&&this.interpolateEdge(e,o,this._locations),this._locations.push(o),e=o;this._isInteriorInhibited||e.latitude==r.latitude&&e.longitude==r.longitude||(this.interpolateEdge(e,r,this._locations),this._locations.push(r))},d.prototype.interpolateEdge=function(t,e,i){var r,o,s=n.greatCircleDistance(t,e),a=Math.round(this._maximumNumEdgeIntervals*s/Math.PI);if(a>0){r=1/a,o=t;for(var h=this.throttledStep(r,o);h<1;h+=this.throttledStep(r,o))o=new n(0,0),n.interpolateAlongPath(this._pathType,h,t,e,o),i.push(o)}},d.prototype.throttledStep=function(t,i){var n=Math.cos(i.latitude*e.DEGREES_TO_RADIANS);n*=n;var r=this._polarThrottle/(1+this._polarThrottle);return t*(1-r+r*n)},d.prototype.prepareBoundaries=function(t){this.isPrepared||(this._boundaries||this.computeBoundaries(t),this._locations||this.interpolateLocations(this._boundaries),this.prepareGeometry(t),this.prepareSectors(),this.isPrepared=!0)},d.prototype.computeSectors=function(t){return this._sectors&&this._sectors.length>0?this._sectors:(this.prepareBoundaries(t),this._sectors)},d.prototype.prepareSectors=function(){var t=this._boundaries;if(t){this._sector=new h(-90,90,-180,180),this._sector.setToBoundingSector(t);var e=this.containsPole(t);if(e!=n.poles.NONE?(e==n.poles.NORTH?this._sector=new h(this._sector.minLatitude,90,-180,180):this._sector=new h(-90,this._sector.maxLatitude,-180,180),this._sectors=[this._sector]):n.locationsCrossDateLine(t)?this._sectors=h.splitBoundingSectors(t):this._sector.isEmpty()||(this._sectors=[this._sector]),this._sectors&&this._pathType===WorldWind.GREAT_CIRCLE)for(var i=0,r=this._sectors.length;i<r;i+=1){var o=this._sectors[i],s=n.greatCircleArcExtremeLocations(t),a=Math.min(o.minLatitude,s[0].latitude),l=Math.max(o.maxLatitude,s[1].latitude);this._sectors[i]=new h(a,l,o.minLongitude,o.maxLongitude)}}},d.prototype.prepareGeometry=function(t){var e;this._interiorGeometry=[],this._outlineGeometry=[];var i=this._locations,r=this.containsPole(i);if(r!=n.poles.NONE){var o=this.cutAlongDateLine(i,r,t.globe);this._interiorGeometry.push(o),e=this.repeatAroundDateline(i),this._outlineGeometry.push(e[0]),e.length>1&&this._outlineGeometry.push(e[1])}else n.locationsCrossDateLine(i)?(e=this.repeatAroundDateline(i),this._interiorGeometry.push(e[0]),this._interiorGeometry.push(e[1]),this._outlineGeometry.push(e[0]),this._outlineGeometry.push(e[1])):(this._interiorGeometry.push(i),this._outlineGeometry.push(i))},d.prototype.containsPole=function(t){for(var e=!1,i=90,r=-90,o=t[0],s=1,a=t.length;s<a;s+=1){var h=t[s];n.locationsCrossDateLine([o,h])&&(e=!e),i=Math.min(i,h.latitude),r=Math.max(r,h.latitude),o=h}var l=t[0];return n.locationsCrossDateLine([l,o])&&(e=!e),e?i>0?n.poles.NORTH:r<0?n.poles.SOUTH:Math.abs(r)>=Math.abs(i)?n.poles.NORTH:n.poles.SOUTH:n.poles.NONE},d.prototype.cutAlongDateLine=function(t,e,i){if(e==n.poles.NONE)return t;for(var r=[],o=e==n.poles.NORTH?90:-90,s=t[t.length-1],a=0,h=t.length;a<h;a+=1){var l=t[a];if(r.push(s),n.locationsCrossDateLine([s,l])){var u=n.intersectionWithMeridian(s,l,180,i),d=c.signum(s.longitude),p=u,f=180*d,g=-f;r.push(new n(p,f)),r.push(new n(o,f)),r.push(new n(o,g)),r.push(new n(p,g))}s=l}return r.push(s),r},d.prototype.repeatAroundDateline=function(t){var e=0,i=!1,r=[],o=t[0];r.push(o);for(var s=1,a=t.length;s<a;s+=1){var h=t[s];n.locationsCrossDateLine([o,h])&&(0==e&&(e=o.longitude<0?-360:360),i=!i),i?r.push(new n(h.latitude,h.longitude+e)):r.push(h),o=h}var l=[r];if(0!=e){var u=r;for(r=[],s=0,a=u.length;s<a;s+=1){var c=u[s];r.push(new n(c.latitude,c.longitude-e))}l.push(r)}return l},d.prototype.resetPickColor=function(){this.pickColor=null},d.prototype.renderToTexture=function(t,e,i,n,r,o){var a,h,l,u,c=[],d=t.pickingMode,p=this._highlighted?this._highlightAttributes||this._attributes:this._attributes;if(d&&!this.pickColor&&(this.pickColor=t.uniquePickColor()),!this._isInteriorInhibited&&p.drawInterior)for(e.fillStyle=d?this.pickColor.toRGBAString():p.interiorColor.toRGBAString(),a=0,h=this._interiorGeometry.length;a<h;a+=1)if(l=0,u=2*this._outlineGeometry[a].length,c.splice(0,c.length),this.transformPath(this._interiorGeometry[a],i,n,r,o,c)){for(e.beginPath(),e.moveTo(c[l++],c[l++]);l<u;)e.lineTo(c[l++],c[l++]);e.closePath(),e.fill()}if(p.drawOutline&&p.outlineWidth>0){e.lineWidth=4*p.outlineWidth,e.strokeStyle=d?this.pickColor.toRGBAString():p.outlineColor.toRGBAString();this._attributes.outlineStipplePattern,this._attributes.outlineStippleFactor;for(a=0,h=this._outlineGeometry.length;a<h;a+=1)if(c.splice(0,c.length),this.transformPath(this._outlineGeometry[a],i,n,r,o,c)){var f=c[0],g=c[1],E=f,m=g,v=f,y=g,L=!0,w=!0,S=0;for(l=2,u=c.length;l<u;)E=v,m=y,L=w,v=c[l++],y=c[l++],w=v==f&&y==g,(L||w)&&(S+=1,S>2)||(e.beginPath(),e.moveTo(E,m),e.lineTo(v,y),e.stroke())}}if(d){var R=new s(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);t.resolvePick(R)}},d.prototype.transformPath=function(t,e,i,n,r,o){var s,a,h,l,u,c,d,p,f,g,E,m,v,y,L,w,S,R,T,_,x=4;for(R=0,S=t[0],u=S.longitude*e+n,c=S.latitude*i+r,w=!0,f=E=s=h=u,g=m=a=l=c,o[R++]=h,o[R++]=l,T=1,_=t.length;T<_;T+=1)S=t[T],d=h,p=l,h=S.longitude*e+n,l=S.latitude*i+r,w=h==u&&l==c,v=h-s,y=l-a,L=v*v+y*y,(w||L>=x)&&(f=Math.min(f,h),E=Math.max(E,h),g=Math.min(g,l),m=Math.max(m,l),o[R-2]==d&&o[R-1]==p||(o[R++]=d,o[R++]=p),o[R++]=h,o[R++]=l,s=h,a=l);return E-f>=2||m-g>=2},d.DEFAULT_NUM_EDGE_INTERVALS=128,d.DEFAULT_POLAR_THROTTLE=10,d}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(40),i(62)],r=function(t,e){"use strict";var i=function(e){this._drawInterior=!e||e._drawInterior,this._drawOutline=!e||e._drawOutline,this._enableLighting=!!e&&e._enableLighting,this._interiorColor=e?e._interiorColor:t.WHITE,this._outlineColor=e?e._outlineColor:t.RED,this._outlineWidth=e?e._outlineWidth:1,this._outlineStippleFactor=e?e._outlineStippleFactor:0,this._outlineStipplePattern=e?e._outlineStipplePattern:61680,this._imageSource=e?e._imageSource:null,this._depthTest=!e||e._depthTest,this._drawVerticals=!!e&&e._drawVerticals,this._applyLighting=!!e&&e._applyLighting,this.stateKeyInvalid=!0};return i.prototype.computeStateKey=function(){return"di "+this._drawInterior+" do "+this._drawOutline+" el "+this._enableLighting+" ic "+this._interiorColor.toHexString(!0)+" oc "+this._outlineColor.toHexString(!0)+" ow "+this._outlineWidth+" osf "+this._outlineStippleFactor+" osp "+this._outlineStipplePattern+" is "+(this._imageSource?this.imageSource instanceof e?this.imageSource.key:this.imageSource:"null")+" dt "+this._depthTest+" dv "+this._drawVerticals+" li "+this._applyLighting},Object.defineProperties(i.prototype,{stateKey:{get:function(){return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey(),this.stateKeyInvalid=!1),this._stateKey}},drawInterior:{get:function(){return this._drawInterior},set:function(t){this._drawInterior=t,this.stateKeyInvalid=!0}},drawOutline:{get:function(){return this._drawOutline},set:function(t){this._drawOutline=t,this.stateKeyInvalid=!0}},enableLighting:{get:function(){return this._enableLighting},set:function(t){this._enableLighting=t,this.stateKeyInvalid=!0}},interiorColor:{get:function(){return this._interiorColor},set:function(t){this._interiorColor=t,this.stateKeyInvalid=!0}},outlineColor:{get:function(){return this._outlineColor},set:function(t){this._outlineColor=t,this.stateKeyInvalid=!0}},outlineWidth:{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth=t,this.stateKeyInvalid=!0}},outlineStipplePattern:{get:function(){return this._outlineStipplePattern},set:function(t){this._outlineStipplePattern=t,this.stateKeyInvalid=!0}},outlineStippleFactor:{get:function(){return this._outlineStippleFactor},set:function(t){this._outlineStippleFactor=t,this.stateKeyInvalid=!0}},imageSource:{get:function(){return this._imageSource},set:function(t){this._imageSource=t,this.stateKeyInvalid=!0}},depthTest:{get:function(){return this._depthTest},set:function(t){this._depthTest=t,this.stateKeyInvalid=!0}},drawVerticals:{get:function(){return this._drawVerticals},set:function(t){this._drawVerticals=t,this.stateKeyInvalid=!0}},applyLighting:{get:function(){return this._applyLighting},set:function(t){this._applyLighting=t,this.stateKeyInvalid=!0}}}),i}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(63),i(49),i(41),i(45),i(44),i(18),i(9),i(13),i(46),i(23),i(38),i(53),i(20),i(31),i(75),i(78),i(54),i(55),i(56),i(68),i(36)],r=function(t,e,i,n,r,o,s,a,h,l,u,c,d,p,f,g,E,m,v,y,L,w){"use strict";var S=function(){this.numRowsTilesInTopLevel=4,this.numColumnsTilesInTopLevel=8,this.maximumSubdivisionDepth=15,this.tileWidth=256,this.tileHeight=256,this.levels=new o(f.FULL_SPHERE,new s(180/this.numRowsTilesInTopLevel,360/this.numColumnsTilesInTopLevel),this.maximumSubdivisionDepth,this.tileWidth,this.tileHeight),this.surfaceShapes=[],this.surfaceShapeTiles=[],this.topLevelTiles=[],this.sector=new f(-90,90,-180,180),this.detailControl=1.25,this.tileCache=new l(5e5,4e5)};return S.prototype.clear=function(){this.surfaceShapeTiles.splice(0,this.surfaceShapeTiles.length),this.surfaceShapes.splice(0,this.surfaceShapes.length)},S.prototype.insertSurfaceShape=function(t){this.surfaceShapes.push(t)},S.prototype.doRender=function(t){if(t.pickingMode){for(var e=0,i=this.surfaceShapes.length;e<i;e+=1)this.surfaceShapes[e].resetPickColor();S.pickSequence+=1;var n=this.surfaceShapeTiles,r=this.topLevelTiles;this.surfaceShapeTiles=[],this.topLevelTiles=[],this.buildTiles(t),t.deepPicking?this.doDeepPickingRender(t):t.surfaceTileRenderer.renderTiles(t,this.surfaceShapeTiles,1),this.surfaceShapeTiles=n,this.topLevelTiles=r}else this.buildTiles(t),t.surfaceTileRenderer.renderTiles(t,this.surfaceShapeTiles,1)},S.prototype.doDeepPickingRender=function(t){var e,i,n,r,o,s,a,h,l,u=[];for(o=0,s=t.objectsAtPickPoint.objects.length;o<s;o+=1)a=t.objectsAtPickPoint.objects[o],a.userObject instanceof g&&(h=a.userObject,u.indexOf(h)<0&&(u.push(h),t.objectsAtPickPoint.objects.splice(o,1),o-=1,s-=1));if(!(u.length<=0)){var c=[];for(n=0,r=u.length;n<r;n+=1){for(h=u[n],e=0,i=this.surfaceShapeTiles.length;e<i;e+=1)l=this.surfaceShapeTiles[e],l.setShapes([h]),l.updateTexture(t);t.surfaceTileRenderer.renderTiles(t,this.surfaceShapeTiles,1);var p=t.readPickColor(t.pickPoint);p&&h.pickColor.equals(p)&&(a=new d(h.pickColor.clone(),h.pickDelegate?h.pickDelegate:h,null,h.layer,!1),c.push(a))}for(o=0,s=t.objectsAtPickPoint.objects.length;o<s;o+=1)a=t.objectsAtPickPoint.objects[o],a.userObject instanceof g&&(t.objectsAtPickPoint.objects.splice(o,1),o-=1,s-=1);for(o=0,s=c.length;o<s;o+=1)a=c[o],t.objectsAtPickPoint.objects.push(a)}},S.prototype.buildTiles=function(e){if(!e)throw new t(a.logMessage(a.LEVEL_SEVERE,"SurfaceShapeTileBuilder","buildTiles","missingDc"));if(this.surfaceShapes&&!(this.surfaceShapes.length<1)){this.assembleTiles(e),this.surfaceShapes.splice(0,this.surfaceShapes.length);for(var i=0,n=this.surfaceShapeTiles.length;i<n;i+=1){var r=this.surfaceShapeTiles[i];r.clearShapes()}}},S.prototype.assembleTiles=function(t){var e,i,n,r,o,s,a;this.topLevelTiles.length<1&&this.createTopLevelTiles();var h={};for(i=0,n=this.surfaceShapes.length;i<n;i+=1){var l=this.surfaceShapes[i],u=l.computeSectors(t);if(u)for(s=0,a=u.length;s<a;s+=1){var c=u[s];for(r=0,o=this.topLevelTiles.length;r<o;r+=1)if(e=this.topLevelTiles[r],e.sector.intersects(c)){var d=e.tileKey;h[d]=e,e.addSurfaceShape(l)}}}for(var p in h)h.hasOwnProperty(p)&&(e=h[p],this.addTileOrDescendants(t,this.levels,null,e))},S.prototype.addTileOrDescendants=function(t,e,i,n){if(!this.intersectsFrustum(t,n))return void n.clearShapes();if(null!=i&&this.addIntersectingShapes(t,i,n),n.hasShapes()){if(this.meetsRenderCriteria(t,e,n))return void this.addTile(t,n);for(var r=e.level(n.level.levelNumber+1),o=t.pickingMode?n.subdivide(r,this):n.subdivideToCache(r,this,this.tileCache),s=0,a=o.length;s<a;s+=1){var h=o[s];this.addTileOrDescendants(t,e,n,h)}n.clearShapes()}},S.prototype.addIntersectingShapes=function(t,e,i){if(e.hasShapes()&&i.sector.intersects(e.sector))if(i.getSector().contains(e.sector))i.addAllSurfaceShapes(e.getShapes());else for(var n=e.getShapes(),r=0,o=n.length;r<o;r+=1){var s=n[r],a=s.computeSectors(t);if(a)for(var h=0,l=a.length;h<l;h+=1){var u=a[h];if(i.getSector().intersects(u)){i.addSurfaceShape(s);break}}}},S.prototype.addTile=function(t,e){t.pickingMode&&(e.pickSequence=S.pickSequence),e.needsUpdate(t)&&e.updateTexture(t),this.surfaceShapeTiles.push(e)},S.prototype.createTile=function(t,e,i,n){return new E(t,e,i,n)},S.prototype.createTopLevelTiles=function(){w.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles)},S.prototype.intersectsFrustum=function(t,e){return!(t.globe.projectionLimits&&!e.sector.overlaps(t.globe.projectionLimits))&&(e.update(t),e.extent.intersectsFrustum(t.pickingMode?t.pickFrustum:t.navigatorState.frustumInModelCoordinates))},S.prototype.meetsRenderCriteria=function(t,e,i){return i.level.levelNumber==e.lastLevel().levelNumber||!i.mustSubdivide(t,this.detailControl)},S.pickSequence=0,S}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(11),i(7),i(45),i(9),i(31),i(21),i(68)],r=function(t,e,i,n,r,o,s){"use strict";var a=function(t,e,i,n){s.call(this,t,e,i,n),this.surfaceShapes=[],this.sector=t,this.cacheKey=null,this.pickSequence=0,this.surfaceShapeStateKeys=[],this.prevSurfaceShapes=[],this.createCtx2D()};return a.prototype=Object.create(s.prototype),a.prototype.clearShapes=function(){var t=this.prevSurfaceShapes;this.prevSurfaceShapes=this.surfaceShapes,this.surfaceShapes=t,this.surfaceShapes.splice(0,this.surfaceShapes.length)},a.prototype.hasShapes=function(){return this.surfaceShapes.length>0},a.prototype.getShapes=function(){return this.surfaceShapes},a.prototype.setShapes=function(t){this.surfaceShapes=t},a.prototype.getSector=function(){return this.sector},a.prototype.addSurfaceShape=function(t){this.surfaceShapes.push(t),this.surfaceShapeStateKeys.push(t.stateKey)},a.prototype.addAllSurfaceShapes=function(t){for(var e=0,i=t.length;e<i;e+=1){var n=t[e];this.addAllSurfaceShapes(n)}},a.prototype.needsUpdate=function(t){var e,i,n,r;if(this.prevSurfaceShapes.length!=this.surfaceShapes.length)return!0;for(e=0,i=this.prevSurfaceShapes.length;e<i;e+=1)if(n=this.prevSurfaceShapes[e],this.surfaceShapes.indexOf(n)<0)return!0;for(e=0,i=this.surfaceShapes.length;e<i;e+=1)if(n=this.surfaceShapes[e],this.prevSurfaceShapes.indexOf(n)<0)return!0;for(e=0,i=this.surfaceShapes.length;e<i;e+=1)if(n=this.surfaceShapes[e],r=this.surfaceShapeStateKeys[e],r!=n.stateKey)return!0;return!this.hasTexture(t)},a.prototype.hasTexture=function(t){if(t.pickingMode)return!1;var e=t.gpuResourceCache;this.gpuCacheKey||(this.gpuCacheKey=this.getCacheKey());var i=e.resourceForKey(this.gpuCacheKey);return!!i},a.prototype.updateTexture=function(t){var e=t.currentGlContext,i=a.canvas;i.width=this.tileWidth,i.height=this.tileHeight;for(var n=a.ctx2D,r=this.tileWidth/this.sector.deltaLongitude(),s=-this.tileHeight/this.sector.deltaLatitude(),h=-this.sector.minLongitude*r,l=-this.sector.maxLatitude*s,u=0,c=this.surfaceShapes.length;u<c;u+=1){var d=this.surfaceShapes[u];this.surfaceShapeStateKeys[u]=d.stateKey,d.renderToTexture(t,n,r,s,h,l)}var p=new o(e,i),f=t.gpuResourceCache;return this.gpuCacheKey=this.getCacheKey(),f.putResource(this.gpuCacheKey,p,p.size),p},a.prototype.getCacheKey=function(){return this.cacheKey||(this.cacheKey="SurfaceShapeTile:"+this.tileKey+","+this.pickSequence.toString()),this.cacheKey},a.prototype.createCtx2D=function(){a.ctx2D||(a.canvas=document.createElement("canvas"),a.ctx2D=a.canvas.getContext("2d"))},a.canvas=null,a.ctx2D=null,a}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(13),i(78),i(80)],r=function(t,e,i,n,r){"use strict";var o=function(){this.texMaskMatrix=i.fromIdentity(),this.texSamplerMatrix=i.fromIdentity(),this.isSurfaceShapeTileRendering=!1};return o.prototype.renderTiles=function(i,r,o,s){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceTileRenderer","renderTiles","Specified surface tiles array is null or undefined."));if(!(r.length<1)){var a,h,l,u,c=i.terrain,d=i.currentGlContext,p=0,f=1;if(c){this.isSurfaceShapeTileRendering=r[0]instanceof n,o*=i.surfaceOpacity,a=this.beginRendering(i,o),c.beginRendering(i);try{for(var g=0,E=c.surfaceGeometry.length;g<E;g++){h=c.surfaceGeometry[g],l=h.sector,c.beginRenderingTile(i,h);try{for(var m=0,v=r.length;m<v;m++)u=r[m],u.sector.overlaps(l)&&u.bind(i)&&(i.pickingMode?u.pickColor&&a.loadColor(d,u.pickColor):s&&u.opacity!=f&&(a.loadOpacity(d,o*u.opacity),f=u.opacity),this.applyTileState(i,h,u),c.renderTile(i,h),++p)}catch(t){console.log(t)}finally{c.endRenderingTile(i,h)}}}catch(t){console.log(t)}finally{c.endRendering(i),this.endRendering(i),i.frameStatistics.incrementRenderedTileCount(p)}}}},o.prototype.beginRendering=function(t,e){var i=t.currentGlContext,n=t.findAndBindProgram(r);return n.loadTexSampler(i,i.TEXTURE0),t.pickingMode&&!this.isSurfaceShapeTileRendering?n.loadModulateColor(i,!0):(n.loadModulateColor(i,!1),n.loadOpacity(i,e)),n},o.prototype.endRendering=function(t){var e=t.currentGlContext;e.bindTexture(e.TEXTURE_2D,null)},o.prototype.applyTileState=function(t,e,i){var n=t.currentGlContext,r=t.currentProgram,o=e.sector,s=o.deltaLatitude(),a=o.deltaLongitude(),h=i.sector,l=h.deltaLatitude(),u=h.deltaLongitude(),c=l>0?l:1,d=u>0?u:1,p=a/d,f=s/c,g=-(h.minLongitude-o.minLongitude)/d,E=-(h.minLatitude-o.minLatitude)/c;this.texMaskMatrix.set(p,0,0,g,0,f,0,E,0,0,1,0,0,0,0,1),this.texSamplerMatrix.setToUnitYFlip(),i.applyInternalTransform(t,this.texSamplerMatrix),this.texSamplerMatrix.multiplyMatrix(this.texMaskMatrix),r.loadTexSamplerMatrix(n,this.texSamplerMatrix),r.loadTexMaskMatrix(n,this.texMaskMatrix)},o}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(40),i(41),i(9)],r=function(t,e,i,n){"use strict";var r=function(t){var e="attribute vec4 vertexPoint;\nattribute vec4 vertexTexCoord;\nuniform mat4 mvpMatrix;\nuniform mat4 texSamplerMatrix;\nuniform mat4 texMaskMatrix;\nvarying vec2 texSamplerCoord;\nvarying vec2 texMaskCoord;\nvoid main() {\ngl_Position = mvpMatrix * vertexPoint;\ntexSamplerCoord = (texSamplerMatrix * vertexTexCoord).st;\ntexMaskCoord = (texMaskMatrix * vertexTexCoord).st;\n}",n="precision mediump float;\nuniform sampler2D texSampler;\nuniform float opacity;\nuniform vec4 color;\nuniform bool modulateColor;\nvarying vec2 texSamplerCoord;\nvarying vec2 texMaskCoord;\nbool isInsideTextureImage(const vec2 coord) {\n    return coord.x >= 0.0 && coord.x <= 1.0 && coord.y >= 0.0 && coord.y <= 1.0;\n}\nvoid main(void) {\nfloat mask = float(isInsideTextureImage(texMaskCoord));if (modulateColor) {\n    gl_FragColor = color * mask * floor(texture2D(texSampler, texSamplerCoord).a + 0.5);\n} else {\n    gl_FragColor = texture2D(texSampler, texSamplerCoord) * mask * opacity;\n}\n}";i.call(this,t,e,n),this.vertexPointLocation=this.attributeLocation(t,"vertexPoint"),this.vertexTexCoordLocation=this.attributeLocation(t,"vertexTexCoord"),this.mvpMatrixLocation=this.uniformLocation(t,"mvpMatrix"),this.colorLocation=this.uniformLocation(t,"color"),this.modulateColorLocation=this.uniformLocation(t,"modulateColor"),this.texSamplerMatrixLocation=this.uniformLocation(t,"texSamplerMatrix"),this.texMaskMatrixLocation=this.uniformLocation(t,"texMaskMatrix"),this.texSamplerLocation=this.uniformLocation(t,"texSampler"),this.opacityLocation=this.uniformLocation(t,"opacity"),this.vertexPointLocation=-1};return r.key="WorldWindGpuSurfaceTileRenderingProgram",r.prototype=Object.create(i.prototype),r.prototype.loadModelviewProjection=function(e,i){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(e,i,this.mvpMatrixLocation)},r.prototype.loadTexSamplerMatrix=function(e,i){
if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadTexSamplerMatrix","missingMatrix"));this.loadUniformMatrix(e,i,this.texSamplerMatrixLocation)},r.prototype.loadTexMaskMatrix=function(e,i){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadTexMaskMatrix","missingMatrix"));this.loadUniformMatrix(e,i,this.texMaskMatrixLocation)},r.prototype.loadTexSampler=function(t,e){t.uniform1i(this.texSamplerLocation,e-WebGLRenderingContext.TEXTURE0)},r.prototype.loadOpacity=function(t,e){t.uniform1f(this.opacityLocation,e)},r.prototype.loadColor=function(e,i){if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadColor","missingColor"));this.loadUniformColor(e,i,this.colorLocation)},r.prototype.loadModulateColor=function(t,e){t.uniform1i(this.modulateColorLocation,e?1:0)},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(73),i(40),i(9),i(13),i(21),i(24)],r=function(t,e,i,n,r,o,s){"use strict";var a=function(){this.canvas2D=document.createElement("canvas"),this.ctx2D=this.canvas2D.getContext("2d"),this.lineSpacing=.15,this.strokeStyle="rgba(0, 0, 0, 0.5)",this.strokeWidth=4};return a.prototype.textSize=function(t,e,i){if(0===t.length)return new s(0,0);this.ctx2D.font=e.fontString;for(var n=t.split("\n"),r=n.length*(e.size*(1+this.lineSpacing)),o=0,a=0;a<n.length;a++)o=Math.max(o,this.ctx2D.measureText(n[a]).width);return i&&(o+=this.strokeWidth,r+=this.strokeWidth),new s(o,r)},a.prototype.createTexture=function(t,e,n,r){var s=t.currentGlContext,a=this.ctx2D,h=this.canvas2D,l=this.textSize(e,n,r),u=e.split("\n"),c=r?this.strokeWidth/2:0,d=t.pixelScale;h.width=Math.ceil(l[0])*d,h.height=Math.ceil(l[1])*d,a.scale(d,d),a.font=n.fontString,a.textBaseline="top",a.textAlign=n.horizontalAlignment,a.fillStyle=i.WHITE.toHexString(!1),a.strokeStyle=this.strokeStyle,a.lineWidth=this.strokeWidth,a.lineCap="round",a.lineJoin="round","left"===n.horizontalAlignment?a.translate(c,0):"right"===n.horizontalAlignment?a.translate(l[0]-c,0):a.translate(l[0]/2,0);for(var p=0;p<u.length;p++)r&&a.strokeText(u[p],0,0),a.fillText(u[p],0,0),a.translate(0,n.size*(1+this.lineSpacing)+c);return new o(s,h)},a.prototype.getMaxLineHeight=function(t){return this.textSize("_É",t,0)[1]},a.prototype.wrap=function(e,i,r,o){if(!e)throw new t(n.logMessage(n.WARNING,"TextSupport","wrap","missing text"));var s,a=e.split("\n"),h="";for(s=0;s<a.length;s++)a[s]=this.wrapLine(a[s],i,o);var l=0,u=!1,c=this.getMaxLineHeight(o);for(s=0;s<a.length&&!u;s++){for(var d=a[s].split("\n"),p=0;p<d.length&&!u;p++)r<=0||l+c<=r?(h+=d[p],l+=c+this.lineSpacing,p<d.length-1&&(h+="\n")):u=!0;s<a.length-1&&!u&&(h+="\n")}return u&&(h.length>0&&(h=h.substring(0,h.length-1)),h+="..."),h},a.prototype.wrapLine=function(t,e,i){var n="",r=t.trim(),o=this.textSize(r,i,0);if(o[0]>e){for(var s="",a=0,h=r.indexOf(" ",a+1);a<r.length;){h==-1&&(h=r.length);var l=r.substring(a,h),u=s+l;this.textSize(u,i,0)[0]<=e?s+=l:0!=s.length?(n+=s,n+="\n",s="",s+=l.trim()):s+=l.trim(),a=h,a<r.length-1&&(h=r.indexOf(" ",a+1))}n+=s}else n+=r;return n},a}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(84),i(69),i(9),i(13),i(83),i(31),i(86),i(16),i(43)],r=function(t,e,i,n,r,o,s,a,h,l){"use strict";var u=function(t){i.call(this,"Atmosphere"),this.pickEnabled=!1,this._nightImageSource=t||WorldWind.configuration.baseUrl+"images/dnb_land_ocean_ice_2012.png",this._lightLocation=null,this._activeLightDirection=new h(0,0,0),this._fullSphereSector=s.FULL_SPHERE,this._skyData={},this._skyWidth=128,this._skyHeight=128,this._numIndices=0,this._texMatrix=o.fromIdentity(),this._activeTexture=null};return u.prototype=Object.create(i.prototype),Object.defineProperties(u.prototype,{lightLocation:{get:function(){return this._lightLocation},set:function(t){this._lightLocation=t}},nightImageSource:{get:function(){return this._nightImageSource},set:function(t){this._nightImageSource=t}}}),u.prototype.doRender=function(t){t.globe.is2D()||(this.determineLightDirection(t),this.drawSky(t),this.drawGround(t))},u.prototype.applySkyVertices=function(t){var e,i,n=t.currentGlContext,r=t.currentProgram,o=this._skyData;o.verticesVboCacheKey||(o.verticesVboCacheKey=t.gpuResourceCache.generateCacheKey()),i=t.gpuResourceCache.resourceForKey(o.verticesVboCacheKey),i?(n.bindBuffer(n.ARRAY_BUFFER,i),n.vertexAttribPointer(0,3,n.FLOAT,!1,0,0)):(e=this.assembleVertexPoints(t,this._skyHeight,this._skyWidth,r.getAltitude()),i=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW),n.vertexAttribPointer(0,3,n.FLOAT,!1,0,0),t.gpuResourceCache.putResource(o.verticesVboCacheKey,i,4*e.length),t.frameStatistics.incrementVboLoadCount(1))},u.prototype.applySkyIndices=function(t){var e,i,n=t.currentGlContext,r=this._skyData;r.indicesVboCacheKey||(r.indicesVboCacheKey=t.gpuResourceCache.generateCacheKey()),i=t.gpuResourceCache.resourceForKey(r.indicesVboCacheKey),i?n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i):(e=this.assembleTriStripIndices(this._skyWidth,this._skyHeight),i=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),t.gpuResourceCache.putResource(r.indicesVboCacheKey,i,2*e.length))},u.prototype.drawSky=function(t){var e=t.currentGlContext,i=t.findAndBindProgram(a);i.loadGlobeRadius(e,t.globe.equatorialRadius),i.loadEyePoint(e,t.navigatorState.eyePoint),i.loadVertexOrigin(e,h.ZERO),i.loadModelviewProjection(e,t.navigatorState.modelviewProjection),i.loadLightDirection(e,this._activeLightDirection),i.setScale(e),this.applySkyVertices(t),this.applySkyIndices(t),e.depthMask(!1),e.frontFace(e.CW),e.enableVertexAttribArray(0),e.drawElements(e.TRIANGLE_STRIP,this._numIndices,e.UNSIGNED_SHORT,0),e.depthMask(!0),e.frontFace(e.CCW),e.disableVertexAttribArray(0)},u.prototype.drawGround=function(t){var i,n=t.currentGlContext,r=t.findAndBindProgram(e),o=t.terrain;r.loadGlobeRadius(n,t.globe.equatorialRadius),r.loadEyePoint(n,t.navigatorState.eyePoint),r.loadLightDirection(n,this._activeLightDirection),r.setScale(n),this.nightImageSource&&this.lightLocation&&(this._activeTexture=t.gpuResourceCache.resourceForKey(this.nightImageSource),this._activeTexture||(this._activeTexture=t.gpuResourceCache.retrieveTexture(n,this.nightImageSource)),i=this._activeTexture&&this._activeTexture.bind(t)),o.beginRendering(t);for(var s=0,a=o.surfaceGeometry.length;s<a;s++){var h=o.surfaceGeometry[s],l=h.referencePoint;r.loadVertexOrigin(n,l),i&&(this._texMatrix.setToUnitYFlip(),this._texMatrix.multiplyByTileTransform(h.sector,this._fullSphereSector),r.loadTexMatrix(n,this._texMatrix)),o.beginRenderingTile(t,h),r.loadFragMode(n,r.FRAGMODE_GROUND_SECONDARY),n.blendFunc(n.DST_COLOR,n.ZERO),o.renderTile(t,h);var u=i?r.FRAGMODE_GROUND_PRIMARY_TEX_BLEND:r.FRAGMODE_GROUND_PRIMARY;r.loadFragMode(n,u),n.blendFunc(n.ONE,n.ONE),o.renderTile(t,h),o.endRenderingTile(t,h)}o.endRendering(t),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),this._activeTexture=null},u.prototype.assembleVertexPoints=function(t,e,i,n){var r=e*i,o=new Array(r);l.fillArray(o,n);var s=new Float32Array(3*r);return t.globe.computePointsForGrid(this._fullSphereSector,e,i,o,h.ZERO,s)},u.prototype.assembleTriStripIndices=function(t,e){for(var i=[],n=0,r=0;r<t-1;r++){for(var o=0;o<e;o++)n=o+r*e,i.push(n+e),i.push(n);r<t-2&&(i.push(n),i.push((r+2)*e))}return this._numIndices=i.length,new Uint16Array(i)},u.prototype.determineLightDirection=function(t){null!=this.lightLocation?t.globe.computePointFromLocation(this.lightLocation.latitude,this.lightLocation.longitude,this._activeLightDirection):this._activeLightDirection.copy(t.navigatorState.eyePoint),this._activeLightDirection.normalize()},u}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9)],r=function(t,e){"use strict";var i=function(t,e,i,n,r,o,s,a,h){this[0]=t,this[1]=e,this[2]=i,this[3]=n,this[4]=r,this[5]=o,this[6]=s,this[7]=a,this[8]=h};return i.prototype=new Float64Array(9),i.fromIdentity=function(){return new i(1,0,0,0,1,0,0,0,1)},i.prototype.setToUnitYFlip=function(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=-1,this[5]=1,this[6]=0,this[7]=0,this[8]=1,this},i.prototype.multiplyMatrix=function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"Matrix3","multiplyMatrix","missingMatrix"));var n,r,o,s=this,a=i;return n=s[0],r=s[1],o=s[2],s[0]=n*a[0]+r*a[3]+o*a[6],s[1]=n*a[1]+r*a[4]+o*a[7],s[2]=n*a[2]+r*a[5]+o*a[8],n=s[3],r=s[4],o=s[5],s[3]=n*a[0]+r*a[3]+o*a[6],s[4]=n*a[1]+r*a[4]+o*a[7],s[5]=n*a[2]+r*a[5]+o*a[8],n=s[6],r=s[7],o=s[8],s[6]=n*a[0]+r*a[3]+o*a[6],s[7]=n*a[1]+r*a[4]+o*a[7],s[8]=n*a[2]+r*a[5]+o*a[8],this},i.prototype.multiplyByTileTransform=function(t,e){var i=t.deltaLatitude(),n=t.deltaLongitude(),r=e.deltaLatitude(),o=e.deltaLongitude(),s=n/o,a=i/r,h=(t.minLongitude-e.minLongitude)/o,l=(t.minLatitude-e.minLatitude)/r,u=this;return u[2]+=u[0]*h+u[1]*l,u[5]+=u[3]*h+u[4]*l,u[8]+=u[6]*h+u[6]*l,u[0]*=s,u[1]*=a,u[3]*=s,u[4]*=a,u[6]*=s,u[7]*=a,this},i.prototype.columnMajorComponents=function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"Matrix3","columnMajorComponents","missingResult"));return i[0]=this[0],i[1]=this[3],i[2]=this[6],i[3]=this[1],i[4]=this[4],i[5]=this[7],i[6]=this[2],i[7]=this[5],i[8]=this[8],i},i}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(85)],r=function(t){"use strict";var e=function(e){var i="precision mediump int;\nconst int FRAGMODE_GROUND_PRIMARY_TEX_BLEND = 4;\nconst int SAMPLE_COUNT = 2;\nconst float SAMPLES = 2.0;\nconst float PI = 3.141592653589;\nconst float Kr = 0.0025;\nconst float Kr4PI = Kr * 4.0 * PI;\nconst float Km = 0.0015;\nconst float Km4PI = Km * 4.0 * PI;\nconst float ESun = 15.0;\nconst float KmESun = Km * ESun;\nconst float KrESun = Kr * ESun;\nconst vec3 invWavelength = vec3(5.60204474633241, 9.473284437923038, 19.643802610477206);\nconst float rayleighScaleDepth = 0.25;\nuniform int fragMode;\nuniform mat4 mvpMatrix;\nuniform mat3 texCoordMatrix;\nuniform vec3 vertexOrigin;\nuniform vec3 eyePoint;\nuniform float eyeMagnitude;\nuniform float eyeMagnitude2;\nuniform vec3 lightDirection;\nuniform float atmosphereRadius;\nuniform float atmosphereRadius2;\nuniform float globeRadius;\nuniform float scale;\nuniform float scaleDepth;\nuniform float scaleOverScaleDepth;\nattribute vec4 vertexPoint;\nattribute vec2 vertexTexCoord;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec2 texCoord;\nfloat scaleFunc(float cos) {\n    float x = 1.0 - cos;\n    return scaleDepth * exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n}\nvoid sampleGround() {\n    vec3 point = vertexPoint.xyz + vertexOrigin;\n    vec3 ray = point - eyePoint;\n    float far = length(ray);\n    ray /= far;\n    vec3 start;\n    if (eyeMagnitude < atmosphereRadius) {\n        start = eyePoint;\n    } else {\n        float B = 2.0 * dot(eyePoint, ray);\n        float C = eyeMagnitude2 - atmosphereRadius2;\n        float det = max(0.0, B*B - 4.0 * C);\n        float near = 0.5 * (-B - sqrt(det));\n        start = eyePoint + ray * near;\n        far -= near;\n}\n    float depth = exp((globeRadius - atmosphereRadius) / scaleDepth);\n    float eyeAngle = dot(-ray, point) / length(point);\n    float lightAngle = dot(lightDirection, point) / length(point);\n    float eyeScale = scaleFunc(eyeAngle);\n    float lightScale = scaleFunc(lightAngle);\n    float eyeOffset = depth*eyeScale;\n    float temp = (lightScale + eyeScale);\n    float sampleLength = far / SAMPLES;\n    float scaledLength = sampleLength * scale;\n    vec3 sampleRay = ray * sampleLength;\n    vec3 samplePoint = start + sampleRay * 0.5;\n    vec3 frontColor = vec3(0.0, 0.0, 0.0);\n    vec3 attenuate = vec3(0.0, 0.0, 0.0);\n    for(int i=0; i<SAMPLE_COUNT; i++)\n    {\n        float height = length(samplePoint);\n        float depth = exp(scaleOverScaleDepth * (globeRadius - height));\n        float scatter = depth*temp - eyeOffset;\n        attenuate = exp(-scatter * (invWavelength * Kr4PI + Km4PI));\n        frontColor += attenuate * (depth * scaledLength);\n        samplePoint += sampleRay;\n    }\n    primaryColor = frontColor * (invWavelength * KrESun + KmESun);\n    secondaryColor = attenuate;\n}\nvoid main()\n {\n    sampleGround();\n    gl_Position = mvpMatrix * vertexPoint;\n    if (fragMode == FRAGMODE_GROUND_PRIMARY_TEX_BLEND) {\n        texCoord = (texCoordMatrix * vec3(vertexTexCoord, 1.0)).st;\n    }\n}",n="precision mediump float;\nprecision mediump int;\nconst int FRAGMODE_GROUND_PRIMARY = 2;\nconst int FRAGMODE_GROUND_SECONDARY = 3;\nconst int FRAGMODE_GROUND_PRIMARY_TEX_BLEND = 4;\nuniform int fragMode;\nuniform sampler2D texSampler;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec2 texCoord;\nvoid main (void)\n{\n    if (fragMode == FRAGMODE_GROUND_PRIMARY) {\n        gl_FragColor = vec4(primaryColor, 1.0);\n    } else if (fragMode == FRAGMODE_GROUND_SECONDARY) {\n        gl_FragColor = vec4(secondaryColor, 1.0);\n    } else if (fragMode == FRAGMODE_GROUND_PRIMARY_TEX_BLEND) {\n        vec4 texColor = texture2D(texSampler, texCoord);\n        gl_FragColor = vec4(primaryColor + texColor.rgb * (1.0 - secondaryColor), 1.0);\n    }\n}";t.call(this,e,i,n,["vertexPoint","vertexTexCoord"])};return e.key="WorldWindGroundProgram",e.prototype=Object.create(t.prototype),e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(41),i(9)],r=function(t,e,i){"use strict";var n=function(t,i,n,r){e.call(this,t,i,n,r),this.FRAGMODE_SKY=1,this.FRAGMODE_GROUND_PRIMARY=2,this.FRAGMODE_GROUND_SECONDARY=3,this.FRAGMODE_GROUND_PRIMARY_TEX_BLEND=4,this.altitude=16e4,this.rayleighScaleDepth=.25,this.fragModeLocation=this.uniformLocation(t,"fragMode"),this.mvpMatrixLocation=this.uniformLocation(t,"mvpMatrix"),this.texCoordMatrixLocation=this.uniformLocation(t,"texCoordMatrix"),this.vertexOriginLocation=this.uniformLocation(t,"vertexOrigin"),this.eyePointLocation=this.uniformLocation(t,"eyePoint"),this.eyeMagnitudeLocation=this.uniformLocation(t,"eyeMagnitude"),this.eyeMagnitude2Location=this.uniformLocation(t,"eyeMagnitude2"),this.lightDirectionLocation=this.uniformLocation(t,"lightDirection"),this.atmosphereRadiusLocation=this.uniformLocation(t,"atmosphereRadius"),this.atmosphereRadius2Location=this.uniformLocation(t,"atmosphereRadius2"),this.globeRadiusLocation=this.uniformLocation(t,"globeRadius"),this.scaleLocation=this.uniformLocation(t,"scale"),this.scaleDepthLocation=this.uniformLocation(t,"scaleDepth"),this.scaleOverScaleDepthLocation=this.uniformLocation(t,"scaleOverScaleDepth"),this.scratchArray9=new Float32Array(9)};return n.key="WorldWindGpuAtmosphereProgram",n.prototype=Object.create(e.prototype),n.prototype.getAltitude=function(){return this.altitude},n.prototype.loadFragMode=function(e,n){if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"AtmosphereProgram","loadFragMode","missingFragMode"));e.uniform1i(this.fragModeLocation,n)},n.prototype.loadModelviewProjection=function(e,n){if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"AtmosphereProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(e,n,this.mvpMatrixLocation)},n.prototype.loadVertexOrigin=function(e,n){if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"AtmosphereProgram","loadVertexOrigin","missingVector"));e.uniform3f(this.vertexOriginLocation,n[0],n[1],n[2])},n.prototype.loadLightDirection=function(e,n){if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"AtmosphereProgram","loadLightDirection","missingVector"));e.uniform3f(this.lightDirectionLocation,n[0],n[1],n[2])},n.prototype.loadEyePoint=function(e,n){if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"AtmosphereProgram","loadEyePoint","missingVector"));e.uniform3f(this.eyePointLocation,n[0],n[1],n[2]),e.uniform1f(this.eyeMagnitudeLocation,n.magnitude()),e.uniform1f(this.eyeMagnitude2Location,n.magnitudeSquared())},n.prototype.loadGlobeRadius=function(e,n){if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"AtmosphereProgram","loadGlobeRadius","missingGlobeRadius"));var r=n,o=r+this.altitude;e.uniform1f(this.globeRadiusLocation,r),e.uniform1f(this.atmosphereRadiusLocation,o),e.uniform1f(this.atmosphereRadius2Location,o*o)},n.prototype.setScale=function(t){t.uniform1f(this.scaleLocation,1/this.getAltitude()),t.uniform1f(this.scaleDepthLocation,this.rayleighScaleDepth),t.uniform1f(this.scaleOverScaleDepthLocation,1/this.getAltitude()/this.rayleighScaleDepth)},n.prototype.loadTexMatrix=function(e,n){if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"AtmosphereProgram","loadTexMatrix","missingMatrix"));n.columnMajorComponents(this.scratchArray9),e.uniformMatrix3fv(this.texCoordMatrixLocation,!1,this.scratchArray9)},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(85)],r=function(t){"use strict";var e=function(e){var i="precision mediump int;\nconst int SAMPLE_COUNT = 2;\nconst float SAMPLES = 2.0;\nconst float PI = 3.141592653589;\nconst float Kr = 0.0025;\nconst float Kr4PI = Kr * 4.0 * PI;\nconst float Km = 0.0015;\nconst float Km4PI = Km * 4.0 * PI;\nconst float ESun = 15.0;\nconst float KmESun = Km * ESun;\nconst float KrESun = Kr * ESun;\nconst vec3 invWavelength = vec3(5.60204474633241, 9.473284437923038, 19.643802610477206);\nconst float rayleighScaleDepth = 0.25;\nuniform mat4 mvpMatrix;\nuniform vec3 vertexOrigin;\nuniform vec3 eyePoint;\nuniform float eyeMagnitude;\nuniform float eyeMagnitude2;\nuniform mediump vec3 lightDirection;\nuniform float atmosphereRadius;\nuniform float atmosphereRadius2;\nuniform float globeRadius;\nuniform float scale;\nuniform float scaleDepth;\nuniform float scaleOverScaleDepth;\nattribute vec4 vertexPoint;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec3 direction;\nfloat scaleFunc(float cos)\n{\n    float x = 1.0 - cos;\n    return scaleDepth * exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n}\nvoid sampleSky() {\n    vec3 point = vertexPoint.xyz + vertexOrigin;\n    vec3 ray = point - eyePoint;\n    float far = length(ray);\n    ray /= far;\n    vec3 start;\n    float startOffset;\n    if (eyeMagnitude < atmosphereRadius) {\n        start = eyePoint;\n        float height = length(start);\n        float depth = exp(scaleOverScaleDepth * (globeRadius - eyeMagnitude));\n        float startAngle = dot(ray, start) / height;\n        startOffset = depth*scaleFunc(startAngle);\n    } else {\n        float B = 2.0 * dot(eyePoint, ray);\n        float C = eyeMagnitude2 - atmosphereRadius2;\n        float det = max(0.0, B*B - 4.0 * C);\n        float near = 0.5 * (-B - sqrt(det));\n        start = eyePoint + ray * near;\n        far -= near;\n        float startAngle = dot(ray, start) / atmosphereRadius;\n        float startDepth = exp(-1.0 / scaleDepth);\n        startOffset = startDepth*scaleFunc(startAngle);\n    }\n    float sampleLength = far / SAMPLES;\n    float scaledLength = sampleLength * scale;\n    vec3 sampleRay = ray * sampleLength;\n    vec3 samplePoint = start + sampleRay * 0.5;\n    vec3 frontColor = vec3(0.0, 0.0, 0.0);\n    for(int i=0; i<SAMPLE_COUNT; i++)\n    {\n       float height = length(samplePoint);\n       float depth = exp(scaleOverScaleDepth * (globeRadius - height));\n       float lightAngle = dot(lightDirection, samplePoint) / height;\n       float cameraAngle = dot(ray, samplePoint) / height;\n       float scatter = (startOffset + depth*(scaleFunc(lightAngle) - scaleFunc(cameraAngle)));\n       vec3 attenuate = exp(-scatter * (invWavelength * Kr4PI + Km4PI));\n       frontColor += attenuate * (depth * scaledLength);\n       samplePoint += sampleRay;\n    }\n    primaryColor = frontColor * (invWavelength * KrESun);\n    secondaryColor = frontColor * KmESun;\n    direction = eyePoint - point;\n}\nvoid main()\n{\n    sampleSky();\n    gl_Position = mvpMatrix * vertexPoint;\n    gl_Position.z = gl_Position.w - 0.00001;\n}",n="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nconst float g = -0.95;\nconst float g2 = g * g;\nuniform mediump vec3 lightDirection;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec3 direction;\nvoid main (void)\n{\n    float cos = dot(lightDirection, direction) / length(direction);\n    float rayleighPhase = 0.75 * (1.0 + cos * cos);\n    float miePhase = 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + cos*cos) /         pow(1.0 + g2 - 2.0*g*cos, 1.5);\n    const float exposure = 2.0;\n    vec3 color = primaryColor * rayleighPhase + secondaryColor * miePhase;\n    color = vec3(1.0) - exp(-exposure * color);\n    gl_FragColor = vec4(color, color.b);\n}";t.call(this,e,i,n,["vertexPoint"])};return e.key="WorldWindSkyProgram",e.prototype=Object.create(t.prototype),e}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n=i(88),r=i(31),o=i(89),s=function(t){n.call(this,"Single image layer"),this.addRenderable(new o(r.FULL_SPHERE,t)),this.minActiveAltitude=0};s.prototype=Object.create(n.prototype),t.exports=s},function(t,e,i){var n,r;n=[i(7),i(69),i(9)],r=function(t,e,i){"use strict";var n=function(t){e.call(this,t),this.renderables=[]};return n.prototype=Object.create(e.prototype),n.prototype.addRenderable=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"RenderableLayer","addRenderable","missingRenderable"));this.renderables.push(e)},n.prototype.addRenderables=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"RenderableLayer","addRenderables","The renderables array is null or undefined."));for(var n=0,r=e.length;n<r;n++)this.addRenderable(e[n])},n.prototype.removeRenderable=function(t){var e=this.renderables.indexOf(t);e>=0&&this.renderables.splice(e,1)},n.prototype.removeAllRenderables=function(){this.renderables=[]},n.prototype.doRender=function(t){for(var e=t.orderedRenderables.length,n=0,r=this.renderables.length;n<r;n++)try{this.renderables[n].render(t)}catch(t){i.logMessage(i.LEVEL_SEVERE,"RenderableLayer","doRender","Error while rendering shape "+this.renderables[n].displayName+".\n"+t.toString())}t.orderedRenderables.length>e&&(this.inCurrentFrame=!0)},n}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(53),i(90)],r=function(t,e,i,n){"use strict";var r=function(i,r){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceImage","constructor","missingSector"));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceImage","constructor","missingImage"));n.call(this,i),this.enabled=!0,this._imageSource=r,this.opacity=1,this.displayName="Surface Image",this.imageSourceWasUpdated=!0};return r.prototype=Object.create(n.prototype),Object.defineProperties(r.prototype,{imageSource:{get:function(){return this._imageSource},set:function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceImage","imageSource","missingImage"));this._imageSource=i,this.imageSourceWasUpdated=!0}}}),r.prototype.bind=function(t){var e=t.gpuResourceCache.resourceForKey(this._imageSource);return e&&!this.imageSourceWasUpdated?e.bind(t):(e=t.gpuResourceCache.retrieveTexture(t.currentGlContext,this._imageSource),this.imageSourceWasUpdated=!1,e?e.bind(t):void 0)},r.prototype.applyInternalTransform=function(t,e){},r.prototype.render=function(t){if(this.enabled&&this.sector.overlaps(t.terrain.sector)){if(t.pickingMode&&(this.pickColor=t.uniquePickColor()),t.surfaceTileRenderer.renderTiles(t,[this],this.opacity*t.currentLayer.opacity),t.pickingMode){var e=new i(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);t.resolvePick(e)}t.currentLayer.inCurrentFrame=!0}},r}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n,r;n=[i(7),i(9),i(13),i(31),i(25)],r=function(t,e,i,n,r){"use strict";var o=function(i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceTile","constructor","missingSector"));this.sector=i};return o.prototype.bind=function(t){throw new r(e.logMessage(e.LEVEL_SEVERE,"SurfaceTile","bind","abstractInvocation"))},o.prototype.applyInternalTransform=function(t,i){throw new r(e.logMessage(e.LEVEL_SEVERE,"SurfaceTile","applyInternalTransform","abstractInvocation"))},o}.apply(e,n),!(void 0!==r&&(t.exports=r))},function(t,e){var i={};t.exports={CONTROLS_CHANGED:"controls",NAVIGATOR_STATE_CHANGED:"navigator-state-changed",SWITCH_GLOBE:"switch-globe",ROTATE_TO:"rotate-to",SHOW_FORM:"show-form",HIDE_FORM:"hide-form",TOGGLE_FORM:"toggle-form"},t.exports.post=function(t,e){i[t]&&i[t].forEach(function(t){try{t(e)}catch(t){console.error(t)}})},t.exports.listen=function(t,e){i[t]||(i[t]=[]),i[t].push(e)}},function(t,e,i){function n(t,e){R.post(R.CONTROLS_CHANGED,{parameter:e?e:S,value:t})}function r(t){if("heading"==S){var e=w+d(t);return h(e),void n(-e)}var i=L+p(t);return Math.abs(i)>x&&(i=Math.sign(i)*x),"tilt"==S?(u(i),void n((i+x)/_*90)):void("range"==S&&(l(i),n(1e5+(i+x)/_*2e7)))}function o(t){S=y(this.id),"heading"==S?w=a()-d(t):L=s(this)-p(t),document.addEventListener("mousemove",r),document.addEventListener("mouseup",E)}function s(t){return parseFloat(t.getAttribute("transform").split(/\(|\)/)[1].split(" ")[1])}function a(){return parseFloat(M.heading.parentNode.getAttribute("transform").split(/\(|\)/)[1])}function h(t){M.heading.parentNode.setAttribute("transform","rotate("+t+")")}function l(t){M.zoom.setAttribute("transform","translate(100 "+t+")")}function u(t){M.tilt.setAttribute("transform","translate(-100 "+t+")")}function c(t){var e=T.select("#controls-"+t+"-knob");return e.addEventListener("mousedown",o),e}function d(t){return g(Math.PI-Math.atan2(f(t),p(t)))}function p(t){return t.clientY-m(b.parentNode,"offsetTop")-b.clientHeight/2}function f(t){return t.clientX-m(b.parentNode,"offsetLeft")-b.clientWidth/2}function g(t){return t/Math.PI*180}function E(){S=null,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",E)}function m(t,e){var i=t[e];return t.offsetParent&&(i+=m(t.offsetParent,e)),i}function v(t){function e(){document.removeEventListener("mouseup",e),n(!1,r)}function i(){document.addEventListener("mouseup",e),n(!0,r)}const r=y(t.id);t.addEventListener("mousedown",i)}function y(t){return t.split("-")[1]}var L,w,S,R=i(91),T=i(93),_=160,x=_/2,M={heading:c("heading"),tilt:c("tilt"),zoom:c("range")},b=T.select("#controls-svg");t.exports=b,T.all("path.arrow").forEach(v),T.select("#controls-globe").click(function(){R.post(R.ROTATE_TO,{heading:0,tilt:0})}),R.listen(R.NAVIGATOR_STATE_CHANGED,function(t){if(!S&&(null!=t.heading&&h(-t.heading),null!=t.tilt&&u(t.tilt/90*_-x),null!=t.range)){var e=(1e5+t.range)/2e7*_-x;Math.abs(e)>x&&(e=Math.sign(e)*x),l(e)}})},function(t,e){function i(t,e){var i=r(t,"http://www.w3.org/2000/svg");return a(i,e)}function n(t,e,i){var n=r(t);return a(i),s(n,e)}function r(t,e){return o(e?document.createElementNS(e,t):document.createElement(t))}function o(t){return t.append=function(e){return t.appendChild(e.domElement?e.domElement:e),t},t.appendTo=function(e){return e.appendChild(t),t},t.setClass=function(e,i){return t.classList[i?"add":"remove"](e),t},t.val=l(t,"value"),t.change=l(t,"oninput"),t.html=l(t,"innerHTML"),t.top=h(t,"top"),t.left=h(t,"left"),t.over=u(t,"mouseover"),t.out=u(t,"mouseout"),t.click=u(t,"click"),t}function s(t,e){return e&&(t.className=e.toString()),t}function a(t,e){if(e)for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i]);return t}function h(t,e){return function(i){return t.style[e]=i,t}}function l(t,e){return function(i){return i&&(t[e]=i),t}}function u(t,e){return function(i){return t.addEventListener(e,i),t}}t.exports={div:function(t){return n("div",t)},span:function(t){return n("span",t)},input:function(t){return n("input",t)},img:function(t,e){return n("img",e,{src:t?t:""})},svg:function(t){return i("svg",t)},path:function(t){return i("path",t)},circle:function(t){return i("circle",t)},select:function(t,e){return o((e||document).querySelector(t))},all:function(t,e){return Array.prototype.slice.call((e||document).querySelectorAll(t)).map(function(t){return o(t)})}}},function(t,e,i){var n=i(91);document.querySelector("#switch-globe").onclick=function(){n.post(n.SWITCH_GLOBE)},document.querySelector("#settings").onclick=function(){n.post(n.TOGGLE_FORM,"form-settings")}},function(t,e,i){var n=i(96);n("form-settings","Настройки").addMinimizeButton().appendTo(document.body),n("form-settings1","Настройки1").addMinimizeButton().appendTo(document.body).show()},function(t,e,i){function n(){return s().append(o("M5,15 H16"))}function r(){return s().append(o("M5,5 L16,16 M5,16 L16,5"))}function o(t){return a.path({d:t,stroke:"lightgray","stroke-width":3})}function s(){return a.svg({width:21,height:21,viewbox:"0 0 25 25"})}var a=i(93),h=i(97),l=i(91);t.exports=function(t,e){function i(t){var e=window.innerWidth-m-u.offsetWidth;t=t>e?e:t,t=t<m?m:t,u.style.left=t+"px"}function o(t){var e=window.innerHeight-m-u.offsetHeight;t=t>e?e:t,t=t<m?m:t,u.style.bottom=t+"px"}function s(t){i(p+t.clientX-g),o(window.innerHeight-(f+t.clientY-E)-u.offsetHeight)}var u=a.div("form");u.oncontextmenu=function(t){return!1},"string"==typeof e?e=a.div("form-title").html(e).appendTo(u):e&&u.append(e);var c={};u.fields=c;var d=a.div("form-content").appendTo(u);u.add=function(t){return d.append(t),u},u.addFields=function(t,e){return e=e||"default",c[e]=[],t.forEach(function(t){var i=h(t);u.add(i),t.path&&c[e].push(i)}),u},u.render=function(t,e){return e=e||"default",c[e]&&c[e].forEach(function(e){e.render(t)}),u},u.getField=function(t,e){return e=e||"default",c[e].filter(function(e){return t==e.cfg.path})[0]},u.addMinimizeButton=function(t){var i=a.div("form-top-button").click(function(){u.oldLeft=u.offsetLeft,u.style.left=160*a.all(".form-minimized").length+10+"px",u.classList.add("form-minimized"),i.classList.add("hidden"),t&&t.classList.add("hidden")}).appendTo(u).append(n());return e.click(function(){u.classList.contains("form-minimized")&&(u.classList.remove("form-minimized"),i.classList.remove("hidden"),t&&t.classList.remove("hidden"),a.all(".form-minimized").forEach(function(t){if(t.offsetLeft>u.offsetLeft){var e=t.offsetLeft-160;t.style.left=e+"px"}}),u.style.left=u.oldLeft+"px")}),u},u.addCloseButton=function(){return a.div("form-top-button").click(u.hide).appendTo(u).append(r()),u},u.show=function(){return u.classList.add("visible"),u},u.hide=function(){return u.classList.remove("visible"),u},u.toggle=function(){return u.classList.contains("visible")?u.hide():u.show()},u.clear=function(){return d.innerHTML="",u},u.id=t,l.listen(l.SHOW_FORM,function(e){e==t&&u.show()}),l.listen(l.HIDE_FORM,function(e){e==t&&u.hide()}),l.listen(l.TOGGLE_FORM,function(e){e==t&&u.toggle()});var p,f,g,E,m=10;return e.addEventListener("mousedown",function(t){u.classList.contains("form-minimized")||(p=u.offsetLeft,f=u.offsetTop,u.classList.remove("form-transition"),g=t.clientX,E=t.clientY,window.addEventListener("mousemove",s,!1),window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",s,!1),u.classList.add("form-transition")},!1))},!1),window.addEventListener("resize",function(){i(u.offsetLeft),o(window.innerHeight-u.offsetTop-u.offsetHeight)}),u}},function(t,e,i){function n(t){var e=s.div("form-field");e.cfg=t,s.div("form-field-title").html(t.title+":").appendTo(e);var i=s.div("form-field-value").appendTo(e);if(e.set=function(t){i.html(t)},e.render=function(e){var n=t.custom.provider?t.custom.provider(e):r(e,t.path);t.custom.renderer?t.custom.renderer(n,i,e):i.innerHTML=null==n?"-":n},t.custom.style)for(var n in t.custom.style)t.custom.style.hasOwnProperty(n)&&(e.style[n]=t.custom.style[n]);return e}function r(t,e){try{e=e.split(".");for(var i=0;i<e.length;i++)t=t[e[i]];return t}catch(t){return null}}function o(t,e,i){function n(t){return function(e){return r.custom[t]=e,r}}const r={title:t,path:e,custom:{style:i}};return r.style=n("style"),r.provider=n("provider"),r.renderer=n("renderer"),r.onclick=n("onclick"),r}var s=i(93);t.exports=n,t.exports.cfg=o}]);</script></body></html>